!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(lf){"use strict";try{(function(){lf=lf&&Object.prototype.hasOwnProperty.call(lf,"default")?lf.default:lf;var t,a,e,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function d(t,s,a,u){return new(a=a||Promise)(function(n,e){function i(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,r)}o((u=u.apply(t,s||[])).next())})}function y(n,i){var r,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(n,a)}catch(t){e=[6,t],o=0}finally{r=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(e=a=a||{})[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT";function o(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var r=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+r+"]  "+t.name+":"],n))}}var u={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},h=a.INFO,c=((t={})[a.DEBUG]="log",t[a.VERBOSE]="log",t[a.INFO]="info",t[a.WARN]="warn",t[a.ERROR]="error",t),l=(Object.defineProperty(f.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),f.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?u[t]:t},Object.defineProperty(f.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),f.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.DEBUG],t)),this._logHandler.apply(this,s([this,a.DEBUG],t))},f.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.VERBOSE],t)),this._logHandler.apply(this,s([this,a.VERBOSE],t))},f.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.INFO],t)),this._logHandler.apply(this,s([this,a.INFO],t))},f.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.WARN],t)),this._logHandler.apply(this,s([this,a.WARN],t))},f.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.ERROR],t)),this._logHandler.apply(this,s([this,a.ERROR],t))},f);function f(t){this.name=t,this._logLevel=h,this._logHandler=o,this._userLogHandler=null}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var v,g="FirebaseError",m=(n(w,v=Error),w);function w(t,e){var n=v.call(this,e)||this;return n.code=t,n.name=g,Object.setPrototypeOf(n,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,b.prototype.create),n}var b=(E.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i,r=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(i=r,s.replace(I,function(t,e){var n=i[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",h=new m(o,u),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in h&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),h[f]=r[f])}return h},E);function E(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var I=/\{\$([^}]+)}/g,T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var N,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},R={},O=_||self;function S(){}function D(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function k(t){var e=D(t);return"array"==e||"object"==e&&"number"==typeof t.length}function P(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var L="closure_uid_"+(1e9*Math.random()>>>0),V=0;function C(t,e,n){return t.call.apply(t.bind,arguments)}function U(e,n,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function M(t,e,n){return(M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:U).apply(null,arguments)}function x(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var q=Date.now;function F(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function j(){this.j=this.j,this.i=this.i}j.prototype.j=!1,j.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,L)&&t[L]||(t[L]=++V))},j.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};function z(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function K(t){return/^[\s\xa0]*$/.test(t)}var W,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function X(t,e){return-1!=t.indexOf(e)}function Q(t,e){return t<e?-1:e<t?1:0}t:{var $=O.navigator;if($){var J=$.userAgent;if(J){W=J;break t}}W=""}function Z(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function tt(t){var e={};for(var n in t)e[n]=t[n];return e}var et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<et.length;o++)n=et[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function it(t){return it[" "](t),t}it[" "]=S;var rt,ot,st=X(W,"Opera"),at=X(W,"Trident")||X(W,"MSIE"),ut=X(W,"Edge"),ht=ut||at,ct=X(W,"Gecko")&&!(X(W.toLowerCase(),"webkit")&&!X(W,"Edge"))&&!(X(W,"Trident")||X(W,"MSIE"))&&!X(W,"Edge"),lt=X(W.toLowerCase(),"webkit")&&!X(W,"Edge");function ft(){var t=O.document;return t?t.documentMode:void 0}t:{var pt="",dt=(ot=W,ct?/rv:([^\);]+)(\)|;)/.exec(ot):ut?/Edge\/([\d\.]+)/.exec(ot):at?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ot):lt?/WebKit\/(\S+)/.exec(ot):st?/(?:Version)[ \/]?(\S+)/.exec(ot):void 0);if(dt&&(pt=dt?dt[1]:""),at){var yt=ft();if(null!=yt&&yt>parseFloat(pt)){rt=String(yt);break t}}rt=pt}var vt={};function gt(a){return t=a,e=function(){for(var t=0,e=Y(String(rt)).split("."),n=Y(String(a)).split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var o=e[r]||"",s=n[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Q(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Q(0==o[2].length,0==s[2].length)||Q(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=vt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var mt=O.document&&at?ft()||(parseInt(rt,10)||void 0):void 0,wt=!at||9<=Number(mt),bt=at&&!gt("9"),Et=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{O.addEventListener("test",S,e),O.removeEventListener("test",S,e)}catch(t){}return t}();function It(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Tt(t,e){if(It.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ct){t:{try{it(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:At[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}It.prototype.b=function(){this.defaultPrevented=!0},F(Tt,It);var At={2:"touch",3:"pen",4:"mouse"};Tt.prototype.b=function(){Tt.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,bt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Nt="closure_listenable_"+(1e6*Math.random()|0),_t=0;function Rt(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ca=r,this.key=++_t,this.Y=this.Z=!1}function Ot(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function St(t){this.src=t,this.a={},this.b=0}function Dt(t,e){var n,i,r,o=e.type;o in t.a&&(n=t.a[o],(r=0<=(i=G(n,e)))&&Array.prototype.splice.call(n,i,1),r&&(Ot(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function kt(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==i)return r}return-1}St.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=kt(t,e,i,r);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Rt(e,this.src,o,!!i,r)).Z=n,t.push(e)),e};var Pt="closure_lm_"+(1e6*Math.random()|0),Lt={};function Vt(t,e,n,i,r){if(i&&i.once)return function t(e,n,i,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);return null}i=Gt(i);return e&&e[Nt]?e.wa(n,i,P(r)?!!r.capture:!!r,o):Ct(e,n,i,!0,r,o)}(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Vt(t,e[o],n,i,r);return null}return n=Gt(n),t&&t[Nt]?t.va(e,n,P(i)?!!i.capture:!!i,r):Ct(t,e,n,!1,i,r)}function Ct(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=P(r)?!!r.capture:!!r;if(s&&!wt)return null;var a,u,h=Ft(t);if(h||(t[Pt]=h=new St(t)),(n=h.add(e,n,i,s,o)).proxy)return n;if(a=qt,i=u=wt?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=i).src=t,i.listener=n,t.addEventListener)Et||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Mt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function Ut(t){var e,n,i;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Nt]?Dt(e.c,t):(n=t.type,i=t.proxy,e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Mt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Ft(e))?(Dt(n,t),0==n.b&&(n.src=null,e[Pt]=null)):Ot(t)))}function Mt(t){return t in Lt?Lt[t]:Lt[t]="on"+t}function xt(t,e){var n=t.listener,i=t.ca||t.src;return t.Z&&Ut(t),n.call(i,e)}function qt(t,e){if(t.Y)return!0;if(wt)return xt(t,new Tt(e,this));if(!e)t:{e=["window","event"];for(var n=O,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}return xt(t,e=new Tt(e,this))}function Ft(t){return(t=t[Pt])instanceof St?t:null}var jt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gt(e){return"function"==D(e)?e:(e[jt]||(e[jt]=function(t){return e.handleEvent(t)}),e[jt])}function Bt(){j.call(this),this.c=new St(this),(this.J=this).C=null}function zt(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Dt(t.c,u),r=!1!==s.call(a,i)&&r)}return r&&!i.defaultPrevented}F(Bt,j),Bt.prototype[Nt]=!0,(N=Bt.prototype).addEventListener=function(t,e,n,i){Vt(this,t,e,n,i)},N.removeEventListener=function(t,e,n,i){!function t(e,n,i,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);else r=P(r)?!!r.capture:!!r,i=Gt(i),e&&e[Nt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(i=kt(s=e.a[n],i,r,o))&&(Ot(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Ft(e))&&(n=e.a[n.toString()],e=-1,n&&(e=kt(n,i,r,o)),(i=-1<e?n[e]:null)&&Ut(i))}(this,t,e,n,i)},N.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var i=t.type||t;if("string"==typeof t?t=new It(t,n):t instanceof It?t.target=t.target||n:(s=t,nt(t=new It(i,n),s)),s=!0,e)for(var r=e.length-1;0<=r;r--)var o=t.a=e[r],s=zt(o,i,!0,t)&&s;if(s=zt(o=t.a=n,i,!0,t)&&s,s=zt(o,i,!1,t)&&s,e)for(r=0;r<e.length;r++)s=zt(o=t.a=e[r],i,!1,t)&&s;return s},N.G=function(){if(Bt.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)Ot(n[i]);delete e.a[t],e.b--}}this.C=null},N.va=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},N.wa=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)};var Ht=O.JSON.stringify;function Kt(){this.b=this.a=null}var Wt,Yt=(Xt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Xt(function(){return new Qt},function(t){t.reset()},100));function Xt(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Qt(){this.next=this.b=this.a=null}function $t(t,e){var n;Wt||(n=O.Promise.resolve(void 0),Wt=function(){n.then(te)}),Jt||(Wt(),Jt=!0),Zt.add(t,e)}Kt.prototype.add=function(t,e){var n=Yt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Qt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Jt=!(Qt.prototype.reset=function(){this.next=this.b=this.a=null}),Zt=new Kt;function te(){for(var t,e,n;n=e=void 0,n=null,(e=Zt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){O.setTimeout(function(){throw t},0)}(t)}var i=Yt;i.g(t),i.b<i.f&&(i.b++,t.next=i.a,i.a=t)}Jt=!1}function ee(t,e){Bt.call(this),this.b=t||1,this.a=e||O,this.f=M(this.Ya,this),this.g=q()}function ne(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ie(t,e,n){if("function"==D(t))n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:O.setTimeout(t,e||0)}F(ee,Bt),(N=ee.prototype).aa=!1,N.M=null,N.Ya=function(){var t;this.aa&&(0<(t=q()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(ne(this),this.start())))},N.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},N.G=function(){ee.S.G.call(this),ne(this),delete this.a};var re,oe,se,ae=(T(oe=he,se=re=j),oe.prototype=null===se?Object.create(se):(ue.prototype=se.prototype,new ue),he.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=ie(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},he.prototype.G=function(){re.prototype.G.call(this),this.a&&(O.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},he);function ue(){this.constructor=oe}function he(t,e,n){var i=re.call(this)||this;return i.g=null!=n?t.bind(n):t,i.h=e,i.b=null,i.c=!1,i.a=null,i}function ce(t){j.call(this),this.b=t,this.a={}}F(ce,j);var le=[];function fe(t,e,n,i){Array.isArray(n)||(n&&(le[0]=n.toString()),n=le);for(var r=0;r<n.length;r++){var o=Vt(e,n[r],i||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function pe(t){Z(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ut(t)},t),t.a={}}function de(){this.a=!0}function ye(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(i.length<2)){var r=i[1];if(Array.isArray(r)&&!(r.length<1)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return Ht(n)}catch(t){return e}}(t,n)+(i?" "+i:"")})}ce.prototype.G=function(){ce.S.G.call(this),pe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},de.prototype.info=function(){};var ve=null;function ge(){return ve=ve||new Bt}function me(t){It.call(this,"serverreachability",t)}function we(t){var e=ge();e.dispatchEvent(new me(e))}function be(t){It.call(this,"statevent",t)}function Ee(t){var e=ge();e.dispatchEvent(new be(e))}function Ie(t){It.call(this,"timingevent",t)}function Te(t,e){if("function"!=D(t))throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){t()},e)}F(me,It),F(be,It),F(Ie,It);var Ae={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Ne={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function _e(){}function Re(t){var e;return(e=t.a)||(e=t.a={}),e}function Oe(){}_e.prototype.a=null;var Se,De={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ke(){It.call(this,"d")}function Pe(){It.call(this,"c")}function Le(){}function Ve(t,e,n,i){this.g=t,this.c=e,this.f=n,this.T=i||1,this.J=new ce(this),this.P=Ce,t=ht?125:void 0,this.R=new ee(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}F(ke,It),F(Pe,It),F(Le,_e),Se=new Le;var Ce=45e3,Ue={},Me={};function xe(t,e,n){t.H=1,t.i=sn(Ze(e)),t.j=n,t.I=!0,qe(t,null)}function qe(t,e){t.u=q(),je(t),t.l=Ze(t.i);var s,a,u,h,c,l,n=t.l,i=t.T;Array.isArray(i)||(i=[String(i)]),wn(n.b,"t",i),t.D=0,t.a=fi(t.g,t.g.C?e:null),0<t.O&&(t.F=new ae(M(t.Ca,t,t.a),t.O)),fe(t.J,t.a,"readystatechange",t.Wa),e=t.B?tt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),we(1),s=t.c,a=t.m,u=t.l,h=t.f,c=t.T,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var i,r,o=e[n].split("=");1<o.length&&(i=o[0],o=o[1],t=2<=(r=i.split("_")).length&&"type"==r[1]?t+(i+"=")+o+"&":t+(i+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+h+") [attempt "+c+"]: "+a+"\n"+u+"\n"+t})}function Fe(t,e,n){for(var i,r,o,s,a=!0;!t.A&&t.D<n.length;){var u=(r=n,s=o=void 0,o=(i=t).D,-1==(s=r.indexOf("\n",o))?Me:(o=Number(r.substring(o,s)),isNaN(o)?Ue:(s+=1)+o>r.length?Me:(r=r.substr(s,o),i.D=s+o,r)));if(u==Me){4==e&&(t.h=4,Ee(14),a=!1),ye(t.c,t.f,null,"[Incomplete Response]");break}if(u==Ue){t.h=4,Ee(15),ye(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}ye(t.c,t.f,u,null),Ke(t,u)}4==e&&0==n.length&&(t.h=1,Ee(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ri(e),e.F=!0)):(ye(t.c,t.f,n,"[Invalid Chunked Response]"),He(t),ze(t))}function je(t){t.U=q()+t.P,Ge(t,t.P)}function Ge(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Te(M(t.Ua,t),e)}function Be(t){t.o&&(O.clearTimeout(t.o),t.o=null)}function ze(t){0==t.g.v||t.A||ai(t.g,t)}function He(t){Be(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,ne(t.R),pe(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ke(t,e){try{var n,i,r,o,s,a,u,h,c,l,f,p=t.g;if(0!=p.v&&(p.a==t||_n(p.b,t)))if(p.I=t.N,!t.C&&_n(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var y=d;if(0==y[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;si(p),Xn(p)}ii(p),Ee(18)}}else p.oa=y[1],0<p.oa-p.P&&y[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=Te(M(p.Ra,p),6e3));if(Nn(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else hi(p,11)}else if(!t.C&&p.a!=t||si(p),!K(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++){y=e[d],p.P=y[0],y=y[1],2==p.v?"c"==y[0]?(p.J=y[1],p.ga=y[2],null!=(n=y[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(i=y[4])&&(p.pa=i,p.c.info("SVER="+p.pa)),null!=(r=y[5])&&"number"==typeof r&&0<r&&(o=1.5*r,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(s=t.a)&&(!(a=s.a?s.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(X(a,"spdy")||X(a,"quic")||X(a,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(Rn(u,u.b),u.b=null)),!o.A||(h=s.a?s.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=h,on(o.B,o.A,h))),p.v=3,p.f&&p.f.ta(),p.V&&(p.N=q()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),c=t,(o=p).la=li(o,o.C?o.ga:null,o.fa),c.C?(On(o.b,c),l=c,(f=o.D)&&l.setTimeout(f),l.o&&(Be(l),je(l)),o.a=c):ni(o),0<p.g.length&&Jn(p)):"stop"!=y[0]&&"close"!=y[0]||hi(p,7):3==p.v&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?hi(p,7):Yn(p):"noop"!=y[0]&&p.f&&p.f.sa(y),p.o=0)}we(4)}catch(t){}}function We(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(k(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(k(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(k(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}}function Ye(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Ye)for(n=t.L(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Xe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Qe(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){for(var r={},n=e=0;e<t.a.length;)Qe(r,i=t.a[e])||(r[t.a[n++]=i]=1),e++;t.a.length=n}}function Qe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(N=Ve.prototype).setTimeout=function(t){this.P=t},N.Wa=function(t){t=t.target;var e=this.F;e&&3==zn(t)?e.f():this.Ca(t)},N.Ca=function(t){try{if(t==this.a)t:{var e=zn(this.a),n=this.a.ua(),i=this.a.X();if(!(e<3||3==e&&!ht&&!this.a.$())){this.A||4!=e||7==n||we(8==n||i<=0?3:2),Be(this);var r=this.a.X();this.N=r;var o=this.a.$();if(this.b=200==r,h=this.c,c=this.m,l=this.l,f=this.f,p=this.T,d=e,y=r,h.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+p+"]: "+c+"\n"+l+"\n"+d+" "+y}),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Ee(12),He(this),ze(this);break t}ye(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ke(this,u)}this.I?(Fe(this,e,o),ht&&this.b&&3==e&&(fe(this.J,this.R,"tick",this.Va),this.R.start())):(ye(this.c,this.f,o,null),Ke(this,o)),4==e&&He(this),this.b&&!this.A&&(4==e?ai(this.g,this):(this.b=!1,je(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.h=3,Ee(12)):(this.h=0,Ee(13)),He(this),ze(this)}}}catch(t){}var h,c,l,f,p,d,y},N.Va=function(){var t,e;this.a&&(t=zn(this.a),e=this.a.$(),this.D<e.length&&(Be(this),Fe(this,t,e),this.b&&4!=t&&je(this)))},N.cancel=function(){this.A=!0,He(this)},N.Ua=function(){this.o=null;var t,e,n=q();0<=n-this.U?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(we(3),Ee(17)),He(this),this.h=2,ze(this)):Ge(this,this.U-n)},(N=Ye.prototype).K=function(){Xe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},N.L=function(){return Xe(this),this.a.concat()},N.get=function(t,e){return Qe(this.b,t)?this.b[t]:e},N.set=function(t,e){Qe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},N.forEach=function(t,e){for(var n=this.L(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var $e=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Je(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Je?(this.a=void 0!==e?e:t.a,tn(this,t.f),this.j=t.j,en(this,t.c),nn(this,t.h),this.g=t.g,e=t.b,(n=new yn).c=e.c,e.a&&(n.a=new Ye(e.a),n.b=e.b),rn(this,n),this.i=t.i):t&&(n=String(t).match($e))?(this.a=!!e,tn(this,n[1]||"",!0),this.j=an(n[2]||""),en(this,n[3]||"",!0),nn(this,n[4]),this.g=an(n[5]||"",!0),rn(this,n[6]||"",!0),this.i=an(n[7]||"")):(this.a=!!e,this.b=new yn(null,this.a))}function Ze(t){return new Je(t)}function tn(t,e,n){t.f=n?an(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function en(t,e,n){t.c=n?an(e,!0):e}function nn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function rn(t,e,n){var i,r;e instanceof yn?(t.b=e,i=t.b,(r=t.a)&&!i.f&&(vn(i),i.c=null,i.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(gn(this,e),wn(this,n,t))},i)),i.f=r):(n||(e=un(e,pn)),t.b=new yn(e,t.a))}function on(t,e,n){t.b.set(e,n)}function sn(t){return on(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),t}function an(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Je.prototype.toString=function(){var t=[],e=this.f;e&&t.push(un(e,cn,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(un(e,cn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(un(n,"/"==n.charAt(0)?fn:ln,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",un(n,dn)),t.join("")};var cn=/[#\/\?@]/g,ln=/[#\?:]/g,fn=/[#\?]/g,pn=/[#\?@]/g,dn=/#/g;function yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vn(n){n.a||(n.a=new Ye,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i,r=t[n].indexOf("="),o=null;0<=r?(i=t[n].substring(0,r),o=t[n].substring(r+1)):i=t[n],e(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function gn(t,e){vn(t),e=bn(t,e),Qe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Qe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Xe(t)))}function mn(t,e){return vn(t),e=bn(t,e),Qe(t.a.b,e)}function wn(t,e,n){gn(t,e),0<n.length&&(t.c=null,t.a.set(bn(t,e),H(n)),t.b+=n.length)}function bn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function En(t,e){this.b=t,this.a=e}function In(t){this.g=t||Tn,t=O.PerformanceNavigationTiming?0<(t=O.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(O.ia&&O.ia.ya&&O.ia.ya()&&O.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(N=yn.prototype).add=function(t,e){vn(this),this.c=null,t=bn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},N.forEach=function(n,i){vn(this),this.a.forEach(function(t,e){B(t,function(t){n.call(i,t,e,this)},this)},this)},N.L=function(){vn(this);for(var t=this.a.K(),e=this.a.L(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},N.K=function(t){vn(this);var e=[];if("string"==typeof t)mn(this,t)&&(e=z(e,this.a.get(bn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},N.set=function(t,e){return vn(this),this.c=null,mn(this,t=bn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},N.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},N.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var i=e[n],r=encodeURIComponent(String(i)),i=this.K(i),o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}return this.c=t.join("&")};var Tn=10;function An(t){return t.b||t.a&&t.a.size>=t.f}function Nn(t){return t.b?1:t.a?t.a.size:0}function _n(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Rn(t,e){t.a?t.a.add(e):t.b=e}function On(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Sn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return H(t.c);var i=t.c;try{for(var r=A(t.a.values()),o=r.next();!o.done;o=r.next())var s=o.value,i=i.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function Dn(){}function kn(){this.a=new Dn}function Pn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}In.prototype.cancel=function(){var e,t;if(this.c=Sn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=A(this.a.values()),i=n.next();!i.done;i=n.next()){i.value.cancel()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Dn.prototype.stringify=function(t){return O.JSON.stringify(t,void 0)},Dn.prototype.parse=function(t){return O.JSON.parse(t,void 0)};var Ln=O.JSON.parse;function Vn(t){Bt.call(this),this.headers=new Ye,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}F(Vn,Bt);var Cn="",Un=/^https?$/i,Mn=["POST","PUT"];function xn(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Fn(t),Gn(t)}function Fn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function jn(t){if(t.b&&void 0!==R&&(!t.s[1]||4!=zn(t)||2!=t.X()))if(t.l&&4==zn(t))ie(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==zn(t)){t.b=!1;try{var e,n,i,r,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(r=String(t.B).match($e)[1]||null)&&O.self&&O.self.location&&(r=(i=O.self.location.protocol).substr(0,i.length-1)),n=!Un.test(r?r.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<zn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Fn(t)}}finally{Gn(t)}}}function Gn(t,e){if(t.a){Bn(t);var n=t.a,i=t.s[0]?S:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(t){}}}function Bn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(O.clearTimeout(t.m),t.m=null)}function zn(t){return t.a?t.a.readyState:0}function Hn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}var r;i||(r="",Z(n,function(t,e){r+=e,r+=":",r+=t,r+="\r\n"}),n=r,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):on(t,e,n))}function Kn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wn(t){this.pa=0,this.g=[],this.c=new de,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Kn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Kn("baseRetryDelayMs",5e3,t),this.Ma=Kn("retryDelaySeedMs",1e4,t),this.Ja=Kn("forwardChannelMaxRetries",2,t),this.ma=Kn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new In(t&&t.concurrentRequestLimit),this.ka=new kn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Yn(t){var e,n;Qn(t),3==t.v&&(e=t.R++,on(n=Ze(t.B),"SID",t.J),on(n,"RID",e),on(n,"TYPE","terminate"),ti(t,n),(e=new Ve(t,t.c,e,void 0)).H=2,e.i=sn(Ze(n)),n=!1,O.navigator&&O.navigator.sendBeacon&&(n=O.navigator.sendBeacon(e.i.toString(),"")),!n&&O.Image&&((new Image).src=e.i,n=!0),n||(e.a=fi(e.g,null),e.a.ba(e.i)),e.u=q(),je(e)),ci(t)}function Xn(t){t.a&&(ri(t),t.a.cancel(),t.a=null)}function Qn(t){Xn(t),t.j&&(O.clearTimeout(t.j),t.j=null),si(t),t.b.cancel(),t.h&&("number"==typeof t.h&&O.clearTimeout(t.h),t.h=null)}function $n(t,e){t.g.push(new En(t.La++,e)),3==t.v&&Jn(t)}function Jn(t){An(t.b)||t.h||(t.h=!0,$t(t.Ba,t),t.u=0)}function Zn(t,e){var n=e?e.f:t.R++,i=Ze(t.B);on(i,"SID",t.J),on(i,"RID",n),on(i,"AID",t.P),ti(t,i),t.i&&t.l&&Hn(i,t.i,t.l),n=new Ve(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ei(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Rn(t.b,n),xe(n,i,e)}function ti(t,n){t.f&&We({},function(t,e){on(n,e,t)})}function ei(t,e,n){n=Math.min(t.g.length,n);var i=t.f?M(t.f.Ha,t.f,t):null;t:for(var r=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=r[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var h=r[u].b,c=r[u].a;if((h-=o)<0)o=Math.max(0,r[u].b-100),a=!1;else try{!function(t,i,e){var r=e||"";try{We(t,function(t,e){var n=t;P(t)&&(n=Ht(t)),i.push(r+e+"="+encodeURIComponent(n))})}catch(t){throw i.push(r+"type="+encodeURIComponent("_badmap")),t}}(c,s,"req"+h+"_")}catch(t){i&&i(c)}}if(a){i=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,i}function ni(t){t.a||t.j||(t.U=1,$t(t.Aa,t),t.o=0)}function ii(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=Te(M(t.Aa,t),ui(t,t.o)),t.o++,1)}function ri(t){null!=t.s&&(O.clearTimeout(t.s),t.s=null)}function oi(t){t.a=new Ve(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ze(t.la);on(e,"RID","rpc"),on(e,"SID",t.J),on(e,"CI",t.H?"0":"1"),on(e,"AID",t.P),ti(t,e),on(e,"TYPE","xmlhttp"),t.i&&t.l&&Hn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=sn(Ze(e)),n.j=null,n.I=!0,qe(n,t)}function si(t){null!=t.m&&(O.clearTimeout(t.m),t.m=null)}function ai(t,e){var n,i=null;if(t.a==e){si(t),ri(t),t.a=null;var r=2}else{if(!_n(t.b,e))return;i=e.s,On(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b){1==r?(i=e.j?e.j.length:0,e=q()-e.u,n=t.u,(r=ge()).dispatchEvent(new Ie(r)),Jn(t)):ni(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==r&&function(t,e){if(!(Nn(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=Te(M(t.Ba,t,e),ui(t,t.u)),t.u++,1}}(t,e)||2==r&&ii(t)))switch(i&&0<i.length&&(e=t.b,e.c=e.c.concat(i)),n){case 1:hi(t,5);break;case 4:hi(t,10);break;case 3:hi(t,6);break;default:hi(t,2)}}function ui(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function hi(t,e){var n,i,r,o,s,a;t.c.info("Error code "+e),2==e?(n=null,t.f&&(n=null),i=M(t.Xa,t),n||(n=new Je("//www.google.com/images/cleardot.gif"),O.location&&"http"==O.location.protocol||tn(n,"https"),sn(n)),r=n.toString(),o=i,a=new de,O.Image?((s=new Image).onload=x(Pn,a,s,"TestLoadImage: loaded",!0,o),s.onerror=x(Pn,a,s,"TestLoadImage: error",!1,o),s.onabort=x(Pn,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=x(Pn,a,s,"TestLoadImage: timeout",!1,o),O.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r):o(!1)):Ee(2),t.v=0,t.f&&t.f.ra(e),ci(t),Qn(t)}function ci(t){t.v=0,t.I=-1,t.f&&(0==Sn(t.b).length&&0==t.g.length||(t.b.c.length=0,H(t.g),t.g.length=0),t.f.qa())}function li(t,e,n){var i,r,o,s,a,u,h,c=(i=n)instanceof Je?Ze(i):new Je(i,void 0);return""!=c.c?(e&&en(c,e+"."+c.c),nn(c,c.h)):(r=O.location,o=r.protocol,s=e?e+"."+r.hostname:r.hostname,a=+r.port,u=n,h=new Je(null,void 0),o&&tn(h,o),s&&en(h,s),a&&nn(h,a),u&&(h.g=u),c=h),t.W&&Z(t.W,function(t,e){on(c,e,t)}),e=t.A,n=t.na,e&&n&&on(c,e,n),on(c,"VER",t.ha),ti(t,c),c}function fi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vn(t.Ka)).F=t.C,e}function pi(){}function di(){if(at&&!(10<=Number(mt)))throw Error("Environmental error: no available transport.")}function yi(t,e){Bt.call(this),this.a=new Wn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!K(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!K(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new mi(this)}function vi(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function gi(){Pe.call(this),this.status=1}function mi(t){this.a=t}(N=Vn.prototype).ba=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Re(this.H):Re(Se),this.a.onreadystatechange=M(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void qn(this,t)}t=n||"";var r,o=new Ye(this.headers);i&&We(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=xn,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=O.FormData&&t instanceof O.FormData,0<=G(Mn,e)&&!i&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Bn(this),0<this.o&&((this.D=(r=this.a,at&&gt(9)&&"number"==typeof r.timeout&&void 0!==r.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=M(this.xa,this)):this.m=ie(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){qn(this,t)}},N.xa=function(){void 0!==R&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},N.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Gn(this))},N.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gn(this,!0)),Vn.S.G.call(this)},N.za=function(){this.j||(this.A||this.l||this.g?jn(this):this.Ta())},N.Ta=function(){jn(this)},N.X=function(){try{return 2<zn(this)?this.a.status:-1}catch(t){return-1}},N.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},N.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ln(e)}},N.ua=function(){return this.h},N.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(N=Wn.prototype).ha=8,N.v=1,N.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ve(this,this.c,t,void 0),i=this.l;if(this.O&&(i?nt(i=tt(i),this.O):i=this.O),null===this.i&&(n.B=i),this.da)t:{for(var r=e=0;r<this.g.length;r++){var o=this.g[r];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=r;break t}if(4096===e||r===this.g.length-1){e=r+1;break t}}e=1e3}else e=1e3;e=ei(this,n,e),on(r=Ze(this.B),"RID",t),on(r,"CVER",22),this.A&&on(r,"X-HTTP-Session-Id",this.A),ti(this,r),this.i&&i&&Hn(r,this.i,i),Rn(this.b,n),this.Ga&&on(r,"TYPE","init"),this.da?(on(r,"$req",e),on(r,"SID","null"),n.V=!0,xe(n,r,null)):xe(n,r,e),this.v=2}}else 3==this.v&&(t?Zn(this,t):0==this.g.length||An(this.b)||Zn(this))},N.Aa=function(){var t;this.j=null,oi(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Te(M(this.Sa,this),t))},N.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xn(this),oi(this))},N.Ra=function(){null!=this.m&&(this.m=null,Xn(this),ii(this),Ee(19))},N.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Ee(2)):(this.c.info("Failed to ping google.com"),Ee(1))},(N=pi.prototype).ta=function(){},N.sa=function(){},N.ra=function(){},N.qa=function(){},N.Ha=function(){},di.prototype.a=function(t,e){return new yi(t,e)},F(yi,Bt),(N=yi.prototype).addEventListener=function(t,e,n,i){yi.S.addEventListener.call(this,t,e,n,i)},N.removeEventListener=function(t,e,n,i){yi.S.removeEventListener.call(this,t,e,n,i)},N.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Ee(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=li(t,null,t.fa),Jn(t)},N.close=function(){Yn(this.a)},N.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,$n(this.a,e)):this.g?((e={}).__data__=Ht(t),$n(this.a,e)):$n(this.a,t)},N.G=function(){this.a.f=null,delete this.f,Yn(this.a),delete this.a,yi.S.G.call(this)},F(vi,ke),F(gi,Pe),F(mi,pi),mi.prototype.ta=function(){this.a.dispatchEvent("a")},mi.prototype.sa=function(t){this.a.dispatchEvent(new vi(t))},mi.prototype.ra=function(t){this.a.dispatchEvent(new gi)},mi.prototype.qa=function(){this.a.dispatchEvent("b")},di.prototype.createWebChannel=di.prototype.a,yi.prototype.send=yi.prototype.Pa,yi.prototype.open=yi.prototype.Oa,Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,Ne.COMPLETE="complete",(Oe.EventType=De).OPEN="a",De.CLOSE="b",De.ERROR="c",De.MESSAGE="d",Bt.prototype.listen=Bt.prototype.va,Vn.prototype.listenOnce=Vn.prototype.wa,Vn.prototype.getLastError=Vn.prototype.Qa,Vn.prototype.getLastErrorCode=Vn.prototype.ua,Vn.prototype.getStatus=Vn.prototype.X,Vn.prototype.getResponseJson=Vn.prototype.Na,Vn.prototype.getResponseText=Vn.prototype.$,Vn.prototype.send=Vn.prototype.ba;var wi={createWebChannelTransport:function(){return new di},ErrorCode:Ae,EventType:Ne,WebChannel:Oe,XhrIo:Vn},bi=wi.createWebChannelTransport,Ei=wi.ErrorCode,Ii=wi.EventType,Ti=wi.WebChannel,Ai=wi.XhrIo,Ni=(_i.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},_i.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},_i.prototype.setServiceProps=function(t){return this.serviceProps=t,this},_i);function _i(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Ri=new l("@firebase/firestore");function Oi(){return Ri.logLevel}function Si(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];Ri.logLevel<=a.DEBUG&&(e=n.map(Pi),Ri.debug.apply(Ri,r(["Firestore (7.17.2): "+t],e)))}function Di(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];Ri.logLevel<=a.ERROR&&(e=n.map(Pi),Ri.error.apply(Ri,r(["Firestore (7.17.2): "+t],e)))}function ki(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];Ri.logLevel<=a.WARN&&(e=n.map(Pi),Ri.warn.apply(Ri,r(["Firestore (7.17.2): "+t],e)))}function Pi(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Li(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.17.2) INTERNAL ASSERTION FAILED: "+t;throw Di(e),new Error(e)}function Vi(t){t||Li()}var Ci=(Ui.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var i=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length));return n},Ui);function Ui(){}function Mi(t,e){return t<e?-1:e<t?1:0}function xi(t,n,i){return t.length===n.length&&t.every(function(t,e){return i(t,n[e])})}function qi(t,e,n,i,r){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=i,this.forceLongPolling=r}var Fi=(Object.defineProperty(ji.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),ji.prototype.isEqual=function(t){return t instanceof ji&&t.projectId===this.projectId&&t.database===this.database},ji.prototype.o=function(t){return Mi(this.projectId,t.projectId)||Mi(this.database,t.database)},ji);function ji(t,e){this.projectId=t,this.database=e||"(default)"}function Gi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Hi,Ki,Wi,Yi=(lr.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[0],a=o[1];if(this.u(s,t))return a}},lr.prototype.has=function(t){return void 0!==this.get(t)},lr.prototype.set=function(t,e){var n=this.h(t),i=this.l[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(this.u(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e])}else this.l[n]=[[t,e]]},lr.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.u(n[i][0],t))return 1===n.length?delete this.l[e]:n.splice(i,1),!0;return!1},lr.prototype.forEach=function(a){Bi(this.l,function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n],o=r[0],s=r[1];a(o,s)}})},lr.prototype._=function(){return zi(this.l)},lr),Xi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qi=(n(cr,Wi=Error),cr),$i=(hr.now=function(){return hr.fromMillis(Date.now())},hr.fromDate=function(t){return hr.fromMillis(t.getTime())},hr.fromMillis=function(t){var e=Math.floor(t/1e3);return new hr(e,1e6*(t-1e3*e))},hr.prototype.toDate=function(){return new Date(this.toMillis())},hr.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},hr.prototype.T=function(t){return this.seconds===t.seconds?Mi(this.nanoseconds,t.nanoseconds):Mi(this.seconds,t.seconds)},hr.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},hr.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},hr.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},hr),Ji=(ur.m=function(t){return new ur(t)},ur.min=function(){return new ur(new $i(0,0))},ur.prototype.o=function(t){return this.timestamp.T(t.timestamp)},ur.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},ur.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},ur.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},ur.prototype.R=function(){return this.timestamp},ur),Zi=(Object.defineProperty(ar.prototype,"length",{get:function(){return this.A},enumerable:!1,configurable:!0}),ar.prototype.isEqual=function(t){return 0===ar.P(this,t)},ar.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof ar?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},ar.prototype.limit=function(){return this.offset+this.length},ar.prototype.p=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},ar.prototype.g=function(){return this.V(this.segments,this.offset,this.length-1)},ar.prototype.v=function(){return this.segments[this.offset]},ar.prototype.S=function(){return this.get(this.length-1)},ar.prototype.get=function(t){return this.segments[this.offset+t]},ar.prototype._=function(){return 0===this.length},ar.prototype.C=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ar.prototype.D=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ar.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},ar.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},ar.P=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(o<r)return 1}return t.length<e.length?-1:t.length>e.length?1:0},ar),tr=(n(sr,Ki=Zi),sr.prototype.V=function(t,e,n){return new sr(t,e,n)},sr.prototype.N=function(){return this.F().join("/")},sr.prototype.toString=function(){return this.N()},sr.$=function(t){if(0<=t.indexOf("//"))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new sr(t.split("/").filter(function(t){return 0<t.length}))},sr.k=function(){return new sr([])},sr),er=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nr=(n(or,Hi=Zi),or.prototype.V=function(t,e,n){return new or(t,e,n)},or.L=function(t){return er.test(t)},or.prototype.N=function(){return this.F().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),or.L(t)||(t="`"+t+"`"),t}).join(".")},or.prototype.toString=function(){return this.N()},or.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},or.q=function(){return new or(["__name__"])},or.M=function(t){for(var e=[],n="",i=0,r=function(){if(0===n.length)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Qi(Xi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Qi(Xi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,i+=2}else"`"===s?o=!o:"."!==s||o?n+=s:r(),i++}if(r(),o)throw new Qi(Xi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new or(e)},or.k=function(){return new or([])},or),ir=(rr.U=function(t){return new rr(tr.$(t).p(5))},rr.prototype.B=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},rr.prototype.isEqual=function(t){return null!==t&&0===tr.P(this.path,t.path)},rr.prototype.toString=function(){return this.path.toString()},rr.P=function(t,e){return tr.P(t.path,e.path)},rr.W=function(t){return t.length%2==0},rr.j=function(t){return new rr(new tr(t.slice()))},rr);function rr(t){this.path=t}function or(){return null!==Hi&&Hi.apply(this,arguments)||this}function sr(){return null!==Ki&&Ki.apply(this,arguments)||this}function ar(t,e,n){void 0===e?e=0:e>t.length&&Li(),void 0===n?n=t.length-e:n>t.length-e&&Li(),this.segments=t,this.offset=e,this.A=n}function ur(t){this.timestamp=t}function hr(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Qi(Xi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Qi(Xi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Qi(Xi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Qi(Xi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function cr(t,e){var n=this;return(n=Wi.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function lr(t,e){this.h=t,this.u=e,this.l={}}function fr(t){return null==t}function pr(t){return-0===t&&1/t==-1/0}var dr=function(t,e,n,i,r,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.G=null};function yr(t,e,n,i,r,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),new dr(t,e,n,i,r,o,s)}function vr(t){var e,n=t;return null===n.G&&(e=n.path.N(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return(e=t).field.N()+e.op.toString()+wo(e.value);var e}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return(e=t).field.N()+e.dir;var e}).join(","),fr(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=Ca(n.startAt)),n.endAt&&(e+="|ub:",e+=Ca(n.endAt)),n.G=e),n.G}function gr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,i,r=0;r<t.orderBy.length;r++)if(n=t.orderBy[r],i=e.orderBy[r],n.dir!==i.dir||!n.field.isEqual(i.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!yo(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ma(t.startAt,e.startAt)&&Ma(t.endAt,e.endAt)}function mr(t){return ir.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wr=(br.fromBase64String=function(t){return new br(atob(t))},br.fromUint8Array=function(t){return new br(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},br.prototype.toBase64=function(){return t=this.K,btoa(t);var t},br.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},br.prototype.H=function(){return 2*this.K.length},br.prototype.o=function(t){return Mi(this.K,t.K)},br.prototype.isEqual=function(t){return this.K===t.K},br);function br(t){this.K=t}wr.Y=new wr("");function Er(t){this.count=t}var Ir,Tr,Ar=(Nr.prototype.Z=function(t){return new Nr(this.target,this.targetId,this.X,t,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Nr.prototype.tt=function(t,e){return new Nr(this.target,this.targetId,this.X,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Nr.prototype.et=function(t){return new Nr(this.target,this.targetId,this.X,this.sequenceNumber,this.J,t,this.resumeToken)},Nr);function Nr(t,e,n,i,r,o,s){void 0===r&&(r=Ji.min()),void 0===o&&(o=Ji.min()),void 0===s&&(s=wr.Y),this.target=t,this.targetId=e,this.X=n,this.sequenceNumber=i,this.J=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function _r(t){switch(t){case Xi.OK:return Li(),0;case Xi.CANCELLED:case Xi.UNKNOWN:case Xi.DEADLINE_EXCEEDED:case Xi.RESOURCE_EXHAUSTED:case Xi.INTERNAL:case Xi.UNAVAILABLE:case Xi.UNAUTHENTICATED:return;case Xi.INVALID_ARGUMENT:case Xi.NOT_FOUND:case Xi.ALREADY_EXISTS:case Xi.PERMISSION_DENIED:case Xi.FAILED_PRECONDITION:case Xi.ABORTED:case Xi.OUT_OF_RANGE:case Xi.UNIMPLEMENTED:case Xi.DATA_LOSS:return 1;default:return Li(),0}}function Rr(t){if(void 0===t)return Di("GRPC error has no .code"),Xi.UNKNOWN;switch(t){case Ir.OK:return Xi.OK;case Ir.CANCELLED:return Xi.CANCELLED;case Ir.UNKNOWN:return Xi.UNKNOWN;case Ir.DEADLINE_EXCEEDED:return Xi.DEADLINE_EXCEEDED;case Ir.RESOURCE_EXHAUSTED:return Xi.RESOURCE_EXHAUSTED;case Ir.INTERNAL:return Xi.INTERNAL;case Ir.UNAVAILABLE:return Xi.UNAVAILABLE;case Ir.UNAUTHENTICATED:return Xi.UNAUTHENTICATED;case Ir.INVALID_ARGUMENT:return Xi.INVALID_ARGUMENT;case Ir.NOT_FOUND:return Xi.NOT_FOUND;case Ir.ALREADY_EXISTS:return Xi.ALREADY_EXISTS;case Ir.PERMISSION_DENIED:return Xi.PERMISSION_DENIED;case Ir.FAILED_PRECONDITION:return Xi.FAILED_PRECONDITION;case Ir.ABORTED:return Xi.ABORTED;case Ir.OUT_OF_RANGE:return Xi.OUT_OF_RANGE;case Ir.UNIMPLEMENTED:return Xi.UNIMPLEMENTED;case Ir.DATA_LOSS:return Xi.DATA_LOSS;default:return Li()}}(Tr=Ir=Ir||{})[Tr.OK=0]="OK",Tr[Tr.CANCELLED=1]="CANCELLED",Tr[Tr.UNKNOWN=2]="UNKNOWN",Tr[Tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tr[Tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tr[Tr.NOT_FOUND=5]="NOT_FOUND",Tr[Tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tr[Tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tr[Tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tr[Tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tr[Tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tr[Tr.ABORTED=10]="ABORTED",Tr[Tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tr[Tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tr[Tr.INTERNAL=13]="INTERNAL",Tr[Tr.UNAVAILABLE=14]="UNAVAILABLE",Tr[Tr.DATA_LOSS=15]="DATA_LOSS";var Or=(Lr.prototype.nt=function(t,e){return new Lr(this.P,this.root.nt(t,e,this.P).copy(null,null,Dr.st,null,null))},Lr.prototype.remove=function(t){return new Lr(this.P,this.root.remove(t,this.P).copy(null,null,Dr.st,null,null))},Lr.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Lr.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var i=this.P(t,n.key);if(0===i)return e+n.left.size;n=i<0?n.left:(e+=n.left.size+1,n.right)}return-1},Lr.prototype._=function(){return this.root._()},Object.defineProperty(Lr.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Lr.prototype.it=function(){return this.root.it()},Lr.prototype.rt=function(){return this.root.rt()},Lr.prototype.ot=function(t){return this.root.ot(t)},Lr.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},Lr.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Lr.prototype.ht=function(t){return this.root.ht(t)},Lr.prototype.at=function(){return new Sr(this.root,null,this.P,!1)},Lr.prototype.ut=function(t){return new Sr(this.root,t,this.P,!1)},Lr.prototype.ct=function(){return new Sr(this.root,null,this.P,!0)},Lr.prototype.lt=function(t){return new Sr(this.root,t,this.P,!0)},Lr),Sr=(Pr.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},Pr.prototype.wt=function(){return 0<this.ft.length},Pr.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},Pr),Dr=(kr.prototype.copy=function(t,e,n,i,r){return new kr(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)},kr.prototype._=function(){return!1},kr.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},kr.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},kr.prototype.min=function(){return this.left._()?this:this.left.min()},kr.prototype.it=function(){return this.min().key},kr.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},kr.prototype.nt=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.nt(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.nt(t,e,n))).Et()},kr.prototype.It=function(){if(this.left._())return kr.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.At()),(t=t.copy(null,null,null,t.left.It(),null)).Et()},kr.prototype.remove=function(t,e){var n,i=this;if(e(t,i.key)<0)i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.At()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.Rt()&&(i=i.Pt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===e(t,i.key)){if(i.right._())return kr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.Et()},kr.prototype.Rt=function(){return this.color},kr.prototype.Et=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.pt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.Pt()),t.left.Rt()&&t.right.Rt()&&(t=t.yt()),t},kr.prototype.At=function(){var t=this.yt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).pt()).yt()),t},kr.prototype.Vt=function(){var t=this.yt();return t.left.left.Rt()&&(t=(t=t.Pt()).yt()),t},kr.prototype.pt=function(){var t=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},kr.prototype.Pt=function(){var t=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},kr.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},kr.prototype.gt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},kr.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw Li();if(this.right.Rt())throw Li();var t=this.left.vt();if(t!==this.right.vt())throw Li();return t+(this.Rt()?0:1)},kr);function kr(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:kr.RED,this.left=null!=i?i:kr.EMPTY,this.right=null!=r?r:kr.EMPTY,this.size=this.left.size+1+this.right.size}function Pr(t,e,n,i){this._t=i,this.ft=[];for(var r=1;!t._();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this._t?t.left:t.right;else{if(0===r){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function Lr(t,e){this.P=t,this.root=e||Dr.EMPTY}function Vr(){this.size=0}Dr.EMPTY=null,Dr.RED=!0,Dr.st=!1,Dr.EMPTY=(Object.defineProperty(Vr.prototype,"key",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(Vr.prototype,"value",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(Vr.prototype,"color",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(Vr.prototype,"left",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Object.defineProperty(Vr.prototype,"right",{get:function(){throw Li()},enumerable:!1,configurable:!0}),Vr.prototype.copy=function(t,e,n,i,r){return this},Vr.prototype.nt=function(t,e,n){return new Dr(t,e)},Vr.prototype.remove=function(t,e){return this},Vr.prototype._=function(){return!0},Vr.prototype.ot=function(t){return!1},Vr.prototype.ht=function(t){return!1},Vr.prototype.it=function(){return null},Vr.prototype.rt=function(){return null},Vr.prototype.Rt=function(){return!1},Vr.prototype.gt=function(){return!0},Vr.prototype.vt=function(){return 0},new Vr);var Cr=(qr.prototype.has=function(t){return null!==this.data.get(t)},qr.prototype.first=function(){return this.data.it()},qr.prototype.last=function(){return this.data.rt()},Object.defineProperty(qr.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),qr.prototype.indexOf=function(t){return this.data.indexOf(t)},qr.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},qr.prototype.bt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var i=n.dt();if(0<=this.P(i.key,t[1]))return;e(i.key)}},qr.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},qr.prototype.Ct=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},qr.prototype.at=function(){return new Ur(this.data.at())},qr.prototype.ut=function(t){return new Ur(this.data.ut(t))},qr.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},qr.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},qr.prototype._=function(){return this.data._()},qr.prototype.Dt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},qr.prototype.isEqual=function(t){if(!(t instanceof qr))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var i=e.dt().key,r=n.dt().key;if(0!==this.P(i,r))return!1}return!0},qr.prototype.F=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},qr.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},qr.prototype.copy=function(t){var e=new qr(this.P);return e.data=t,e},qr),Ur=(xr.prototype.dt=function(){return this.Ft.dt().key},xr.prototype.wt=function(){return this.Ft.wt()},xr),Mr=new Or(ir.P);function xr(t){this.Ft=t}function qr(t){this.P=t,this.data=new Or(this.P)}var Fr=new Or(ir.P);var jr=new Or(ir.P),Gr=new Cr(ir.P);function Br(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Gr,i=0,r=t;i<r.length;i++)var o=r[i],n=n.add(o);return n}var zr=new Cr(Mi);function Hr(t,e,n,i){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=i}function Kr(t,e){this.targetId=t,this.ee=e}function Wr(t,e,n,i){void 0===n&&(n=wr.Y),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}var Yr=(ao.kt=function(t){return new ao(t.P)},ao.prototype.has=function(t){return null!=this.Nt.get(t)},ao.prototype.get=function(t){return this.Nt.get(t)},ao.prototype.first=function(){return this.$t.it()},ao.prototype.last=function(){return this.$t.rt()},ao.prototype._=function(){return this.$t._()},ao.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(ao.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),ao.prototype.forEach=function(n){this.$t.ot(function(t,e){return n(t),!1})},ao.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},ao.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},ao.prototype.isEqual=function(t){if(!(t instanceof ao))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.at(),n=t.$t.at();e.wt();){var i=e.dt().key,r=n.dt().key;if(!i.isEqual(r))return!1}return!0},ao.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},ao.prototype.copy=function(t,e){var n=new ao;return n.P=this.P,n.Nt=t,n.$t=e,n},ao),Xr=(so.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Li()},so.prototype.Lt=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},so),Qr=(oo.Bt=function(t,e,n,i){var r=[];return e.forEach(function(t){r.push({type:0,doc:t})}),new oo(t,e,Yr.kt(e),r,n,i,!0,!1)},Object.defineProperty(oo.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),oo.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Mt===t.Mt&&this.qt.isEqual(t.qt)&&la(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},oo),$r=(ro.zt=function(t,e){var n=new Map;return n.set(t,Jr.Kt(t,e)),new ro(Ji.min(),n,zr,Mr,Br())},ro),Jr=(io.Kt=function(t,e){return new io(wr.Y,e,Br(),Br(),Br())},io),Zr=(Object.defineProperty(no.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(no.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(no.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(no.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),no.prototype.ue=function(t){0<t.H()&&(this.oe=!0,this.ie=t)},no.prototype.ce=function(){var n=Br(),i=Br(),r=Br();return this.se.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:i=i.add(t);break;case 1:r=r.add(t);break;default:Li()}}),new Jr(this.ie,this.re,n,i,r)},no.prototype.le=function(){this.oe=!1,this.se=ho()},no.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},no.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},no.prototype.de=function(){this.ne+=1},no.prototype.we=function(){--this.ne},no.prototype.Te=function(){this.oe=!0,this.re=!0},no),to=(eo.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var i=n[e];t.te instanceof Xs?this.Ve(i,t.te):t.te instanceof Qs&&this.pe(i,t.key,t.te)}for(var r=0,o=t.removedTargetIds;r<o.length;r++){var s=o[r];this.pe(s,t.key,t.te)}},eo.prototype.ye=function(n){var i=this;this.ge(n,function(t){var e=i.ve(t);switch(n.state){case 0:i.be(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||i.removeTarget(t);break;case 3:i.be(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:i.be(t)&&(i.Se(t),e.ue(n.resumeToken));break;default:Li()}})},eo.prototype.ge=function(t,n){var i=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ee.forEach(function(t,e){i.be(e)&&n(e)})},eo.prototype.Ce=function(t){var e,n,i=t.targetId,r=t.ee.count,o=this.De(i);o&&(mr(e=o.target)?0===r?(n=new ir(e.path),this.pe(i,n,new Qs(n,Ji.min()))):Vi(1===r):this.Fe(i)!==r&&(this.Se(i),this.Ae=this.Ae.add(i)))},eo.prototype.Ne=function(r){var o=this,s=new Map;this.Ee.forEach(function(t,e){var n,i=o.De(e);i&&(t.Ht&&mr(i.target)&&(n=new ir(i.target.path),null!==o.Ie.get(n)||o.$e(e,n)||o.pe(e,n,new Qs(n,r))),t.ae&&(s.set(e,t.ce()),t.le()))});var i=Br();this.Re.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.De(t);return!e||2===e.X||(n=!1)}),n&&(i=i.add(t))});var t=new $r(r,s,this.Ae,this.Ie,i);return this.Ie=Mr,this.Re=uo(),this.Ae=new Cr(Mi),t},eo.prototype.Ve=function(t,e){var n;this.be(t)&&(n=this.$e(t,e.key)?2:0,this.ve(t)._e(e.key,n),this.Ie=this.Ie.nt(e.key,e),this.Re=this.Re.nt(e.key,this.ke(e.key).add(t)))},eo.prototype.pe=function(t,e,n){var i;this.be(t)&&(i=this.ve(t),this.$e(t,e)?i._e(e,1):i.fe(e),this.Re=this.Re.nt(e,this.ke(e).delete(t)),n&&(this.Ie=this.Ie.nt(e,n)))},eo.prototype.removeTarget=function(t){this.Ee.delete(t)},eo.prototype.Fe=function(t){var e=this.ve(t).ce();return this.me.xe(t).size+e.Yt.size-e.Jt.size},eo.prototype.de=function(t){this.ve(t).de()},eo.prototype.ve=function(t){var e=this.Ee.get(t);return e||(e=new Zr,this.Ee.set(t,e)),e},eo.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new Cr(Mi),this.Re=this.Re.nt(t,e)),e},eo.prototype.be=function(t){var e=null!==this.De(t);return e||Si("WatchChangeAggregator","Detected inactive target",t),e},eo.prototype.De=function(t){var e=this.Ee.get(t);return e&&e.he?null:this.me.Le(t)},eo.prototype.Se=function(e){var n=this;this.Ee.set(e,new Zr),this.me.xe(e).forEach(function(t){n.pe(e,t,null)})},eo.prototype.$e=function(t,e){return this.me.xe(t).has(e)},eo);function eo(t){this.me=t,this.Ee=new Map,this.Ie=Mr,this.Re=uo(),this.Ae=new Cr(Mi)}function no(){this.ne=0,this.se=ho(),this.ie=wr.Y,this.re=!1,this.oe=!0}function io(t,e,n,i,r){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Xt=i,this.Jt=r}function ro(t,e,n,i,r){this.J=t,this.Wt=e,this.Qt=n,this.jt=i,this.Gt=r}function oo(t,e,n,i,r,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=i,this.qt=r,this.fromCache=o,this.Mt=s,this.Ut=a}function so(){this.xt=new Or(ir.P)}function ao(n){this.P=n?function(t,e){return n(t,e)||ir.P(t.key,e.key)}:function(t,e){return ir.P(t.key,e.key)},this.Nt=Fr,this.$t=new Or(this.P)}function uo(){return new Or(ir.P)}function ho(){return new Or(ir.P)}function co(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lo(t){var e=bo(t.mapValue.fields.__local_write_time__.timestampValue);return new $i(e.seconds,e.nanos)}var fo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?co(t)?4:10:Li()}function yo(i,r){var t,e,n,o=po(i);if(o!==po(r))return!1;switch(o){case 0:return!0;case 1:return i.booleanValue===r.booleanValue;case 4:return lo(i).isEqual(lo(r));case 3:return function(t){if("string"==typeof i.timestampValue&&"string"==typeof t.timestampValue&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;var e=bo(i.timestampValue),n=bo(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(r);case 5:return i.stringValue===r.stringValue;case 6:return n=r,Io(i.bytesValue).isEqual(Io(n.bytesValue));case 7:return i.referenceValue===r.referenceValue;case 8:return e=r,Eo((t=i).geoPointValue.latitude)===Eo(e.geoPointValue.latitude)&&Eo(t.geoPointValue.longitude)===Eo(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Eo(t.integerValue)===Eo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Eo(t.doubleValue),i=Eo(e.doubleValue);return n===i?pr(n)===pr(i):isNaN(n)&&isNaN(i)}return!1}(i,r);case 9:return xi(i.arrayValue.values||[],r.arrayValue.values||[],yo);case 10:return function(){var t=i.mapValue.fields||{},e=r.mapValue.fields||{};if(Gi(t)!==Gi(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!yo(t[n],e[n])))return!1;return!0}();default:return Li()}}function vo(t,e){return void 0!==(t.values||[]).find(function(t){return yo(t,e)})}function go(t,e){var n,i,r,o,s,a,u,h,c,l,f=po(t),p=po(e);if(f!==p)return Mi(f,p);switch(f){case 0:return 0;case 1:return Mi(t.booleanValue,e.booleanValue);case 2:return h=e,c=Eo(t.integerValue||t.doubleValue),l=Eo(h.integerValue||h.doubleValue),c<l?-1:l<c?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1;case 3:return mo(t.timestampValue,e.timestampValue);case 4:return mo(lo(t),lo(e));case 5:return Mi(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=Io(o),u=Io(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var o=Mi(n[r],i[r]);if(0!==o)return o}return Mi(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Mi(Eo(n.latitude),Eo(i.latitude)))?r:Mi(Eo(n.longitude),Eo(i.longitude));case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var o=go(n[r],i[r]);if(o)return o}return Mi(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(var s=0;s<i.length&&s<o.length;++s){var a=Mi(i[s],o[s]);if(0!==a)return a;var u=go(n[i[s]],r[o[s]]);if(0!==u)return u}return Mi(i.length,o.length)}(t.mapValue,e.mapValue);default:throw Li()}}function mo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Mi(t,e);var n=bo(t),i=bo(e),r=Mi(n.seconds,i.seconds);return 0!==r?r:Mi(n.nanos,i.nanos)}function wo(t){return function s(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?"time("+(t=bo(r.timestampValue)).seconds+","+t.nanos+")":"stringValue"in r?r.stringValue:"bytesValue"in r?Io(r.bytesValue).toBase64():"referenceValue"in r?(n=r.referenceValue,ir.U(n).toString()):"geoPointValue"in r?"geo("+(e=r.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in r?function(){for(var t="[",e=!0,n=0,i=r.arrayValue.values||[];n<i.length;n++){e?e=!1:t+=",",t+=s(i[n])}return t+"]"}():"mapValue"in r?function(t){for(var e="{",n=!0,i=0,r=Object.keys(t.fields||{}).sort();i<r.length;i++){var o=r[i];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(r.mapValue):Li();var t,e,n}(t)}function bo(t){if(Vi(!!t),"string"!=typeof t)return{seconds:Eo(t.seconds),nanos:Eo(t.nanos)};var e,n=0,i=fo.exec(t);Vi(!!i),i[1]&&(e=((e=i[1])+"000000000").substr(0,9),n=Number(e));var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:n}}function Eo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Io(t){return"string"==typeof t?wr.fromBase64String(t):wr.fromUint8Array(t)}function To(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function Ao(t){return t&&"integerValue"in t}function No(t){return!!t&&"arrayValue"in t}function _o(t){return t&&"nullValue"in t}function Ro(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oo(t){return t&&"mapValue"in t}var So={asc:"ASCENDING",desc:"DESCENDING"},Do={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ko=function(t,e){this.s=t,this.Oe=e};function Po(t){return{integerValue:""+t}}function Lo(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pr(e)?"-0":e}}function Vo(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!pr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?Po(e):Lo(t,e);var n}function Co(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uo(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function Mo(t){return Vi(!!t),Ji.m((e=bo(t),new $i(e.seconds,e.nanos)));var e}function xo(t,e){return new tr(["projects",t.projectId,"databases",t.database]).child("documents").child(e).N()}function qo(t,e){return xo(t.s,e.path)}function Fo(t,e){var n,i,r=(Vi(Wo(i=tr.$(e))),i);return Vi(r.get(1)===t.s.projectId),Vi(!r.get(3)&&!t.s.database||r.get(3)===t.s.database),new ir((Vi(4<(n=r).length&&"documents"===n.get(4)),n.p(5)))}function jo(t,e){return xo(t.s,e)}function Go(t){return new tr(["projects",t.s.projectId,"databases",t.s.database]).N()}function Bo(t,e,n){return{name:qo(t,e),fields:n.proto.mapValue.fields}}function zo(t,e){var n,i,r,o,s,a;if(e instanceof _s)n={update:Bo(t,e.key,e.value)};else if(e instanceof Ms)n={delete:qo(t,e.key)};else if(e instanceof Rs)n={update:Bo(t,e.key,e.data),updateMask:(i=e.qe,r=[],i.fields.forEach(function(t){return r.push(t.N())}),{fieldPaths:r})};else if(e instanceof Ps)n={transform:{document:qo(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Jo)return{fieldPath:t.field.N(),setToServerValue:"REQUEST_TIME"};if(e instanceof Zo)return{fieldPath:t.field.N(),appendMissingElements:{values:e.elements}};if(e instanceof rs)return{fieldPath:t.field.N(),removeAllFromArray:{values:e.elements}};if(e instanceof us)return{fieldPath:t.field.N(),increment:e.Me};throw Li()})}};else{if(!(e instanceof xs))return Li();n={verify:qo(t,e.key)}}return e.Be.Ue||(n.currentDocument=void 0!==(o=e.Be).updateTime?{updateTime:(s=t,a=o.updateTime,Co(s,a.R()))}:void 0!==o.exists?{exists:o.exists}:Li()),n}function Ho(t){return{before:t.before,values:t.position}}function Ko(t){return{fieldPath:t.N()}}function Wo(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Yo(){this.We=void 0}function Xo(t,e){return t instanceof us?Ao(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Qo,$o,Jo=(n(es,$o=Yo),es),Zo=(n(ts,Qo=Yo),ts);function ts(t){var e=this;return(e=Qo.call(this)||this).elements=t,e}function es(){return null!==$o&&$o.apply(this,arguments)||this}function ns(t,e){for(var n=ls(e),i=0,r=t.elements;i<r.length;i++)!function(e){n.some(function(t){return yo(t,e)})||n.push(e)}(r[i]);return{arrayValue:{values:n}}}var is,rs=(n(os,is=Yo),os);function os(t){var e=this;return(e=is.call(this)||this).elements=t,e}function ss(t,e){for(var n=ls(e),i=0,r=t.elements;i<r.length;i++)!function(e){n=n.filter(function(t){return!yo(t,e)})}(r[i]);return{arrayValue:{values:n}}}var as,us=(n(hs,as=Yo),hs);function hs(t,e){var n=this;return(n=as.call(this)||this).serializer=t,n.Me=e,n}function cs(t){return Eo(t.integerValue||t.doubleValue)}function ls(t){return No(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fs(t,e){this.field=t,this.transform=e}var ps=(ds.prototype.Qe=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].C(t))return!0;return!1},ds.prototype.isEqual=function(t){return xi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ds);function ds(t){(this.fields=t).sort(nr.P)}function ys(t,e){this.version=t,this.transformResults=e}var vs=(gs.je=function(){return new gs},gs.exists=function(t){return new gs(void 0,t)},gs.updateTime=function(t){return new gs(t)},Object.defineProperty(gs.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),gs.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},gs);function gs(t,e){this.updateTime=t,this.exists=e}function ms(t,e){return void 0!==t.updateTime?e instanceof Xs&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Xs}function ws(){}function bs(t,e,n){return t instanceof _s?new Xs(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof Rs?function(t,e,n){if(!ms(t.Be,e))return new $s(t.key,n.version);var i=Ds(t,e);return new Xs(t.key,n.version,i,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ps?function(t,e,n){if(Vi(null!=n.transformResults),!ms(t.Be,e))return new $s(t.key,n.version);var i=e,r=function(t,e,n){var i=[];Vi(t.length===n.length);for(var r,o,s,a=0;a<n.length;a++){var u=t[a],h=u.transform,c=null;e instanceof Xs&&(c=e.field(u.field)),i.push((r=h,o=c,s=n[a],r instanceof Zo?ns(r,o):r instanceof rs?ss(r,o):s))}return i}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Vs(t,i.data(),r);return new Xs(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):new Qs(t.key,n.version,{hasCommittedMutations:!0})}function Es(t,e,n,i){return t instanceof _s?function(t,e){if(!ms(t.Be,e))return e;var n=Ts(e);return new Xs(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof Rs?function(t,e){if(!ms(t.Be,e))return e;var n=Ts(e),i=Ds(t,e);return new Xs(t.key,n,i,{Ge:!0})}(t,e):t instanceof Ps?function(t,e,n,i){if(!ms(t.Be,e))return e;var r=e,o=function(t,e,n,i){for(var r,o,s,a,u,h,c,l=[],f=0,p=t;f<p.length;f++){var d=p[f],y=d.transform,v=null;n instanceof Xs&&(v=n.field(d.field)),null===v&&i instanceof Xs&&(v=i.field(d.field)),l.push((o=v,s=e,c=h=u=a=void 0,(r=y)instanceof Jo?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},o&&(c.fields.__previous_value__=o),{mapValue:c}):r instanceof Zo?ns(r,o):r instanceof rs?ss(r,o):(u=Xo(a=r,o),h=cs(u)+cs(a.Me),Ao(u)&&Ao(a.Me)?Po(h):Lo(a.serializer,h))))}return l}(t.fieldTransforms,n,e,i),s=Vs(t,r.data(),o);return new Xs(t.key,r.version,s,{Ge:!0})}(t,e,i,n):(o=e,ms((r=t).Be,o)?new Qs(r.key,Ji.min()):o);var r,o}function Is(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Be.isEqual(e.Be)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.qe.isEqual(e.qe):2!==t.type||xi(t.fieldTransforms,t.fieldTransforms,function(t,e){return i=e,(n=t).field.isEqual(i.field)&&(r=n.transform,o=i.transform,r instanceof Zo&&o instanceof Zo||r instanceof rs&&o instanceof rs?xi(r.elements,o.elements,yo):r instanceof us&&o instanceof us?yo(r.Me,o.Me):r instanceof Jo&&o instanceof Jo);var n,i,r,o}))}function Ts(t){return t instanceof Xs?t.version:Ji.min()}var As,Ns,_s=(n(Ss,Ns=ws),Ss),Rs=(n(Os,As=ws),Os);function Os(t,e,n,i){var r=this;return(r=As.call(this)||this).key=t,r.data=e,r.qe=n,r.Be=i,r.type=1,r}function Ss(t,e,n){var i=this;return(i=Ns.call(this)||this).key=t,i.value=e,i.Be=n,i.type=0,i}function Ds(t,e){return n=t,i=e instanceof Xs?e.data():qs.empty(),r=new Fs(i),n.qe.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.ze();var n,i,r}var ks,Ps=(n(Ls,ks=ws),Ls);function Ls(t,e){var n=this;return(n=ks.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Be=vs.exists(!0),n}function Vs(t,e,n){for(var i=new Fs(e),r=0;r<t.fieldTransforms.length;r++){var o=t.fieldTransforms[r];i.set(o.field,n[r])}return i.ze()}var Cs,Us,Ms=(n(zs,Us=ws),zs),xs=(n(Bs,Cs=ws),Bs),qs=(Gs.empty=function(){return new Gs({mapValue:{}})},Gs.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Oo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},Gs.prototype.isEqual=function(t){return yo(this.proto,t.proto)},Gs),Fs=(js.prototype.set=function(t,e){return this.Ye(t,e),this},js.prototype.delete=function(t){return this.Ye(t,null),this},js.prototype.Ye=function(t,e){for(var n=this.He,i=0;i<t.length-1;++i)var r=t.get(i),o=n.get(r),n=(o instanceof Map||(o=o&&10===po(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(r,o)),o);n.set(t.S(),e)},js.prototype.ze=function(){var t=this.Xe(nr.k(),this.He);return null!=t?new qs(t):this.Ke},js.prototype.Xe=function(i,t){var r=this,o=!1,e=this.Ke.field(i),s=Oo(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=r.Xe(i.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},js);function js(t){void 0===t&&(t=qs.empty()),this.Ke=t,this.He=new Map}function Gs(t){this.proto=t}function Bs(t,e){var n=this;return(n=Cs.call(this)||this).key=t,n.Be=e,n.type=4,n}function zs(t,e){var n=this;return(n=Us.call(this)||this).key=t,n.Be=e,n.type=3,n}function Hs(t,e){this.key=t,this.version=e}var Ks,Ws,Ys,Xs=(n(ta,Ys=Hs),ta.prototype.field=function(t){return this.Je.field(t)},ta.prototype.data=function(){return this.Je},ta.prototype.Ze=function(){return this.Je.proto},ta.prototype.isEqual=function(t){return t instanceof ta&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Je.isEqual(t.Je)},ta.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Je.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(ta.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),ta),Qs=(n(Zs,Ws=Hs),Zs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Zs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Zs.prototype.isEqual=function(t){return t instanceof Zs&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Zs),$s=(n(Js,Ks=Hs),Js.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Js.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Js.prototype.isEqual=function(t){return t instanceof Js&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Js);function Js(){return null!==Ks&&Ks.apply(this,arguments)||this}function Zs(t,e,n){var i=this;return(i=Ws.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),i}function ta(t,e,n,i){var r=this;return(r=Ys.call(this,t,e)||this).Je=n,r.Ge=!!i.Ge,r.hasCommittedMutations=!!i.hasCommittedMutations,r}function ea(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new Qi(Xi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new Qi(Xi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var na=(ia.prototype.rn=function(t){return new ia(t,null,this.tn.slice(),this.filters.slice(),this.limit,this.en,this.startAt,this.endAt)},ia.prototype.on=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.tn.length||1===this.tn.length&&this.tn[0].field.O())},ia.prototype.hn=function(){return!fr(this.limit)&&"F"===this.en},ia.prototype.an=function(){return!fr(this.limit)&&"L"===this.en},ia.prototype.un=function(){return 0<this.tn.length?this.tn[0].field:null},ia.prototype.cn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n.ln())return n.field}return null},ia.prototype._n=function(t){for(var e=0,n=this.filters;e<n.length;e++){var i=n[e];if(0<=t.indexOf(i.op))return i.op}return null},ia);function ia(t,e,n,i,r,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.tn=n,this.filters=i,this.limit=r,this.en=o,this.startAt=s,this.endAt=a,this.nn=null,this.sn=null,this.startAt,this.endAt}function ra(t){return new na(t)}function oa(t){return null!==t.collectionGroup}function sa(t){var e=ea(t,na);if(null===e.nn){e.nn=[];var n=e.cn(),i=e.un();if(null!==n&&null===i)n.O()||e.nn.push(new xa(n)),e.nn.push(new xa(nr.q(),"asc"));else{for(var r,o=!1,s=0,a=e.tn;s<a.length;s++){var u=a[s];e.nn.push(u),u.field.O()&&(o=!0)}o||(r=0<e.tn.length?e.tn[e.tn.length-1].dir:"asc",e.nn.push(new xa(nr.q(),r)))}}return e.nn}function aa(t){var e=ea(t,na);if(!e.sn)if("F"===e.en)e.sn=yr(e.path,e.collectionGroup,sa(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],i=0,r=sa(e);i<r.length;i++){var o=r[i],s="desc"===o.dir?"asc":"desc";n.push(new xa(o.field,s))}var a=e.endAt?new Sa(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Sa(e.startAt.position,!e.startAt.before):null;e.sn=yr(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.sn}function ua(t,e,n){return new na(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ha(t,e){return new na(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,e,t.endAt)}function ca(t,e){return new na(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,t.startAt,e)}function la(t,e){return gr(aa(t),aa(e))&&t.en===e.en}function fa(t){return vr(aa(t))+"|lt:"+t.en}function pa(t){return"Query(target="+(e=aa(t),n=e.path.N(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(e=t).field.N()+" "+e.op+" "+wo(e.value);var e}).join(", ")+"]"),fr(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(e=t).field.N()+" ("+e.dir+")";var e}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ca(e.startAt)),e.endAt&&(n+=", endAt: "+Ca(e.endAt)),"Target("+n+")")+"; limitType="+t.en+")";var e,n}function da(r,t){return i=r,o=t.key.path,(null!==i.collectionGroup?t.key.B(i.collectionGroup)&&i.path.C(o):ir.W(i.path)?i.path.isEqual(o):i.path.D(o))&&function(t){for(var e=0,n=r.tn;e<n.length;e++){var i=n[e];if(!i.field.O()&&null===t.field(i.field))return}return 1}(t)&&function(t){for(var e=0,n=r.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(e=r).startAt||Ua(e.startAt,sa(e),n))&&(!e.endAt||!Ua(e.endAt,sa(e),n)));var e,n,i,o}function ya(a){return function(t,e){for(var n=!1,i=0,r=sa(a);i<r.length;i++){var o=r[i],s=function(t,r,e){var n=t.field.O()?ir.P(r.key,e.key):function(t,e){var n=r.field(t),i=e.field(t);return null!==n&&null!==i?go(n,i):Li()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Li()}}(o,t,e);if(0!==s)return s;n=n||o.field.O()}return 0}}var va,ga=(n(ma,va=function(){}),ma.create=function(t,e,n){if(t.O())return"in"===e?new Na(t,n):new Aa(t,e,n);if(_o(n)){if("=="!==e)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new ma(t,e,n)}if(Ro(n)){if("=="!==e)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new ma(t,e,n)}return"array-contains"===e?new _a(t,n):"in"===e?new Ra(t,n):"array-contains-any"===e?new Oa(t,n):new ma(t,e,n)},ma.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&po(this.value)===po(e)&&this.fn(go(e,this.value))},ma.prototype.fn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return Li()}},ma.prototype.ln=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},ma);function ma(t,e,n){var i=this;return(i=va.call(this)||this).field=t,i.op=e,i.value=n,i}var wa,ba,Ea,Ia,Ta,Aa=(n(Va,Ta=ga),Va.prototype.matches=function(t){var e=ir.P(t.key,this.key);return this.fn(e)},Va),Na=(n(La,Ia=ga),La.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},La),_a=(n(Pa,Ea=ga),Pa.prototype.matches=function(t){var e=t.field(this.field);return No(e)&&vo(e.arrayValue,this.value)},Pa),Ra=(n(ka,ba=ga),ka.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&vo(this.value.arrayValue,e)},ka),Oa=(n(Da,wa=ga),Da.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!No(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return vo(e.value.arrayValue,t)})},Da),Sa=function(t,e){this.position=t,this.before=e};function Da(t,e){return wa.call(this,t,"array-contains-any",e)||this}function ka(t,e){return ba.call(this,t,"in",e)||this}function Pa(t,e){return Ea.call(this,t,"array-contains",e)||this}function La(t,e){var n=this;return(n=Ia.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return ir.U(t.referenceValue)}),n}function Va(t,e,n){var i=this;return(i=Ta.call(this,t,e,n)||this).key=ir.U(n.referenceValue),i}function Ca(t){return(t.before?"b":"a")+":"+t.position.map(wo).join(",")}function Ua(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var o=e[r],s=t.position[r],i=o.field.O()?ir.P(ir.U(s.referenceValue),n.key):go(s,n.field(o.field));if("desc"===o.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function Ma(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yo(t.position[n],e.position[n]))return!1;return!0}var xa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};var qa=(Qa.prototype.wn=function(t,e,n){for(var i=n.Tn,r=0;r<this.mutations.length;r++){var o=this.mutations[r];o.key.isEqual(t)&&(e=bs(o,e,i[r]))}return e},Qa.prototype.mn=function(t,e){for(var n=0,i=this.baseMutations;n<i.length;n++){var r=i[n];r.key.isEqual(t)&&(e=Es(r,e,e,this.dn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Es(u,e,o,this.dn))}return e},Qa.prototype.En=function(n){var i=this,r=n;return this.mutations.forEach(function(t){var e=i.mn(t.key,n.get(t.key));e&&(r=r.nt(t.key,e))}),r},Qa.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Br())},Qa.prototype.isEqual=function(t){return this.batchId===t.batchId&&xi(this.mutations,t.mutations,Is)&&xi(this.baseMutations,t.baseMutations,Is)},Qa),Fa=(Xa.from=function(t,e,n){Vi(t.mutations.length===n.length);for(var i=jr,r=t.mutations,o=0;o<r.length;o++)i=i.nt(r[o].key,n[o].version);return new Xa(t,e,n,i)},Xa),ja=(Ya.prototype.catch=function(t){return this.next(void 0,t)},Ya.prototype.next=function(i,r){var o=this;return this.pn&&Li(),this.pn=!0,this.Vn?this.error?this.yn(r,this.error):this.gn(i,this.result):new Ya(function(e,n){o.An=function(t){o.gn(i,t).next(e,n)},o.Pn=function(t){o.yn(r,t).next(e,n)}})},Ya.prototype.vn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Ya.prototype.bn=function(t){try{var e=t();return e instanceof Ya?e:Ya.resolve(e)}catch(t){return Ya.reject(t)}},Ya.prototype.gn=function(t,e){return t?this.bn(function(){return t(e)}):Ya.resolve(e)},Ya.prototype.yn=function(t,e){return t?this.bn(function(){return t(e)}):Ya.reject(e)},Ya.resolve=function(n){return new Ya(function(t,e){t(n)})},Ya.reject=function(n){return new Ya(function(t,e){e(n)})},Ya.Sn=function(t){return new Ya(function(e,n){var i=0,r=0,o=!1;t.forEach(function(t){++i,t.next(function(){++r,o&&r===i&&e()},function(t){return n(t)})}),o=!0,r===i&&e()})},Ya.Cn=function(t){for(var n=Ya.resolve(!1),e=0,i=t;e<i.length;e++)!function(e){n=n.next(function(t){return t?Ya.resolve(t):e()})}(i[e]);return n},Ya.forEach=function(t,n){var i=this,r=[];return t.forEach(function(t,e){r.push(n.call(i,t,e))}),this.Sn(r)},Ya),Ga=(Wa.prototype.$n=function(e,n){var i=this;return this.Fn.kn(e,n).next(function(t){return i.xn(e,n,t)})},Wa.prototype.xn=function(t,i,r){return this.Dn.Ln(t,i).next(function(t){for(var e=0,n=r;e<n.length;e++)t=n[e].mn(i,t);return t})},Wa.prototype.On=function(t,e,r){var o=Mr;return e.forEach(function(t,e){for(var n=0,i=r;n<i.length;n++)e=i[n].mn(t,e);o=o.nt(t,e)}),o},Wa.prototype.qn=function(e,t){var n=this;return this.Dn.getEntries(e,t).next(function(t){return n.Mn(e,t)})},Wa.prototype.Mn=function(i,r){var o=this;return this.Fn.Un(i,r).next(function(t){var e=o.On(i,r,t),n=Mr;return e.forEach(function(t,e){e=e||new Qs(t,Ji.min()),n=n.nt(t,e)}),n})},Wa.prototype.Bn=function(t,e,n){return i=e,ir.W(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.Wn(t,e.path):oa(e)?this.Qn(t,e,n):this.jn(t,e,n);var i},Wa.prototype.Wn=function(t,e){return this.$n(t,new ir(e)).next(function(t){var e=Fr;return t instanceof Xs&&(e=e.nt(t.key,t)),e})},Wa.prototype.Qn=function(n,i,r){var o=this,s=i.collectionGroup,a=Fr;return this.Nn.Gn(n,s).next(function(t){return ja.forEach(t,function(t){var e=i.rn(t.child(s));return o.jn(n,e,r).next(function(t){t.forEach(function(t,e){a=a.nt(t,e)})})}).next(function(){return a})})},Wa.prototype.jn=function(e,n,t){var c,l,i=this;return this.Dn.Bn(e,n,t).next(function(t){return c=t,i.Fn.zn(e,n)}).next(function(t){return l=t,i.Kn(e,l,c).next(function(t){c=t;for(var e=0,n=l;e<n.length;e++)for(var i=n[e],r=0,o=i.mutations;r<o.length;r++){var s=o[r],a=s.key,u=c.get(a),h=Es(s,u,u,i.dn);c=h instanceof Xs?c.nt(a,h):c.remove(a)}})}).next(function(){return c.forEach(function(t,e){da(n,e)||(c=c.remove(t))}),c})},Wa.prototype.Kn=function(t,e,n){for(var i=Br(),r=0,o=e;r<o.length;r++)for(var s=0,a=o[r].mutations;s<a.length;s++){var u=a[s];u instanceof Rs&&null===n.get(u.key)&&(i=i.add(u.key))}var h=n;return this.Dn.getEntries(t,i).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Xs&&(h=h.nt(t,e))}),h})},Wa),Ba=(Ka.Xn=function(t,e){for(var n=Br(),i=Br(),r=0,o=e.docChanges;r<o.length;r++){var s=o[r];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new Ka(t,e.fromCache,n,i)},Ka),za=(Ha.prototype.Zn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ha.prototype.next=function(){var t=++this.previousValue;return this.ts&&this.ts(t),t},Ha);function Ha(t,e){var n=this;this.previousValue=t,e&&(e.Jn=function(t){return n.Zn(t)},this.ts=function(t){return e.es(t)})}function Ka(t,e,n,i){this.targetId=t,this.fromCache=e,this.Hn=n,this.Yn=i}function Wa(t,e,n){this.Dn=t,this.Fn=e,this.Nn=n}function Ya(t){var e=this;this.An=null,this.Pn=null,this.result=void 0,this.error=void 0,this.Vn=!1,this.pn=!1,t(function(t){e.Vn=!0,e.result=t,e.An&&e.An(t)},function(t){e.Vn=!0,e.error=t,e.Pn&&e.Pn(t)})}function Xa(t,e,n,i){this.batch=t,this.In=e,this.Tn=n,this.Rn=i}function Qa(t,e,n,i){this.batchId=t,this.dn=e,this.baseMutations=n,this.mutations=i}za.ns=-1;function $a(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var Ja=(ou.prototype.reset=function(){this.us=0},ou.prototype._s=function(){this.us=this.as},ou.prototype.fs=function(t){var e=this;this.cancel();var n=Math.floor(this.us+this.ds()),i=Math.max(0,Date.now()-this.ls),r=Math.max(0,n-i);0<r&&Si("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.us+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.cs=this.ss.ws(this.rs,r,function(){return e.ls=Date.now(),t()}),this.us*=this.hs,this.us<this.os&&(this.us=this.os),this.us>this.as&&(this.us=this.as)},ou.prototype.Ts=function(){null!==this.cs&&(this.cs.ms(),this.cs=null)},ou.prototype.cancel=function(){null!==this.cs&&(this.cs.cancel(),this.cs=null)},ou.prototype.ds=function(){return(Math.random()-.5)*this.us},ou),Za=(ru.prototype.Is=function(t,e){return this.Es.add(e),ja.resolve()},ru.prototype.Gn=function(t,e){return ja.resolve(this.Es.getEntries(e))},ru),tu=(iu.prototype.add=function(t){var e=t.S(),n=t.g(),i=this.index[e]||new Cr(tr.P),r=!i.has(n);return this.index[e]=i.add(n),r},iu.prototype.has=function(t){var e=t.S(),n=t.g(),i=this.index[e];return i&&i.has(n)},iu.prototype.getEntries=function(t){return(this.index[t]||new Cr(tr.P)).F()},iu),eu=(nu.prototype.next=function(){return this.Rs+=2,this.Rs},nu.As=function(){return new nu(0)},nu.Ps=function(){return new nu(-1)},nu);function nu(t){this.Rs=t}function iu(){this.index={}}function ru(){this.Es=new tu}function ou(t,e,n,i,r){void 0===n&&(n=1e3),void 0===i&&(i=1.5),void 0===r&&(r=6e4),this.ss=t,this.rs=e,this.os=n,this.hs=i,this.as=r,this.us=0,this.cs=null,this.ls=Date.now(),this.reset()}function su(t){return"IndexedDbTransactionError"===t.name}function au(){return"undefined"!=typeof window?window:null}var uu=(lu.vs=function(t,e,n,i,r){var o=new lu(t,e,Date.now()+n,i,r);return o.start(n),o},lu.prototype.start=function(t){var e=this;this.bs=setTimeout(function(){return e.Ss()},t)},lu.prototype.ms=function(){return this.Ss()},lu.prototype.cancel=function(t){null!==this.bs&&(this.clearTimeout(),this.gs.reject(new Qi(Xi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},lu.prototype.Ss=function(){var e=this;this.Vs.Cs(function(){return null!==e.bs?(e.clearTimeout(),e.op().then(function(t){return e.gs.resolve(t)})):Promise.resolve()})},lu.prototype.clearTimeout=function(){null!==this.bs&&(this.ys(this),clearTimeout(this.bs),this.bs=null)},lu),hu=(Object.defineProperty(cu.prototype,"Ms",{get:function(){return this.Ns},enumerable:!1,configurable:!0}),cu.prototype.Cs=function(t){this.enqueue(t)},cu.prototype.Us=function(t){this.Bs(),this.Ws(t)},cu.prototype.Qs=function(t){return this.Bs(),this.Ws(t)},cu.prototype.js=function(n){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.Bs(),this.Ns?[3,2]:(this.Ns=!0,(e=au())&&e.removeEventListener("visibilitychange",this.qs),[4,this.Qs(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},cu.prototype.enqueue=function(t){return this.Bs(),this.Ns?new Promise(function(t){}):this.Ws(t)},cu.prototype.Gs=function(t){var e=this;this.Fs.push(t),this.Cs(function(){return e.zs()})},cu.prototype.zs=function(){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(0===this.Fs.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Fs[0]()];case 2:return t.sent(),this.Fs.shift(),this.Os.reset(),[3,4];case 3:if(!su(e=t.sent()))throw e;return Si("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Fs.length&&this.Os.fs(function(){return n.zs()}),t.label=5;case 5:return[2]}})})},cu.prototype.Ws=function(t){var i=this,e=this.Ds.then(function(){return i.xs=!0,t().catch(function(t){throw i.ks=t,i.xs=!1,Di("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return i.xs=!1,t})});return this.Ds=e},cu.prototype.ws=function(t,e,n){var i=this;this.Bs(),-1<this.Ls.indexOf(t)&&(e=0);var r=uu.vs(this,t,e,n,function(t){return i.Ks(t)});return this.$s.push(r),r},cu.prototype.Bs=function(){this.ks&&Li()},cu.prototype.Hs=function(){},cu.prototype.Ys=function(){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,e=this.Ds];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ds)return[3,0];t.label=3;case 3:return[2]}})})},cu.prototype.Xs=function(t){for(var e=0,n=this.$s;e<n.length;e++)if(n[e].rs===t)return!0;return!1},cu.prototype.Js=function(i){var r=this;return this.Ys().then(function(){r.$s.sort(function(t,e){return t.ps-e.ps});for(var t=0,e=r.$s;t<e.length;t++){var n=e[t];if(n.ms(),"all"!==i&&n.rs===i)break}return r.Ys()})},cu.prototype.Zs=function(t){this.Ls.push(t)},cu.prototype.Ks=function(t){var e=this.$s.indexOf(t);this.$s.splice(e,1)},cu);function cu(){var t=this;this.Ds=Promise.resolve(),this.Fs=[],this.Ns=!1,this.$s=[],this.ks=null,this.xs=!1,this.Ls=[],this.Os=new Ja(this,"async_queue_retry"),this.qs=function(){return t.Os.Ts()};var e=au();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qs)}function lu(t,e,n,i,r){this.Vs=t,this.rs=e,this.ps=n,this.op=i,this.ys=r,this.gs=new $a,this.then=this.gs.promise.then.bind(this.gs.promise),this.gs.promise.catch(function(t){})}function fu(t,e){if(Di("AsyncQueue",e+": "+t),su(t))return new Qi(Xi.UNAVAILABLE,e+": "+t);throw t}var pu=(du.si=function(t){return new du(t,du.ii,du.ri)},du);function du(t,e,n){this.ti=t,this.ei=e,this.ni=n}pu.oi=-1,pu.hi=1048576,pu.ai=41943040,pu.ii=10,pu.ri=1e3,pu.ui=new pu(pu.ai,pu.ii,pu.ri),pu.ci=new pu(pu.oi,0,0);var yu=(vu.prototype.Vi=function(r){return d(this,void 0,void 0,function(){var e,m,n,i=this;return y(this,function(t){switch(t.label){case 0:return e=this.Fn,m=this.Ri,[4,this.persistence.runTransaction("Handle user change","readonly",function(v){var g;return i.Fn.pi(v).next(function(t){return g=t,e=i.persistence.wi(r),m=new Ga(i.Ti,e,i.persistence.Ai()),e.pi(v)}).next(function(t){for(var e=[],n=[],i=Br(),r=0,o=g;r<o.length;r++){var s=o[r];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var h=u[a],i=i.add(h.key)}for(var c=0,l=t;c<l.length;c++){var f=l[c];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var y=d[p];i=i.add(y.key)}}return m.qn(v,i).next(function(t){return{yi:t,gi:e,vi:n}})})})];case 1:return n=t.sent(),[2,(this.Fn=e,this.Ri=m,this.li.Pi(this.Ri),n)]}})})},vu.prototype.bi=function(h){var c,l=this,f=$i.now(),t=h.reduce(function(t,e){return t.add(e.key)},Br());return this.persistence.runTransaction("Locally write mutations","readwrite",function(u){return l.Ri.qn(u,t).next(function(t){c=t;for(var a,e,n=[],i=0,r=h;i<r.length;i++){var o=r[i],s=(a=o,e=c.get(o.key),a instanceof Ps?function(t){for(var e=null,n=0,i=a.fieldTransforms;n<i.length;n++){var r=i[n],o=t instanceof Xs?t.field(r.field):void 0,s=Xo(r.transform,o||null);null!=s&&(e=null==e?(new Fs).set(r.field,s):e.set(r.field,s))}return e?e.ze():null}(e):null);null!=s&&n.push(new Rs(o.key,s,function a(t){var u=[];return Bi(t.fields||{},function(t,e){var n=new nr([t]);if(Oo(e)){var i=a(e.mapValue).fields;if(0===i.length)u.push(n);else for(var r=0,o=i;r<o.length;r++){var s=o[r];u.push(n.child(s))}}else u.push(n)}),new ps(u)}(s.proto.mapValue),vs.exists(!0)))}return l.Fn.Si(u,f,n,h)})}).then(function(t){var e=t.En(c);return{batchId:t.batchId,Ci:e}})},vu.prototype.Di=function(i){var r=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=i.batch.keys(),n=r.Ti.Fi({Ni:!0});return r.$i(t,i,n).next(function(){return n.apply(t)}).next(function(){return r.Fn.ki(t)}).next(function(){return r.Ri.qn(t,e)})})},vu.prototype.xi=function(t){var i=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Fn.Li(e,t).next(function(t){return Vi(null!==t),n=t.keys(),i.Fn.Oi(e,t)}).next(function(){return i.Fn.ki(e)}).next(function(){return i.Ri.qn(e,n)})})},vu.prototype.qi=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Fn.qi(t)})},vu.prototype.Mi=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ei.Mi(t)})},vu.prototype.Ui=function(u){var h=this,c=u.J,l=this._i;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var r=h.Ti.Fi({Ni:!0});l=h._i;var s=[];u.Wt.forEach(function(t,e){var n,i,r=l.get(e);r&&(s.push(h.Ei.Bi(o,t.Jt,e).next(function(){return h.Ei.Wi(o,t.Yt,e)})),0<(n=t.resumeToken).H()&&(i=r.tt(n,c).Z(o.Qi),l=l.nt(e,i),vu.ji(r,i,t)&&s.push(h.Ei.Gi(o,i))))});var t,a=Mr,n=Br();return u.jt.forEach(function(t,e){n=n.add(t)}),s.push(r.getEntries(o,n).next(function(i){u.jt.forEach(function(t,e){var n=i.get(t);e instanceof Qs&&e.version.isEqual(Ji.min())?(r.zi(t,c),a=a.nt(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(r.Ki(e,c),a=a.nt(t,e)):Si("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Gt.has(t)&&s.push(h.persistence.Yi.Hi(o,t))})})),c.isEqual(Ji.min())||(t=h.Ei.Mi(o).next(function(t){return h.Ei.Xi(o,o.Qi,c)}),s.push(t)),ja.Sn(s).next(function(){return r.apply(o)}).next(function(){return h.Ri.Mn(o,a)})}).then(function(t){return h._i=l,t})},vu.ji=function(t,e,n){return Vi(0<e.resumeToken.H()),0===t.resumeToken.H()||e.J.I()-t.J.I()>=this.Ji||0<n.Yt.size+n.Xt.size+n.Jt.size},vu.prototype.Zi=function(c){return d(this,void 0,void 0,function(){var e,n,i,r,o,s,a,u,h=this;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return ja.forEach(c,function(e){return ja.forEach(e.Hn,function(t){return h.persistence.Yi.tr(n,e.targetId,t)}).next(function(){return ja.forEach(e.Yn,function(t){return h.persistence.Yi.er(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!su(e=t.sent()))throw e;return Si("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,i=c;n<i.length;n++)r=i[n],o=r.targetId,r.fromCache||(s=this._i.get(o),a=s.J,u=s.et(a),this._i=this._i.nt(o,u));return[2]}})})},vu.prototype.nr=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Fn.sr(t,e)})},vu.prototype.ir=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Ri.$n(t,e)})},vu.prototype.rr=function(i){var r=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return r.Ei.or(e,i).next(function(t){return t?(n=t,ja.resolve(n)):r.Ei.hr(e).next(function(t){return n=new Ar(i,t,0,e.Qi),r.Ei.ar(e,n).next(function(){return n})})})}).then(function(t){var e=r._i.get(t.targetId);return(null===e||0<t.J.o(e.J))&&(r._i=r._i.nt(t.targetId,t),r.fi.set(i,t.targetId)),t})},vu.prototype.or=function(t,e){var n=this.fi.get(e);return void 0!==n?ja.resolve(this._i.get(n)):this.Ei.or(t,e)},vu.prototype.ur=function(o,s){return d(this,void 0,void 0,function(){var e,n,i,r=this;return y(this,function(t){switch(t.label){case 0:e=this._i.get(o),n=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,this.persistence.runTransaction("Release target",n,function(t){return r.persistence.Yi.removeTarget(t,e)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!su(i=t.sent()))throw i;return Si("LocalStore","Failed to update sequence numbers for target "+o+": "+i),[3,5];case 5:return this._i=this._i.remove(o),this.fi.delete(e.target),[2]}})})},vu.prototype.cr=function(t,n){var i=this,r=Ji.min(),o=Br();return this.persistence.runTransaction("Execute query","readonly",function(e){return i.or(e,aa(t)).next(function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,i.Ei.lr(e,t.targetId).next(function(t){o=t})}).next(function(){return i.li.Bn(e,t,n?r:Ji.min(),n?o:Br())}).next(function(t){return{documents:t,_r:o}})})},vu.prototype.$i=function(t,r,o){var e=this,s=r.batch,n=s.keys(),a=ja.resolve();return n.forEach(function(i){a=a.next(function(){return o.Ln(t,i)}).next(function(t){var e=t,n=r.Rn.get(i);Vi(null!==n),(!e||e.version.o(n)<0)&&(e=s.wn(i,e,r))&&o.Ki(e,r.In)})}),a.next(function(){return e.Fn.Oi(t,s)})},vu.prototype.dr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.wr(t,n._i)})},vu);function vu(t,e,n){this.persistence=t,this.li=e,this._i=new Or(Mi),this.fi=new Yi(vr,gr),this.di=Ji.min(),this.Fn=t.wi(n),this.Ti=t.mi(),this.Ei=t.Ii(),this.Ri=new Ga(this.Ti,this.Fn,this.persistence.Ai()),this.li.Pi(this.Ri)}function gu(e){return d(this,void 0,void 0,function(){return y(this,function(t){if(e.code!==Xi.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return Si("LocalStore","Unexpectedly lost primary lease"),[2]})})}yu.Ji=3e8;var mu=(Tu.prototype._=function(){return this.Tr._()},Tu.prototype.tr=function(t,e){var n=new wu(t,e);this.Tr=this.Tr.add(n),this.Er=this.Er.add(n)},Tu.prototype.Rr=function(t,e){var n=this;t.forEach(function(t){return n.tr(t,e)})},Tu.prototype.er=function(t,e){this.Ar(new wu(t,e))},Tu.prototype.Pr=function(t,e){var n=this;t.forEach(function(t){return n.er(t,e)})},Tu.prototype.Vr=function(t){var e=this,n=new ir(new tr([])),i=new wu(n,t),r=new wu(n,t+1),o=[];return this.Er.bt([i,r],function(t){e.Ar(t),o.push(t.key)}),o},Tu.prototype.pr=function(){var e=this;this.Tr.forEach(function(t){return e.Ar(t)})},Tu.prototype.Ar=function(t){this.Tr=this.Tr.delete(t),this.Er=this.Er.delete(t)},Tu.prototype.yr=function(t){var e=new ir(new tr([])),n=new wu(e,t),i=new wu(e,t+1),r=Br();return this.Er.bt([n,i],function(t){r=r.add(t.key)}),r},Tu.prototype.gr=function(t){var e=new wu(t,0),n=this.Tr.Ct(e);return null!==n&&t.isEqual(n.key)},Tu),wu=(Iu.mr=function(t,e){return ir.P(t.key,e.key)||Mi(t.vr,e.vr)},Iu.Ir=function(t,e){return Mi(t.vr,e.vr)||ir.P(t.key,e.key)},Iu),bu=(Eu.prototype.br=function(){return null!=this.uid},Eu.prototype.Sr=function(){return this.br()?"uid:"+this.uid:"anonymous-user"},Eu.prototype.isEqual=function(t){return t.uid===this.uid},Eu);function Eu(t){this.uid=t}function Iu(t,e){this.key=t,this.vr=e}function Tu(){this.Tr=new Cr(wu.mr),this.Er=new Cr(wu.Ir)}bu.UNAUTHENTICATED=new bu(null),bu.Cr=new bu("google-credentials-uid"),bu.Dr=new bu("first-party-uid");function Au(t,e){this.user=e,this.type="OAuth",this.Fr={},this.Fr.Authorization="Bearer "+t}function Nu(t){this.key=t}function _u(t){this.key=t}function Ru(t,e,n){this.query=t,this.targetId=e,this.view=n}function Ou(t){this.key=t,this.oa=!1}function Su(){this.qa=void 0,this.listeners=[]}var Du,ku,Pu,Lu,Vu=(gh.prototype.getToken=function(){return Promise.resolve(null)},gh.prototype.$r=function(){},gh.prototype.kr=function(t){(this.Nr=t)(bu.UNAUTHENTICATED)},gh.prototype.xr=function(){this.Nr=null},gh),Cu=(vh.prototype.getToken=function(){var e=this,n=this.qr,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.qr!==n?(Si("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Vi("string"==typeof t.accessToken),new Au(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},vh.prototype.$r=function(){this.forceRefresh=!0},vh.prototype.kr=function(t){this.Nr=t,this.Or&&t(this.currentUser)},vh.prototype.xr=function(){this.auth&&this.auth.removeAuthTokenListener(this.Lr),this.Lr=null,this.Nr=null},vh.prototype.Mr=function(){var t=this.auth&&this.auth.getUid();return Vi(null===t||"string"==typeof t),new bu(t)},vh),Uu=(Object.defineProperty(yh.prototype,"Fr",{get:function(){var t={"X-Goog-AuthUser":this.Br},e=this.Ur.auth.Wr([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),yh),Mu=(dh.prototype.getToken=function(){return Promise.resolve(new Uu(this.Ur,this.Br))},dh.prototype.kr=function(t){t(bu.Dr)},dh.prototype.xr=function(){},dh.prototype.$r=function(){},dh),xu=(ph.prototype.Hr=function(){return 1===this.state||2===this.state||4===this.state},ph.prototype.Yr=function(){return 2===this.state},ph.prototype.start=function(){3!==this.state?this.auth():this.Xr()},ph.prototype.stop=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Hr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ph.prototype.Jr=function(){this.state=0,this.Os.reset()},ph.prototype.Zr=function(){var t=this;this.Yr()&&null===this.Kr&&(this.Kr=this.ss.ws(this.Qr,6e4,function(){return t.to()}))},ph.prototype.eo=function(t){this.no(),this.stream.send(t)},ph.prototype.to=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Yr()?[2,this.close(0)]:[2]})})},ph.prototype.no=function(){this.Kr&&(this.Kr.cancel(),this.Kr=null)},ph.prototype.close=function(e,n){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.no(),this.Os.cancel(),this.zr++,3!==e?this.Os.reset():n&&n.code===Xi.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.Os._s()):n&&n.code===Xi.UNAUTHENTICATED&&this.Gr.$r(),null!==this.stream&&(this.so(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.io(n)];case 1:return t.sent(),[2]}})})},ph.prototype.so=function(){},ph.prototype.auth=function(){var n=this;this.state=1;var t=this.ro(this.zr),e=this.zr;this.Gr.getToken().then(function(t){n.zr===e&&n.oo(t)},function(e){t(function(){var t=new Qi(Xi.UNKNOWN,"Fetching auth token failed: "+e.message);return n.ho(t)})})},ph.prototype.oo=function(t){var e=this,n=this.ro(this.zr);this.stream=this.ao(t),this.stream.uo(function(){n(function(){return e.state=2,e.listener.uo()})}),this.stream.io(function(t){n(function(){return e.ho(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ph.prototype.Xr=function(){var t=this;this.state=4,this.Os.fs(function(){return d(t,void 0,void 0,function(){return y(this,function(t){return this.state=0,this.start(),[2]})})})},ph.prototype.ho=function(t){return Si("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},ph.prototype.ro=function(e){var n=this;return function(t){n.ss.Cs(function(){return n.zr===e?t():(Si("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ph),qu=(n(fh,Pu=xu),fh.prototype.ao=function(t){return this.jr.co("Listen",t)},fh.prototype.onMessage=function(t){this.Os.reset();var e=function(t,e){var n,i,r,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Li(),a=e.targetChange.targetIds||[],u=(r=e.targetChange.resumeToken,t.Oe?(Vi(void 0===r||"string"==typeof r),wr.fromBase64String(r||"")):(Vi(void 0===r||r instanceof Uint8Array),wr.fromUint8Array(r||new Uint8Array))),h=e.targetChange.cause,c=h&&(i=void 0===(n=h).code?Xi.UNKNOWN:Rr(n.code),new Qi(i,n.message||"")),l=new Wr(s,a,u,c||null)}else if("documentChange"in e){e.documentChange;var f=e.documentChange;f.document,f.document.name,f.document.updateTime;var p=Fo(t,f.document.name),d=Mo(f.document.updateTime),y=new qs({mapValue:{fields:f.document.fields}}),v=new Xs(p,d,y,{}),g=f.targetIds||[],m=f.removedTargetIds||[];l=new Hr(g,m,v.key,v)}else if("documentDelete"in e){e.documentDelete;var w=e.documentDelete;w.document;var b=Fo(t,w.document),E=w.readTime?Mo(w.readTime):Ji.min(),I=new Qs(b,E),T=w.removedTargetIds||[];l=new Hr([],T,I.key,I)}else if("documentRemove"in e){e.documentRemove;var A=e.documentRemove;A.document;var N=Fo(t,A.document),_=A.removedTargetIds||[];l=new Hr([],_,N,null)}else{if(!("filter"in e))return Li();e.filter;var R=e.filter;R.targetId;var O=R.count||0,S=new Er(O),D=R.targetId;l=new Kr(D,S)}return l}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ji.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Ji.min():Mo(e.readTime)}(t);return this.listener.lo(e,n)},fh.prototype._o=function(t){var e,n,i,r,o={};o.database=Go(this.serializer),o.addTarget=(e=this.serializer,r=(n=t).target,(i=mr(r)?{documents:{documents:[jo(e,r.path)]}}:{query:function(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=jo(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jo(t,i.g()),n.structuredQuery.from=[{collectionId:i.S()}]);var r=function(t){if(0!==t.length){var e=t.map(function(t){if("=="===t.op){if(Ro(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NAN"}};if(_o(t.value))return{unaryFilter:{field:Ko(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Ko(t.field),op:(e=t.op,Do[e]),value:t.value}};var e});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);r&&(n.structuredQuery.where=r);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Ko((e=t).field),direction:(n=e.dir,So[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Oe||fr(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Ho(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ho(e.endAt)),n}(e,r)}).targetId=n.targetId,0<n.resumeToken.H()&&(i.resumeToken=Uo(e,n.resumeToken)),i);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.X){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Li()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.eo(o)},fh.prototype.fo=function(t){var e={};e.database=Go(this.serializer),e.removeTarget=t,this.eo(e)},fh),Fu=(n(lh,ku=xu),Object.defineProperty(lh.prototype,"wo",{get:function(){return this.do},enumerable:!1,configurable:!0}),lh.prototype.start=function(){this.do=!1,this.lastStreamToken=void 0,ku.prototype.start.call(this)},lh.prototype.so=function(){this.do&&this.To([])},lh.prototype.ao=function(t){return this.jr.co("Write",t)},lh.prototype.onMessage=function(t){if(Vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.do){this.Os.reset();var e=(i=t.writeResults,r=t.commitTime,i&&0<i.length?(Vi(void 0!==r),i.map(function(t){return function(t,e){var n=t.updateTime?Mo(t.updateTime):Mo(e);n.isEqual(Ji.min())&&(n=Mo(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults),new ys(n,i)}(t,r)})):[]),n=Mo(t.commitTime);return this.listener.mo(n,e)}var i,r;return Vi(!t.writeResults||0===t.writeResults.length),this.do=!0,this.listener.Eo()},lh.prototype.Io=function(){var t={};t.database=Go(this.serializer),this.eo(t)},lh.prototype.To=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return zo(e.serializer,t)})};this.eo(n)},lh),ju=(n(ch,Du=function(){}),ch.prototype.Ao=function(){if(this.Ro)throw new Qi(Xi.FAILED_PRECONDITION,"The client has already been terminated.")},ch.prototype.start=function(t){this.jr=t},ch.prototype.Po=function(e,n,i){var r=this;return this.Ao(),this.credentials.getToken().then(function(t){return r.jr.Po(e,n,i,t)}).catch(function(t){throw t.code===Xi.UNAUTHENTICATED&&r.credentials.$r(),t})},ch.prototype.Vo=function(e,n,i){var r=this;return this.Ao(),this.credentials.getToken().then(function(t){return r.jr.Vo(e,n,i,t)}).catch(function(t){throw t.code===Xi.UNAUTHENTICATED&&r.credentials.$r(),t})},ch.prototype.po=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Ro=!1,[2]})})},ch),Gu=(hh.prototype.Co=function(){var t=this;0===this.vo&&(this.Do("Unknown"),this.bo=this.Vs.ws("online_state_timeout",1e4,function(){return t.bo=null,t.Fo("Backend didn't respond within 10 seconds."),t.Do("Offline"),Promise.resolve()}))},hh.prototype.No=function(t){"Online"===this.state?this.Do("Unknown"):(this.vo++,1<=this.vo&&(this.$o(),this.Fo("Connection failed 1 times. Most recent error: "+t.toString()),this.Do("Offline")))},hh.prototype.set=function(t){this.$o(),this.vo=0,"Online"===t&&(this.So=!1),this.Do(t)},hh.prototype.Do=function(t){t!==this.state&&(this.state=t,this.yo(t))},hh.prototype.Fo=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.So?(Di(e),this.So=!1):Si("OnlineStateTracker",e)},hh.prototype.$o=function(){null!==this.bo&&(this.bo.cancel(),this.bo=null)},hh),Bu=(uh.prototype.start=function(){return this.enableNetwork()},uh.prototype.enableNetwork=function(){return this.Mo.delete(0),this.th()},uh.prototype.th=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Wo()?(this.eh()?this.nh():this.jo.set("Unknown"),[4,this.sh()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},uh.prototype.disableNetwork=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Mo.add(0),[4,this.ih()];case 1:return t.sent(),this.jo.set("Offline"),[2]}})})},uh.prototype.ih=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this.Yo.stop()];case 1:return t.sent(),[4,this.Go.stop()];case 2:return t.sent(),0<this.Lo.length&&(Si("RemoteStore","Stopping write stream with "+this.Lo.length+" pending writes"),this.Lo=[]),this.rh(),[2]}})})},uh.prototype.oh=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return Si("RemoteStore","RemoteStore shutting down."),this.Mo.add(5),[4,this.ih()];case 1:return t.sent(),this.Uo.oh(),this.jo.set("Unknown"),[2]}})})},uh.prototype.listen=function(t){this.Oo.has(t.targetId)||(this.Oo.set(t.targetId,t),this.eh()?this.nh():this.Go.Yr()&&this.hh(t))},uh.prototype.ah=function(t){this.Oo.delete(t),this.Go.Yr()&&this.uh(t),0===this.Oo.size&&(this.Go.Yr()?this.Go.Zr():this.Wo()&&this.jo.set("Unknown"))},uh.prototype.Le=function(t){return this.Oo.get(t)||null},uh.prototype.xe=function(t){return this.lh.xe(t)},uh.prototype.hh=function(t){this.qo.de(t.targetId),this.Go._o(t)},uh.prototype.uh=function(t){this.qo.de(t),this.Go.fo(t)},uh.prototype.nh=function(){this.qo=new to(this),this.Go.start(),this.jo.Co()},uh.prototype.eh=function(){return this.Wo()&&!this.Go.Hr()&&0<this.Oo.size},uh.prototype.Wo=function(){return 0===this.Mo.size},uh.prototype.rh=function(){this.qo=null},uh.prototype.zo=function(){return d(this,void 0,void 0,function(){var n=this;return y(this,function(t){return this.Oo.forEach(function(t,e){n.hh(t)}),[2]})})},uh.prototype.Ko=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){return this.rh(),this.eh()?(this.jo.No(e),this.nh()):this.jo.set("Unknown"),[2]})})},uh.prototype.Ho=function(r,o){return d(this,void 0,void 0,function(){var e,n,i;return y(this,function(t){switch(t.label){case 0:if(this.jo.set("Online"),!(r instanceof Wr&&2===r.state&&r.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this._h(r)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),Si("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),e),[4,this.fh(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(r instanceof Hr?this.qo.Pe(r):r instanceof Kr?this.qo.Ce(r):this.qo.ye(r),o.isEqual(Ji.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.ko.Mi()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.dh(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Si("RemoteStore","Failed to raise snapshot:",i=t.sent()),[4,this.fh(i)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},uh.prototype.fh=function(n,i){return d(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:if(!su(n))throw n;return this.Mo.add(1),[4,this.ih()];case 1:return t.sent(),this.jo.set("Offline"),i=i||function(){return e.ko.Mi()},this.Vs.Gs(function(){return d(e,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return Si("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),this.Mo.delete(1),[4,this.th()];case 2:return t.sent(),[2]}})})}),[2]}})})},uh.prototype.wh=function(e){var n=this;return e().catch(function(t){return n.fh(t,e)})},uh.prototype.dh=function(i){var r=this,t=this.qo.Ne(i);return t.Wt.forEach(function(t,e){var n;0<t.resumeToken.H()&&(n=r.Oo.get(e))&&r.Oo.set(e,n.tt(t.resumeToken,i))}),t.Qt.forEach(function(t){var e,n=r.Oo.get(t);n&&(r.Oo.set(t,n.tt(wr.Y,n.J)),r.uh(t),e=new Ar(n.target,t,1,n.sequenceNumber),r.hh(e))}),this.lh.Ui(t)},uh.prototype._h=function(o){return d(this,void 0,void 0,function(){var e,n,i,r;return y(this,function(t){switch(t.label){case 0:e=o.cause,n=0,i=o.targetIds,t.label=1;case 1:return n<i.length?(r=i[n],this.Oo.has(r)?[4,this.lh.Th(r,e)]:[3,3]):[3,5];case 2:t.sent(),this.Oo.delete(r),this.qo.removeTarget(r),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},uh.prototype.sh=function(){return d(this,void 0,void 0,function(){var e,n,i;return y(this,function(t){switch(t.label){case 0:e=0<this.Lo.length?this.Lo[this.Lo.length-1].batchId:-1,t.label=1;case 1:if(!this.mh())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.ko.nr(e)];case 3:return null===(n=t.sent())?(0===this.Lo.length&&this.Yo.Zr(),[3,7]):(e=n.batchId,this.Eh(n),[3,6]);case 4:return i=t.sent(),[4,this.fh(i)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.Ih()&&this.Rh(),[2]}})})},uh.prototype.mh=function(){return this.Wo()&&this.Lo.length<10},uh.prototype.Ah=function(){return this.Lo.length},uh.prototype.Eh=function(t){this.Lo.push(t),this.Yo.Yr()&&this.Yo.wo&&this.Yo.To(t.mutations)},uh.prototype.Ih=function(){return this.Wo()&&!this.Yo.Hr()&&0<this.Lo.length},uh.prototype.Rh=function(){this.Yo.start()},uh.prototype.Xo=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Yo.Io(),[2]})})},uh.prototype.Zo=function(){return d(this,void 0,void 0,function(){var e,n,i;return y(this,function(t){for(e=0,n=this.Lo;e<n.length;e++)i=n[e],this.Yo.To(i.mutations);return[2]})})},uh.prototype.mo=function(r,o){return d(this,void 0,void 0,function(){var e,n,i=this;return y(this,function(t){switch(t.label){case 0:return e=this.Lo.shift(),n=Fa.from(e,r,o),[4,this.wh(function(){return i.lh.Ph(n)})];case 1:return t.sent(),[4,this.sh()];case 2:return t.sent(),[2]}})})},uh.prototype.Jo=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e&&this.Yo.wo?[4,this.Vh(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Ih()&&this.Rh(),[2]}})})},uh.prototype.Vh=function(r){return d(this,void 0,void 0,function(){var e,n,i=this;return y(this,function(t){switch(t.label){case 0:return _r(n=r.code)&&n!==Xi.ABORTED?(e=this.Lo.shift(),this.Yo.Jr(),[4,this.wh(function(){return i.lh.ph(e.batchId,r)})]):[3,3];case 1:return t.sent(),[4,this.sh()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},uh.prototype.Qo=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Mo.add(4),[4,this.ih()];case 1:return t.sent(),this.jo.set("Unknown"),this.Yo.Jr(),this.Go.Jr(),this.Mo.delete(4),[4,this.th()];case 2:return t.sent(),[2]}})})},uh.prototype.yh=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Vs.Hs(),Si("RemoteStore","RemoteStore received new credentials"),this.Mo.add(3),[4,this.ih()];case 1:return t.sent(),this.jo.set("Unknown"),[4,this.lh.yh(e)];case 2:return t.sent(),this.Mo.delete(3),[4,this.th()];case 3:return t.sent(),[2]}})})},uh.prototype.gh=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?(this.Mo.delete(2),[4,this.th()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Mo.add(2),[4,this.ih()]);case 3:t.sent(),this.jo.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},uh),zu=(ah.prototype.vh=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},ah.prototype.bh=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},ah.prototype.Sh=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},ah),Hu=(sh.prototype.Fh=function(t){},sh.prototype.Nh=function(t,e,n){},sh.prototype.$h=function(t){return this.Ch.vh(t),this.Dh[t]||"not-current"},sh.prototype.kh=function(t,e,n){this.Dh[t]=e},sh.prototype.xh=function(t){this.Ch.bh(t)},sh.prototype.Lh=function(t){return this.Ch.activeTargetIds.has(t)},sh.prototype.Oh=function(t){delete this.Dh[t]},sh.prototype.qh=function(){return this.Ch.activeTargetIds},sh.prototype.Mh=function(t){return this.Ch.activeTargetIds.has(t)},sh.prototype.start=function(){return this.Ch=new zu,Promise.resolve()},sh.prototype.Vi=function(t,e,n){},sh.prototype.Uh=function(t){},sh.prototype.oh=function(){},sh.prototype.es=function(t){},sh),Ku=(Object.defineProperty(oh.prototype,"zh",{get:function(){return this.Bh},enumerable:!1,configurable:!0}),oh.prototype.Kh=function(t,e){var a=this,u=e?e.Hh:new Xr,h=e?e.Gh:this.Gh,c=e?e.qt:this.qt,l=h,f=!1,p=this.query.hn()&&h.size===this.query.limit?h.last():null,d=this.query.an()&&h.size===this.query.limit?h.first():null;if(t.ot(function(t,e){var n=h.get(t),i=(i=e instanceof Xs?e:null)&&(da(a.query,i)?i:null),r=!!n&&a.qt.has(n.key),o=!!i&&(i.Ge||a.qt.has(i.key)&&i.hasCommittedMutations),s=!1;n&&i?n.data().isEqual(i.data())?r!==o&&(u.track({type:3,doc:i}),s=!0):a.Yh(n,i)||(u.track({type:2,doc:i}),s=!0,(p&&0<a.jh(i,p)||d&&a.jh(i,d)<0)&&(f=!0)):!n&&i?(u.track({type:0,doc:i}),s=!0):n&&!i&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(c=i?(l=l.add(i),o?c.add(t):c.delete(t)):(l=l.delete(t),c.delete(t)))}),this.query.hn()||this.query.an())for(;l.size>this.query.limit;){var n=this.query.hn()?l.last():l.first(),l=l.delete(n.key),c=c.delete(n.key);u.track({type:1,doc:n})}return{Gh:l,Hh:u,Xh:f,qt:c}},oh.prototype.Yh=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},oh.prototype.Jh=function(t,e,n){var o=this,i=this.Gh;this.Gh=t.Gh,this.qt=t.qt;var r=t.Hh.Lt();r.sort(function(t,e){return i=t.type,r=e.type,n(i)-n(r)||o.jh(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Li()}}var i,r}),this.Zh(n);var s=e?this.ta():[],a=0===this.Qh.size&&this.Ht?1:0,u=a!==this.Wh;return this.Wh=a,0!==r.length||u?{snapshot:new Qr(this.query,t.Gh,i,r,t.qt,0==a,u,!1),ea:s}:{ea:s}},oh.prototype.na=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jh({Gh:this.Gh,Hh:new Xr,qt:this.qt,Xh:!1},!1)):{ea:[]}},oh.prototype.sa=function(t){return!this.Bh.has(t)&&!!this.Gh.has(t)&&!this.Gh.get(t).Ge},oh.prototype.Zh=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Bh=e.Bh.add(t)}),t.Xt.forEach(function(t){}),t.Jt.forEach(function(t){return e.Bh=e.Bh.delete(t)}),this.Ht=t.Ht)},oh.prototype.ta=function(){var e=this;if(!this.Ht)return[];var n=this.Qh;this.Qh=Br(),this.Gh.forEach(function(t){e.sa(t.key)&&(e.Qh=e.Qh.add(t.key))});var i=[];return n.forEach(function(t){e.Qh.has(t)||i.push(new _u(t))}),this.Qh.forEach(function(t){n.has(t)||i.push(new Nu(t))}),i},oh.prototype.ia=function(t){this.Bh=t._r,this.Qh=Br();var e=this.Kh(t.documents);return this.Jh(e,!0)},oh.prototype.ra=function(){return Qr.Bt(this.query,this.Gh,this.qt,0===this.Wh)},oh),Wu=(Object.defineProperty(rh.prototype,"Aa",{get:function(){return!0===this.Ra},enumerable:!1,configurable:!0}),rh.prototype.subscribe=function(t){this.ca=t},rh.prototype.listen=function(s){return d(this,void 0,void 0,function(){var e,n,i,r,o;return y(this,function(t){switch(t.label){case 0:return this.Pa("listen()"),(i=this.la.get(s))?(e=i.targetId,this.aa.$h(e),n=i.view.ra(),[3,4]):[3,1];case 1:return[4,this.ko.rr(aa(s))];case 2:return r=t.sent(),o=this.aa.$h(r.targetId),e=r.targetId,[4,this.Va(s,e,"current"===o)];case 3:n=t.sent(),this.Aa&&this.ha.listen(r),t.label=4;case 4:return[2,n]}})})},rh.prototype.Va=function(a,u,h){return d(this,void 0,void 0,function(){var e,n,i,r,o,s;return y(this,function(t){switch(t.label){case 0:return[4,this.ko.cr(a,!0)];case 1:return e=t.sent(),n=new Ku(a,e._r),i=n.Kh(e.documents),r=Jr.Kt(u,h&&"Offline"!==this.onlineState),o=n.Jh(i,this.Aa,r),this.pa(u,o.ea),s=new Ru(a,u,n),[2,(this.la.set(a,s),this._a.has(u)?this._a.get(u).push(a):this._a.set(u,[a]),o.snapshot)]}})})},rh.prototype.ah=function(r){return d(this,void 0,void 0,function(){var e,n,i=this;return y(this,function(t){switch(t.label){case 0:return this.Pa("unlisten()"),e=this.la.get(r),1<(n=this._a.get(e.targetId)).length?[2,(this._a.set(e.targetId,n.filter(function(t){return!la(t,r)})),void this.la.delete(r))]:this.Aa?(this.aa.xh(e.targetId),this.aa.Mh(e.targetId)?[3,2]:[4,this.ko.ur(e.targetId,!1).then(function(){i.aa.Oh(e.targetId),i.ha.ah(e.targetId),i.ya(e.targetId)}).catch(gu)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.ya(e.targetId),[4,this.ko.ur(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},rh.prototype.write=function(r,o){return d(this,void 0,void 0,function(){var e,n,i;return y(this,function(t){switch(t.label){case 0:this.Pa("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.ko.bi(r)];case 2:return e=t.sent(),this.aa.Fh(e.batchId),this.ga(e.batchId,o),[4,this.va(e.Ci)];case 3:return t.sent(),[4,this.ha.sh()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),i=fu(n,"Failed to persist write"),o.reject(i),[3,6];case 6:return[2]}})})},rh.prototype.Ui=function(n){return d(this,void 0,void 0,function(){var e,i=this;return y(this,function(t){switch(t.label){case 0:this.Pa("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.ko.Ui(n)];case 2:return e=t.sent(),n.Wt.forEach(function(t,e){var n=i.wa.get(e);n&&(Vi(t.Yt.size+t.Xt.size+t.Jt.size<=1),0<t.Yt.size?n.oa=!0:0<t.Xt.size?Vi(n.oa):0<t.Jt.size&&(Vi(n.oa),n.oa=!1))}),[4,this.va(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,gu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rh.prototype.na=function(i,t){var r;(this.Aa&&0===t||!this.Aa&&1===t)&&(this.Pa("applyOnlineStateChange()"),r=[],this.la.forEach(function(t,e){var n=e.view.na(i);n.snapshot&&r.push(n.snapshot)}),this.ca.ba(i),this.ca.lo(r),this.onlineState=i,this.Aa&&this.aa.Uh(i))},rh.prototype.Th=function(a,u){return d(this,void 0,void 0,function(){var e,n,i,r,o,s=this;return y(this,function(t){switch(t.label){case 0:return this.Pa("rejectListens()"),this.aa.kh(a,"rejected",u),e=this.wa.get(a),(n=e&&e.key)?(i=(i=new Or(ir.P)).nt(n,new Qs(n,Ji.min())),r=Br().add(n),o=new $r(Ji.min(),new Map,new Cr(Mi),i,r),[4,this.Ui(o)]):[3,2];case 1:return t.sent(),this.da=this.da.remove(n),this.wa.delete(a),this.Sa(),[3,4];case 2:return[4,this.ko.ur(a,!1).then(function(){return s.ya(a,u)}).catch(gu)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},rh.prototype.Ph=function(i){return d(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:this.Pa("applySuccessfulWrite()"),e=i.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.ko.Di(i)];case 2:return n=t.sent(),this.Ca(e,null),this.Da(e),this.aa.Nh(e,"acknowledged"),[4,this.va(n)];case 3:return t.sent(),[3,6];case 4:return[4,gu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rh.prototype.ph=function(n,i){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:this.Pa("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.ko.xi(n)];case 2:return e=t.sent(),this.Ca(n,i),this.Da(n),this.aa.Nh(n,"rejected",i),[4,this.va(e)];case 3:return t.sent(),[3,6];case 4:return[4,gu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rh.prototype.Fa=function(o){return d(this,void 0,void 0,function(){var e,n,i,r;return y(this,function(t){switch(t.label){case 0:this.ha.Wo()||Si("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.ko.qi()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.Ea.get(e)||[]).push(o),this.Ea.set(e,n),[3,4]);case 3:return i=t.sent(),r=fu(i,"Initialization of waitForPendingWrites() operation failed"),o.reject(r),[3,4];case 4:return[2]}})})},rh.prototype.Da=function(t){(this.Ea.get(t)||[]).forEach(function(t){t.resolve()}),this.Ea.delete(t)},rh.prototype.Na=function(e){this.Ea.forEach(function(t){t.forEach(function(t){t.reject(new Qi(Xi.CANCELLED,e))})}),this.Ea.clear()},rh.prototype.ga=function(t,e){var n=this.ma[this.currentUser.Sr()];n=(n=n||new Or(Mi)).nt(t,e),this.ma[this.currentUser.Sr()]=n},rh.prototype.Ca=function(t,e){var n,i=this.ma[this.currentUser.Sr()];i&&((n=i.get(t))&&(e?n.reject(e):n.resolve(),i=i.remove(t)),this.ma[this.currentUser.Sr()]=i)},rh.prototype.ya=function(t,e){var n=this;void 0===e&&(e=null),this.aa.xh(t);for(var i=0,r=this._a.get(t);i<r.length;i++){var o=r[i];this.la.delete(o),e&&this.ca.$a(o,e)}this._a.delete(t),this.Aa&&this.Ta.Vr(t).forEach(function(t){n.Ta.gr(t)||n.ka(t)})},rh.prototype.ka=function(t){var e=this.da.get(t);null!==e&&(this.ha.ah(e),this.da=this.da.remove(t),this.wa.delete(e),this.Sa())},rh.prototype.pa=function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n];r instanceof Nu?(this.Ta.tr(r.key,t),this.xa(r)):r instanceof _u?(Si("SyncEngine","Document no longer in limbo: "+r.key),this.Ta.er(r.key,t),this.Ta.gr(r.key)||this.ka(r.key)):Li()}},rh.prototype.xa=function(t){var e=t.key;this.da.get(e)||(Si("SyncEngine","New document in limbo: "+e),this.fa.push(e),this.Sa())},rh.prototype.Sa=function(){for(;0<this.fa.length&&this.da.size<this.ua;){var t=this.fa.shift(),e=this.Ia.next();this.wa.set(e,new Ou(t)),this.da=this.da.nt(t,e),this.ha.listen(new Ar(aa(ra(t.path)),e,2,za.ns))}},rh.prototype.La=function(){return this.da},rh.prototype.Oa=function(){return this.fa},rh.prototype.va=function(i,u){return d(this,void 0,void 0,function(){var o,s,e,a=this;return y(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.la.forEach(function(t,r){e.push(Promise.resolve().then(function(){var n=r.view.Kh(i);return n.Xh?a.ko.cr(r.query,!1).then(function(t){var e=t.documents;return r.view.Kh(e,n)}):n}).then(function(t){var e,n=u&&u.Wt.get(r.targetId),i=r.view.Jh(t,a.Aa,n);a.pa(r.targetId,i.ea),i.snapshot&&(a.Aa&&a.aa.kh(r.targetId,i.snapshot.fromCache?"not-current":"current"),o.push(i.snapshot),e=Ba.Xn(r.targetId,i.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.ca.lo(o),[4,this.ko.Zi(s)];case 2:return t.sent(),[2]}})})},rh.prototype.Pa=function(t){},rh.prototype.yh=function(n){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(Si("SyncEngine","User change. New user:",n.Sr()),[4,this.ko.Vi(n)]);case 1:return e=t.sent(),this.currentUser=n,this.Na("'waitForPendingWrites' promise is rejected due to a user change."),this.aa.Vi(n,e.gi,e.vi),[4,this.va(e.yi)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},rh.prototype.xe=function(t){var e=this.wa.get(t);if(e&&e.oa)return Br().add(e.key);var n=Br(),i=this._a.get(t);if(!i)return n;for(var r=0,o=i;r<o.length;r++)var s=o[r],a=this.la.get(s),n=n.Dt(a.view.zh);return n},rh),Yu=(ih.prototype.listen=function(a){return d(this,void 0,void 0,function(){var e,n,i,r,o,s;return y(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(i=this.Ma.get(e))||(n=!0,i=new Su),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),r=i,[4,this.lh.listen(e)];case 2:return r.qa=t.sent(),[3,4];case 3:return o=t.sent(),s=fu(o,"Initialization of query '"+pa(a.query)+"' failed"),[2,void a.onError(s)];case 4:return this.Ma.set(e,i),i.listeners.push(a),a.na(this.onlineState),i.qa&&a.Ba(i.qa)&&this.Wa(),[2]}})})},ih.prototype.ah=function(o){return d(this,void 0,void 0,function(){var e,n,i,r;return y(this,function(t){return e=o.query,n=!1,(i=this.Ma.get(e))&&0<=(r=i.listeners.indexOf(o))&&(i.listeners.splice(r,1),n=0===i.listeners.length),n?[2,(this.Ma.delete(e),this.lh.ah(e))]:[2]})})},ih.prototype.lo=function(t){for(var e=!1,n=0,i=t;n<i.length;n++){var r=i[n],o=r.query,s=this.Ma.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].Ba(r)&&(e=!0);s.qa=r}}e&&this.Wa()},ih.prototype.$a=function(t,e){var n=this.Ma.get(t);if(n)for(var i=0,r=n.listeners;i<r.length;i++)r[i].onError(e);this.Ma.delete(t)},ih.prototype.ba=function(r){this.onlineState=r;var o=!1;this.Ma.forEach(function(t,e){for(var n=0,i=e.listeners;n<i.length;n++)i[n].na(r)&&(o=!0)}),o&&this.Wa()},ih.prototype.Qa=function(t){this.Ua.add(t),t.next()},ih.prototype.ja=function(t){this.Ua.delete(t)},ih.prototype.Wa=function(){this.Ua.forEach(function(t){t.next()})},ih),Xu=(nh.prototype.Ba=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];3!==r.type&&e.push(r)}t=new Qr(t.query,t.docs,t.Ot,e,t.qt,t.fromCache,t.Mt,!0)}var o=!1;return this.za?this.Ha(t)&&(this.Ga.next(t),o=!0):this.Ya(t,this.onlineState)&&(this.Xa(t),o=!0),this.Ka=t,o},nh.prototype.onError=function(t){this.Ga.error(t)},nh.prototype.na=function(t){this.onlineState=t;var e=!1;return this.Ka&&!this.za&&this.Ya(this.Ka,t)&&(this.Xa(this.Ka),e=!0),e},nh.prototype.Ya=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Ja&&n||t.docs._()&&"Offline"!==e)},nh.prototype.Ha=function(t){if(0<t.docChanges.length)return!0;var e=this.Ka&&this.Ka.hasPendingWrites!==t.hasPendingWrites;return!(!t.Mt&&!e)&&!0===this.options.includeMetadataChanges},nh.prototype.Xa=function(t){t=Qr.Bt(t.query,t.docs,t.qt,t.fromCache),this.za=!0,this.Ga.next(t)},nh),Qu=(eh.prototype.Pi=function(t){this.Za=t},eh.prototype.Bn=function(e,i,r,o){var s=this;return i.on()||r.isEqual(Ji.min())?this.tu(e,i):this.Za.qn(e,o).next(function(t){var n=s.eu(i,t);return(i.hn()||i.an())&&s.Xh(i.en,n,o,r)?s.tu(e,i):(Oi()<=a.DEBUG&&Si("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pa(i)),s.Za.Bn(e,i,r).next(function(e){return n.forEach(function(t){e=e.nt(t.key,t)}),e}))})},eh.prototype.eu=function(n,t){var i=new Cr(ya(n));return t.forEach(function(t,e){e instanceof Xs&&da(n,e)&&(i=i.add(e))}),i},eh.prototype.Xh=function(t,e,n,i){if(n.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||0<r.version.o(i))},eh.prototype.tu=function(t,e){return Oi()<=a.DEBUG&&Si("IndexFreeQueryEngine","Using full collection scan to execute query:",pa(e)),this.Za.Bn(t,e,Ji.min())},eh),$u=(th.prototype.iu=function(t){return ja.resolve(0===this.Fn.length)},th.prototype.Si=function(t,e,n,i){var r=this.nu;this.nu++,0<this.Fn.length&&this.Fn[this.Fn.length-1];var o=new qa(r,e,n,i);this.Fn.push(o);for(var s=0,a=i;s<a.length;s++){var u=a[s];this.su=this.su.add(new wu(u.key,r)),this.Nn.Is(t,u.key.path.g())}return ja.resolve(o)},th.prototype.Li=function(t,e){return ja.resolve(this.ru(e))},th.prototype.sr=function(t,e){var n=e+1,i=this.ou(n),r=i<0?0:i;return ja.resolve(this.Fn.length>r?this.Fn[r]:null)},th.prototype.qi=function(){return ja.resolve(0===this.Fn.length?-1:this.nu-1)},th.prototype.pi=function(t){return ja.resolve(this.Fn.slice())},th.prototype.kn=function(t,e){var n=this,i=new wu(e,0),r=new wu(e,Number.POSITIVE_INFINITY),o=[];return this.su.bt([i,r],function(t){var e=n.ru(t.vr);o.push(e)}),ja.resolve(o)},th.prototype.Un=function(t,e){var i=this,r=new Cr(Mi);return e.forEach(function(t){var e=new wu(t,0),n=new wu(t,Number.POSITIVE_INFINITY);i.su.bt([e,n],function(t){r=r.add(t.vr)})}),ja.resolve(this.hu(r))},th.prototype.zn=function(t,e){var n=e.path,i=n.length+1,r=n;ir.W(r)||(r=r.child(""));var o=new wu(new ir(r),0),s=new Cr(Mi);return this.su.St(function(t){var e=t.key.path;return!!n.C(e)&&(e.length===i&&(s=s.add(t.vr)),!0)},o),ja.resolve(this.hu(s))},th.prototype.hu=function(t){var n=this,i=[];return t.forEach(function(t){var e=n.ru(t);null!==e&&i.push(e)}),i},th.prototype.Oi=function(n,i){var r=this;Vi(0===this.au(i.batchId,"removed")),this.Fn.shift();var o=this.su;return ja.forEach(i.mutations,function(t){var e=new wu(t.key,i.batchId);return o=o.delete(e),r.Yi.uu(n,t.key)}).next(function(){r.su=o})},th.prototype.cu=function(t){},th.prototype.gr=function(t,e){var n=new wu(e,0),i=this.su.Ct(n);return ja.resolve(e.isEqual(i&&i.key))},th.prototype.ki=function(t){return this.Fn.length,ja.resolve()},th.prototype.au=function(t,e){return this.ou(t)},th.prototype.ou=function(t){return 0===this.Fn.length?0:t-this.Fn[0].batchId},th.prototype.ru=function(t){var e=this.ou(t);return e<0||e>=this.Fn.length?null:this.Fn[e]},th),Ju=(Zu.prototype.Ki=function(t,e,n){var i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.lu(e);return this.docs=this.docs.nt(i,{_u:e,size:s,readTime:n}),this.size+=s-o,this.Nn.Is(t,i.path.g())},Zu.prototype.zi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Zu.prototype.Ln=function(t,e){var n=this.docs.get(e);return ja.resolve(n?n._u:null)},Zu.prototype.getEntries=function(t,e){var n=this,i=Mr;return e.forEach(function(t){var e=n.docs.get(t);i=i.nt(t,e?e._u:null)}),ja.resolve(i)},Zu.prototype.Bn=function(t,e,n){for(var i=Fr,r=new ir(e.path.child("")),o=this.docs.ut(r);o.wt();){var s=o.dt(),a=s.key,u=s.value,h=u._u,c=u.readTime;if(!e.path.C(a.path))break;c.o(n)<=0||h instanceof Xs&&da(e,h)&&(i=i.nt(h.key,h))}return ja.resolve(i)},Zu.prototype.fu=function(t,e){return ja.forEach(this.docs,function(t){return e(t)})},Zu.prototype.Fi=function(t){return new Zu.du(this)},Zu.prototype.wu=function(t){return ja.resolve(this.size)},Zu);function Zu(t,e){this.Nn=t,this.lu=e,this.docs=new Or(ir.P),this.size=0}function th(t,e){this.Nn=t,this.Yi=e,this.Fn=[],this.nu=1,this.su=new Cr(wu.mr)}function eh(){}function nh(t,e,n){this.query=t,this.Ga=e,this.za=!1,this.Ka=null,this.onlineState="Unknown",this.options=n||{}}function ih(t){this.lh=t,this.Ma=new Yi(fa,la),this.onlineState="Unknown",this.Ua=new Set,this.lh.subscribe(this)}function rh(t,e,n,i,r,o){this.ko=t,this.ha=e,this.xo=n,this.aa=i,this.currentUser=r,this.ua=o,this.ca=null,this.la=new Yi(fa,la),this._a=new Map,this.fa=[],this.da=new Or(ir.P),this.wa=new Map,this.Ta=new mu,this.ma={},this.Ea=new Map,this.Ia=eu.Ps(),this.onlineState="Unknown",this.Ra=void 0}function oh(t,e){this.query=t,this.Bh=e,this.Wh=null,this.Ht=!1,this.Qh=Br(),this.qt=Br(),this.jh=ya(t),this.Gh=new Yr(this.jh)}function sh(){this.Ch=new zu,this.Dh={},this.yo=null,this.Jn=null}function ah(){this.activeTargetIds=zr}function uh(t,e,n,i,r){var o,s,a,u,h,c,l,f,p=this;this.ko=t,this.xo=e,this.Vs=n,this.Lo=[],this.Oo=new Map,this.qo=null,this.Mo=new Set,this.Uo=r,this.Uo.Bo(function(t){n.Cs(function(){return d(p,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Wo()?(Si("RemoteStore","Restarting streams for network reachability change."),[4,this.Qo()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jo=new Gu(n,i),this.Go=(h=this.xo,c=n,l={uo:this.zo.bind(this),io:this.Ko.bind(this),lo:this.Ho.bind(this)},(f=h).Ao(),new qu(c,f.jr,f.credentials,f.serializer,l)),this.Yo=(o=this.xo,s=n,a={uo:this.Xo.bind(this),io:this.Jo.bind(this),Eo:this.Zo.bind(this),mo:this.mo.bind(this)},(u=o).Ao(),new Fu(s,u.jr,u.credentials,u.serializer,a))}function hh(t,e){this.Vs=t,this.yo=e,this.state="Unknown",this.vo=0,this.bo=null,this.So=!0}function ch(t,e){var n=this;return(n=Du.call(this)||this).credentials=t,n.serializer=e,n.Ro=!1,n}function lh(t,e,n,i,r){var o=this;return(o=ku.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,r)||this).serializer=i,o.do=!1,o}function fh(t,e,n,i,r){var o=this;return(o=Pu.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,r)||this).serializer=i,o}function ph(t,e,n,i,r,o){this.ss=t,this.Qr=n,this.jr=i,this.Gr=r,this.listener=o,this.state=0,this.zr=0,this.Kr=null,this.stream=null,this.Os=new Ja(t,e)}function dh(t,e){this.Ur=t,this.Br=e}function yh(t,e){this.Ur=t,this.Br=e,this.type="FirstParty",this.user=bu.Dr}function vh(t){var e=this;this.Lr=null,this.currentUser=bu.UNAUTHENTICATED,this.Or=!1,this.qr=0,this.Nr=null,this.forceRefresh=!1,this.Lr=function(){e.qr++,e.currentUser=e.Mr(),e.Or=!0,e.Nr&&e.Nr(e.currentUser)},this.qr=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Lr):(this.Lr(null),t.get().then(function(t){e.auth=t,e.Lr&&e.auth.addAuthTokenListener(e.Lr)},function(){}))}function gh(){this.Nr=null}function mh(t){var e=this;return(e=Lu.call(this)||this).Au=t,e}function wh(){this.Ci=new Yi(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Tu=!1}Ju.du=(Object.defineProperty(wh.prototype,"readTime",{get:function(){return this.mu},set:function(t){this.mu=t},enumerable:!1,configurable:!0}),wh.prototype.Ki=function(t,e){this.Eu(),this.readTime=e,this.Ci.set(t.key,t)},wh.prototype.zi=function(t,e){this.Eu(),e&&(this.readTime=e),this.Ci.set(t,null)},wh.prototype.Ln=function(t,e){this.Eu();var n=this.Ci.get(e);return void 0!==n?ja.resolve(n):this.Iu(t,e)},wh.prototype.getEntries=function(t,e){return this.Ru(t,e)},wh.prototype.apply=function(t){return this.Eu(),this.Tu=!0,this.Jh(t)},wh.prototype.Eu=function(){},n(mh,Lu=wh),mh.prototype.Jh=function(n){var i=this,r=[];return this.Ci.forEach(function(t,e){e?r.push(i.Au.Ki(n,e,i.readTime)):i.Au.zi(t)}),ja.Sn(r)},mh.prototype.Iu=function(t,e){return this.Au.Ln(t,e)},mh.prototype.Ru=function(t,e){return this.Au.getEntries(t,e)},mh);var bh,Eh,Ih=(Fh.prototype.ge=function(t,n){return this.Pu.forEach(function(t,e){return n(e)}),ja.resolve()},Fh.prototype.Mi=function(t){return ja.resolve(this.lastRemoteSnapshotVersion)},Fh.prototype.gu=function(t){return ja.resolve(this.Vu)},Fh.prototype.hr=function(t){return this.highestTargetId=this.yu.next(),ja.resolve(this.highestTargetId)},Fh.prototype.Xi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Vu&&(this.Vu=e),ja.resolve()},Fh.prototype.vu=function(t){this.Pu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.yu=new eu(e),this.highestTargetId=e),t.sequenceNumber>this.Vu&&(this.Vu=t.sequenceNumber)},Fh.prototype.ar=function(t,e){return this.vu(e),this.targetCount+=1,ja.resolve()},Fh.prototype.Gi=function(t,e){return this.vu(e),ja.resolve()},Fh.prototype.bu=function(t,e){return this.Pu.delete(e.target),this.pu.Vr(e.targetId),--this.targetCount,ja.resolve()},Fh.prototype.Su=function(n,i,r){var o=this,s=0,a=[];return this.Pu.forEach(function(t,e){e.sequenceNumber<=i&&null===r.get(e.targetId)&&(o.Pu.delete(t),a.push(o.Cu(n,e.targetId)),s++)}),ja.Sn(a).next(function(){return s})},Fh.prototype.Du=function(t){return ja.resolve(this.targetCount)},Fh.prototype.or=function(t,e){var n=this.Pu.get(e)||null;return ja.resolve(n)},Fh.prototype.Wi=function(t,e,n){return this.pu.Rr(e,n),ja.resolve()},Fh.prototype.Bi=function(e,t,n){this.pu.Pr(t,n);var i=this.persistence.Yi,r=[];return i&&t.forEach(function(t){r.push(i.uu(e,t))}),ja.Sn(r)},Fh.prototype.Cu=function(t,e){return this.pu.Vr(e),ja.resolve()},Fh.prototype.lr=function(t,e){var n=this.pu.yr(e);return ja.resolve(n)},Fh.prototype.gr=function(t,e){return ja.resolve(this.pu.gr(e))},Fh),Th=(qh.prototype.start=function(){return Promise.resolve()},qh.prototype.oh=function(){return this.$u=!1,Promise.resolve()},Object.defineProperty(qh.prototype,"xu",{get:function(){return this.$u},enumerable:!1,configurable:!0}),qh.prototype.Lu=function(){},qh.prototype.Ou=function(){},qh.prototype.Ai=function(){return this.Nn},qh.prototype.wi=function(t){var e=this.Fu[t.Sr()];return e||(e=new $u(this.Nn,this.Yi),this.Fu[t.Sr()]=e),e},qh.prototype.Ii=function(){return this.Ei},qh.prototype.mi=function(){return this.Dn},qh.prototype.runTransaction=function(t,e,n){var i=this;Si("MemoryPersistence","Starting transaction:",t);var r=new Ah(this.Nu.next());return this.Yi.qu(),n(r).next(function(t){return i.Yi.Mu(r).next(function(){return t})}).vn().then(function(t){return r.Uu(),t})},qh.prototype.Bu=function(e,n){return ja.Cn(Object.values(this.Fu).map(function(t){return function(){return t.gr(e,n)}}))},qh),Ah=(xh.prototype.Qu=function(t){this.Wu.push(t)},xh.prototype.Uu=function(){this.Wu.forEach(function(t){return t()})},n(Mh,Eh=xh),Mh),Nh=(Uh.zu=function(t){return new Uh(t)},Object.defineProperty(Uh.prototype,"Ku",{get:function(){if(this.Gu)return this.Gu;throw Li()},enumerable:!1,configurable:!0}),Uh.prototype.tr=function(t,e,n){return this.ju.tr(n,e),this.Ku.delete(n),ja.resolve()},Uh.prototype.er=function(t,e,n){return this.ju.er(n,e),this.Ku.add(n),ja.resolve()},Uh.prototype.uu=function(t,e){return this.Ku.add(e),ja.resolve()},Uh.prototype.removeTarget=function(t,e){var n=this;this.ju.Vr(e.targetId).forEach(function(t){return n.Ku.add(t)});var i=this.persistence.Ii();return i.lr(t,e.targetId).next(function(t){t.forEach(function(t){return n.Ku.add(t)})}).next(function(){return i.bu(t,e)})},Uh.prototype.qu=function(){this.Gu=new Set},Uh.prototype.Mu=function(t){var n=this,i=this.persistence.mi().Fi();return ja.forEach(this.Ku,function(e){return n.Hu(t,e).next(function(t){t||i.zi(e)})}).next(function(){return n.Gu=null,i.apply(t)})},Uh.prototype.Hi=function(t,e){var n=this;return this.Hu(t,e).next(function(t){t?n.Ku.delete(e):n.Ku.add(e)})},Uh.prototype.ku=function(t){return 0},Uh.prototype.Hu=function(t,e){var n=this;return ja.Cn([function(){return ja.resolve(n.ju.gr(e))},function(){return n.persistence.Ii().gr(t,e)},function(){return n.persistence.Bu(t,e)}])},Uh),_h=(Ch.prototype.uo=function(t){this.Ju=t},Ch.prototype.io=function(t){this.Zu=t},Ch.prototype.onMessage=function(t){this.tc=t},Ch.prototype.close=function(){this.Xu()},Ch.prototype.send=function(t){this.Yu(t)},Ch.prototype.ec=function(){this.Ju()},Ch.prototype.nc=function(t){this.Zu(t)},Ch.prototype.sc=function(t){this.tc(t)},Ch),Rh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Oh=(Vh.prototype.Po=function(e,t,n,i){var r=this.hc(e,t);Si("RestConnection","Sending: ",r,n);var o={};return this.ac(o,i),this.uc(e,r,o,n).then(function(t){return Si("RestConnection","Received: ",t),t},function(t){throw ki("RestConnection",e+" failed with error: ",t,"url: ",r,"request:",n),t})},Vh.prototype.Vo=function(t,e,n,i){return this.Po(t,e,n,i)},Vh.prototype.ac=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.17.2",t["Content-Type"]="text/plain",e)for(var n in e.Fr)e.Fr.hasOwnProperty(n)&&(t[n]=e.Fr[n])},Vh.prototype.hc=function(t,e){var n=Rh[t];return this.rc+"/v1/"+e+":"+n},n(Lh,bh=Vh),Lh.prototype.uc=function(u,e,n,i){return new Promise(function(o,s){var a=new Ai;a.listenOnce(Ii.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Ei.NO_ERROR:var t=a.getResponseJson();Si("Connection","XHR received:",JSON.stringify(t)),o(t);break;case Ei.TIMEOUT:Si("Connection",'RPC "'+u+'" timed out'),s(new Qi(Xi.DEADLINE_EXCEEDED,"Request time out"));break;case Ei.HTTP_ERROR:var e,n,i=a.getStatus();Si("Connection",'RPC "'+u+'" failed with status:',i,"response text:",a.getResponseText()),0<i?(e=a.getResponseJson().error)&&e.status&&e.message?(r=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(Xi).indexOf(r)?r:Xi.UNKNOWN,s(new Qi(n,e.message))):s(new Qi(Xi.UNKNOWN,"Server responded with status "+a.getStatus())):s(new Qi(Xi.UNAVAILABLE,"Connection failed."));break;default:Li()}}finally{Si("Connection",'RPC "'+u+'" completed.')}var r});var t=JSON.stringify(i);a.send(e,"POST",t,n,15)})},Lh.prototype.co=function(t,e){var n,i,r=[this.rc,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=bi(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.ac(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||0<=(i=p()).indexOf("MSIE ")||0<=i.indexOf("Trident/")||0<=p().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");function u(t,e){h.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}Si("Connection","Creating WebChannel: "+a,s);var h=o.createWebChannel(a,s),c=!1,l=!1,f=new _h({Yu:function(t){l?Si("Connection","Not sending because WebChannel is closed:",t):(c||(Si("Connection","Opening WebChannel transport."),h.open(),c=!0),Si("Connection","WebChannel sending:",t),h.send(t))},Xu:function(){return h.close()}});return u(Ti.EventType.OPEN,function(){l||Si("Connection","WebChannel transport opened.")}),u(Ti.EventType.CLOSE,function(){l||(l=!0,Si("Connection","WebChannel transport closed"),f.nc())}),u(Ti.EventType.ERROR,function(t){l||(l=!0,ki("Connection","WebChannel transport errored:",t),f.nc(new Qi(Xi.UNAVAILABLE,"The operation could not be completed")))}),u(Ti.EventType.MESSAGE,function(t){var e,n,i,r,o,s;l||(Vi(!!(n=t.data[0])),(i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(Si("Connection","WebChannel received error:",i),r=i.status,o=function(){var t=Ir[r];if(void 0!==t)return Rr(t)}(),s=i.message,void 0===o&&(o=Xi.INTERNAL,s="Unknown error status: "+r+" with message "+i.message),l=!0,f.nc(new Qi(o,s)),h.close()):(Si("Connection","WebChannel received:",n),f.sc(n)))}),setTimeout(function(){f.ec()},0),f},Lh),Sh=(Ph.prototype.Bo=function(t){this.dc.push(t)},Ph.prototype.oh=function(){window.removeEventListener("online",this.cc),window.removeEventListener("offline",this._c)},Ph.prototype.wc=function(){window.addEventListener("online",this.cc),window.addEventListener("offline",this._c)},Ph.prototype.lc=function(){Si("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.dc;t<e.length;t++)(0,e[t])(0)},Ph.prototype.fc=function(){Si("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.dc;t<e.length;t++)(0,e[t])(1)},Ph.Tc=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Ph),Dh=(kh.prototype.Bo=function(t){},kh.prototype.oh=function(){},kh);function kh(){}function Ph(){var t=this;this.cc=function(){return t.lc()},this._c=function(){return t.fc()},this.dc=[],this.wc()}function Lh(t){var e=this;return(e=bh.call(this,t)||this).forceLongPolling=t.forceLongPolling,e}function Vh(t){this.ic=t,this.s=t.s;var e=t.ssl?"https":"http";this.rc=e+"://"+t.host,this.oc="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}function Ch(t){this.Yu=t.Yu,this.Xu=t.Xu}function Uh(t){this.persistence=t,this.ju=new mu,this.Gu=null}function Mh(t){var e=this;return(e=Eh.call(this)||this).Qi=t,e}function xh(){this.Wu=[]}function qh(t){var e=this;this.Fu={},this.Nu=new za(0),this.$u=!1,this.$u=!0,this.Yi=t(this),this.Ei=new Ih(this),this.Nn=new Za,this.Dn=new Ju(this.Nn,function(t){return e.Yi.ku(t)})}function Fh(t){this.persistence=t,this.Pu=new Yi(vr,gr),this.lastRemoteSnapshotVersion=Ji.min(),this.highestTargetId=0,this.Vu=0,this.pu=new mu,this.targetCount=0,this.yu=eu.As()}function jh(t){return new ko(t,!0)}var Gh="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Bh=(Kh.prototype.initialize=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.aa=this.mc(e),this.persistence=this.Ec(e),[4,this.persistence.start()];case 1:return t.sent(),this.Ic=this.Rc(e),this.ko=this.Ac(e),[2]}})})},Kh.prototype.Rc=function(t){return null},Kh.prototype.Ac=function(t){return e=this.persistence,n=new Qu,i=t.Pc,new yu(e,n,i);var e,n,i},Kh.prototype.Ec=function(t){if(t.pc.Vc)throw new Qi(Xi.FAILED_PRECONDITION,Gh);return new Th(Nh.zu)},Kh.prototype.mc=function(t){return new Hu},Kh.prototype.terminate=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ic&&this.Ic.stop(),[4,this.aa.oh()];case 1:return t.sent(),[4,this.persistence.oh()];case 2:return t.sent(),[2]}})})},Kh.prototype.clearPersistence=function(t,e){throw new Qi(Xi.FAILED_PRECONDITION,Gh)},Kh),zh=(Hh.prototype.initialize=function(i,r){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:return this.ko?[2]:(this.ko=i.ko,this.aa=i.aa,this.xo=this.yc(r),[4,this.gc(r)]);case 1:return e=t.sent(),this.xo.start(e),this.ha=this.vc(r),this.lh=this.bc(r),this.Sc=this.Cc(r),this.aa.yo=function(t){return n.lh.na(t,1)},this.ha.lh=this.lh,[4,this.ha.start()];case 2:return t.sent(),[4,this.ha.gh(this.lh.Aa)];case 3:return t.sent(),[2]}})})},Hh.prototype.gc=function(t){return e=t.ic,Promise.resolve(new Oh(e));var e},Hh.prototype.Cc=function(t){return new Yu(this.lh)},Hh.prototype.yc=function(t){var e,n=jh(t.ic.s);return e=t.credentials,new ju(e,n)},Hh.prototype.vc=function(t){var e=this;return new Bu(this.ko,this.xo,t.Vs,function(t){return e.lh.na(t,0)},new(Sh.Tc()?Sh:Dh))},Hh.prototype.bc=function(t){return e=this.ko,n=this.ha,i=this.xo,r=this.aa,o=t.Pc,s=t.ua,a=!t.pc.Vc||!t.pc.synchronizeTabs,u=new Wu(e,n,i,r,o,s),a&&(u.Ra=!0),u;var e,n,i,r,o,s,a,u},Hh.prototype.terminate=function(){return this.ha.oh()},Hh);function Hh(){}function Kh(){}function Wh(r){return function(){if("object"==typeof r&&null!==r)for(var t=r,e=0,n=["next","error","complete"];e<n.length;e++){var i=n[e];if(i in t&&"function"==typeof t[i])return 1}}()}var Yh=(Xh.prototype.next=function(t){this.observer.next&&this.Dc(this.observer.next,t)},Xh.prototype.error=function(t){this.observer.error?this.Dc(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Xh.prototype.Fc=function(){this.muted=!0},Xh.prototype.Dc=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Xh);function Xh(t){this.observer=t,this.muted=!1}function Qh(t,e){if(0!==e.length)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+dc(e.length,"argument")+".")}function $h(t,e,n){if(e.length!==n)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires "+dc(n,"argument")+", but was called with "+dc(e.length,"argument")+".")}function Jh(t,e,n){if(e.length<n)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires at least "+dc(n,"argument")+", but was called with "+dc(e.length,"argument")+".")}function Zh(t,e,n,i){if(e.length<n||e.length>i)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+i+" arguments, but was called with "+dc(e.length,"argument")+".")}function tc(t,e,n,i){sc(t,e,pc(n)+" argument",i)}function ec(t,e,n,i){void 0!==i&&tc(t,e,n,i)}function nc(t,e,n,i){sc(t,e,n+" option",i)}function ic(t,e,n,i){void 0!==i&&nc(t,e,n,i)}function rc(t,e,n,i,u){void 0!==i&&function(t,e,n){for(var i=[],r=0,o=u;r<o.length;r++){var s=o[r];if(s===n)return;i.push(uc(s))}var a=uc(n);throw new Qi(Xi.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+i.join(", "))}(t,n,i)}function oc(t,e,n,i){if(!e.some(function(t){return t===i}))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid value "+uc(i)+" provided to function "+t+"() for its "+pc(n)+" argument. Acceptable values: "+e.join(", "));return i}function sc(t,e,n,i){if(!("object"===e?ac(i):"non-empty string"===e?"string"==typeof i&&""!==i:typeof i===e)){var r=uc(i);throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function ac(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function uc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Li();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function hc(t,e,n){if(void 0===n)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+pc(e)+" argument, but it was undefined.")}function cc(n,t,i){Bi(t,function(t,e){if(i.indexOf(t)<0)throw new Qi(Xi.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+i.join(", "))})}function lc(t,e,n,i){var r=uc(i);return new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires its "+pc(n)+" argument to be a "+e+", but it was: "+r)}function fc(t,e,n){if(n<=0)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires its "+pc(e)+" argument to be a positive number, but it was: "+n+".")}function pc(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function dc(t,e){return t+" "+e+(1===t?"":"s")}function yc(){if("undefined"==typeof Uint8Array)throw new Qi(Xi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function vc(){if("undefined"==typeof atob)throw new Qi(Xi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var gc,mc,wc=(Rc.fromBase64String=function(t){$h("Blob.fromBase64String",arguments,1),tc("Blob.fromBase64String","string",1,t),vc();try{return new Rc(wr.fromBase64String(t))}catch(t){throw new Qi(Xi.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Rc.fromUint8Array=function(t){if($h("Blob.fromUint8Array",arguments,1),yc(),!(t instanceof Uint8Array))throw lc("Blob.fromUint8Array","Uint8Array",1,t);return new Rc(wr.fromUint8Array(t))},Rc.prototype.toBase64=function(){return $h("Blob.toBase64",arguments,0),vc(),this.Nc.toBase64()},Rc.prototype.toUint8Array=function(){return $h("Blob.toUint8Array",arguments,0),yc(),this.Nc.toUint8Array()},Rc.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Rc.prototype.isEqual=function(t){return this.Nc.isEqual(t.Nc)},Rc),bc=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Qi(Xi.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(tc("FieldPath","string",e,t[e]),0===t[e].length)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.$c=new nr(t)},Ec=(n(_c,mc=bc),_c.documentId=function(){return new _c(nr.q().N())},_c.prototype.isEqual=function(t){if(!(t instanceof _c))throw lc("isEqual","FieldPath",1,t);return this.$c.isEqual(t.$c)},_c),Ic=new RegExp("[~\\*/\\[\\]]"),Tc=function(){this.kc=this},Ac=(n(Nc,gc=Tc),Nc.prototype.Lc=function(t){if(2!==t.Oc)throw 1===t.Oc?t.qc(this.xc+"() can only appear at the top level of your update data"):t.qc(this.xc+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},Nc.prototype.isEqual=function(t){return t instanceof Nc},Nc);function Nc(t){var e=this;return(e=gc.call(this)||this).xc=t,e}function _c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mc.call(this,t)||this}function Rc(t){vc(),this.Nc=t}function Oc(t,e,n){return new nl({Oc:3,Mc:e.settings.Mc,methodName:t.xc,Uc:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var Sc,Dc,kc,Pc,Lc,Vc,Cc=(n(tl,Vc=Tc),tl.prototype.Lc=function(t){return new fs(t.path,new Jo)},tl.prototype.isEqual=function(t){return t instanceof tl},tl),Uc=(n(Zc,Lc=Tc),Zc.prototype.Lc=function(t){var e=Oc(this,t,!0),n=this.Bc.map(function(t){return cl(t,e)}),i=new Zo(n);return new fs(t.path,i)},Zc.prototype.isEqual=function(t){return this===t},Zc),Mc=(n(Jc,Pc=Tc),Jc.prototype.Lc=function(t){var e=Oc(this,t,!0),n=this.Bc.map(function(t){return cl(t,e)}),i=new rs(n);return new fs(t.path,i)},Jc.prototype.isEqual=function(t){return this===t},Jc),xc=(n($c,kc=Tc),$c.prototype.Lc=function(t){var e=new us(t.serializer,Vo(t.serializer,this.Wc));return new fs(t.path,e)},$c.prototype.isEqual=function(t){return this===t},$c),qc=(n(Qc,Dc=Tc),Qc.delete=function(){return Qh("FieldValue.delete",arguments),new Fc(new Ac("FieldValue.delete"))},Qc.serverTimestamp=function(){return Qh("FieldValue.serverTimestamp",arguments),new Fc(new Cc("FieldValue.serverTimestamp"))},Qc.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jh("FieldValue.arrayUnion",arguments,1),new Fc(new Uc("FieldValue.arrayUnion",t))},Qc.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jh("FieldValue.arrayRemove",arguments,1),new Fc(new Mc("FieldValue.arrayRemove",t))},Qc.increment=function(t){return tc("FieldValue.increment","number",1,t),$h("FieldValue.increment",arguments,1),new Fc(new xc("FieldValue.increment",t))},Qc),Fc=(n(Xc,Sc=qc),Xc.prototype.Lc=function(t){return this.kc.Lc(t)},Xc.prototype.isEqual=function(t){return t instanceof Xc&&this.kc.isEqual(t.kc)},Xc),jc=(Object.defineProperty(Yc.prototype,"latitude",{get:function(){return this.Qc},enumerable:!1,configurable:!0}),Object.defineProperty(Yc.prototype,"longitude",{get:function(){return this.jc},enumerable:!1,configurable:!0}),Yc.prototype.isEqual=function(t){return this.Qc===t.Qc&&this.jc===t.jc},Yc.prototype.T=function(t){return Mi(this.Qc,t.Qc)||Mi(this.jc,t.jc)},Yc),Gc=/^__.*__$/,Bc=function(t,e,n){this.Gc=t,this.zc=e,this.Kc=n},zc=(Wc.prototype.Hc=function(t,e){var n=[];return null!==this.qe?n.push(new Rs(t,this.data,this.qe,e)):n.push(new _s(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ps(t,this.fieldTransforms)),n},Wc),Hc=(Kc.prototype.Hc=function(t,e){var n=[new Rs(t,this.data,this.qe,e)];return 0<this.fieldTransforms.length&&n.push(new Ps(t,this.fieldTransforms)),n},Kc);function Kc(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function Wc(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function Yc(t,e){if($h("GeoPoint",arguments,2),tc("GeoPoint","number",1,t),tc("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Qi(Xi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Qi(Xi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Qc=t,this.jc=e}function Xc(t){var e=this;return(e=Sc.call(this)||this).kc=t,e.xc=t.xc,e}function Qc(){return Dc.call(this)||this}function $c(t,e){var n=this;return(n=kc.call(this)||this).xc=t,n.Wc=e,n}function Jc(t,e){var n=this;return(n=Pc.call(this)||this).xc=t,n.Bc=e,n}function Zc(t,e){var n=this;return(n=Lc.call(this)||this).xc=t,n.Bc=e,n}function tl(t){var e=this;return(e=Vc.call(this)||this).xc=t,e}function el(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Li()}}var nl=(Object.defineProperty(ol.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(ol.prototype,"Oc",{get:function(){return this.settings.Oc},enumerable:!1,configurable:!0}),ol.prototype.Xc=function(t){return new ol(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},ol.prototype.Jc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Xc({path:n,Uc:!1});return i.Zc(t),i},ol.prototype.tl=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Xc({path:n,Uc:!1});return i.Yc(),i},ol.prototype.el=function(t){return this.Xc({path:void 0,Uc:!0})},ol.prototype.qc=function(t){return vl(t,this.settings.methodName,this.settings.nl||!1,this.path,this.settings.Mc)},ol.prototype.contains=function(e){return void 0!==this.qe.find(function(t){return e.C(t)})||void 0!==this.fieldTransforms.find(function(t){return e.C(t.field)})},ol.prototype.Yc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Zc(this.path.get(t))},ol.prototype.Zc=function(t){if(0===t.length)throw this.qc("Document fields must not be empty");if(el(this.Oc)&&Gc.test(t))throw this.qc('Document fields cannot begin and end with "__"')},ol),il=(rl.prototype.sl=function(t,e,n,i){return void 0===i&&(i=!1),new nl({Oc:t,methodName:e,Mc:n,path:nr.k(),Uc:!1,nl:i},this.s,this.serializer,this.ignoreUndefinedProperties)},rl);function rl(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||jh(t)}function ol(t,e,n,i,r,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Yc(),this.fieldTransforms=r||[],this.qe=o||[]}function sl(t,e,n,i,r,o){void 0===o&&(o={});var s=t.sl(o.merge||o.mergeFields?2:0,e,n,r);pl("Data must be an object, but it was:",s,i);var a,u,h=ll(i,s);if(o.merge)a=new ps(s.qe),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof bc)d=p.$c;else{if("string"!=typeof p)throw Li();d=yl(e,p,n)}if(!s.contains(d))throw new Qi(Xi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");gl(c,d)||c.push(d)}a=new ps(c),u=s.fieldTransforms.filter(function(t){return a.Qe(t.field)})}else a=null,u=s.fieldTransforms;return new zc(new qs(h),a,u)}function al(t,o,s,e){var a=t.sl(1,o,s);pl("Data must be an object, but it was:",a,e);var u=[],h=new Fs;Bi(e,function(t,e){var n,i=yl(o,t,s),r=a.tl(i);e instanceof Tc&&e.kc instanceof Ac?u.push(i):null!=(n=cl(e,r))&&(u.push(i),h.set(i,n))});var n=new ps(u);return new Hc(h.ze(),n,a.fieldTransforms)}function ul(t,e,n,i,r,o){var s=t.sl(1,e,n),a=[dl(e,i,n)],u=[r];if(o.length%2!=0)throw new Qi(Xi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)a.push(dl(e,o[h])),u.push(o[h+1]);for(var c,l,f,p,d=[],y=new Fs,v=a.length-1;0<=v;--v){gl(d,a[v])||(c=a[v],l=u[v],f=s.tl(c),l instanceof Tc&&l.kc instanceof Ac?d.push(c):null!=(p=cl(l,f))&&(d.push(c),y.set(c,p)))}var g=new ps(d);return new Hc(y.ze(),g,s.fieldTransforms)}function hl(t,e,n,i){return void 0===i&&(i=!1),cl(n,t.sl(i?4:3,e))}function cl(s,t){if(fl(s))return pl("Unsupported field value:",t,s),ll(s,t);if(s instanceof Tc)return function(t,e){if(!el(e.Oc))throw e.qc(t.xc+"() can only be used with update() and set()");if(!e.path)throw e.qc(t.xc+"() is not currently supported inside arrays");var n=t.Lc(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.qe.push(t.path),s instanceof Array){if(t.settings.Uc&&4!==t.Oc)throw t.qc("Nested arrays are not supported");return function(t){for(var e=[],n=0,i=0,r=s;i<r.length;i++){var o=cl(r[i],t.el(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Vo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$i.fromDate(t);return{timestampValue:Co(e.serializer,n)}}if(t instanceof $i){var i=new $i(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Co(e.serializer,i)}}if(t instanceof jc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wc)return{bytesValue:Uo(e.serializer,t)};if(t instanceof Bc){var r=e.s,o=t.Gc;if(!o.isEqual(r))throw e.qc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:xo(t.Gc||e.s,t.zc.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.qc("Unsupported field value: "+uc(t))}(s,t)}function ll(t,i){var r={};return zi(t)?i.path&&0<i.path.length&&i.qe.push(i.path):Bi(t,function(t,e){var n=cl(e,i.Jc(t));null!=n&&(r[t]=n)}),{mapValue:{fields:r}}}function fl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $i||t instanceof jc||t instanceof wc||t instanceof Bc||t instanceof Tc)}function pl(t,e,n){if(!fl(n)||!ac(n)){var i=uc(n);throw"an object"===i?e.qc(t+" a custom object"):e.qc(t+" "+i)}}function dl(t,e,n){if(e instanceof bc)return e.$c;if("string"==typeof e)return yl(t,e);throw vl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function yl(t,e,n){try{return function(e){if(0<=e.search(Ic))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ec.bind.apply(Ec,r([void 0],e.split("."))))}catch(t){throw new Qi(Xi.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).$c}catch(e){throw vl(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function vl(t,e,n,i,r){var o=i&&!i._(),s=void 0!==r,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+i),s&&(u+=" in document "+r),u+=")"),new Qi(Xi.INVALID_ARGUMENT,(a+=". ")+t+u)}function gl(t,e){return t.some(function(t){return t.isEqual(e)})}var ml=(Tl.prototype.al=function(i){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(this.ul(),0<this.mutations.length)throw new Qi(Xi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,u){return d(this,void 0,void 0,function(){var r,e,n,i,o,s;return y(this,function(t){switch(t.label){case 0:return e=Go((r=a).serializer)+"/documents",n={documents:u.map(function(t){return qo(r.serializer,t)})},[4,r.Vo("BatchGetDocuments",e,n)];case 1:return i=t.sent(),o=new Map,i.forEach(function(t){var e,n,i=(e=r.serializer,"found"in(n=t)?function(t,e){Vi(!!e.found),e.found.name,e.found.updateTime;var n=Fo(t,e.found.name),i=Mo(e.found.updateTime),r=new qs({mapValue:{fields:e.found.fields}});return new Xs(n,i,r,{})}(e,n):"missing"in n?function(t,e){Vi(!!e.missing),Vi(!!e.readTime);var n=Fo(t,e.missing),i=Mo(e.readTime);return new Qs(n,i)}(e,n):Li());o.set(i.key.toString(),i)}),s=[],[2,(u.forEach(function(t){var e=o.get(t.toString());Vi(!!e),s.push(e)}),s)]}})})}(this.xo,i)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Qs||t instanceof Xs?n.cl(t):Li()}),e)]}})})},Tl.prototype.set=function(t,e){this.write(e.Hc(t,this.Be(t))),this.hl.add(t)},Tl.prototype.update=function(t,e){try{this.write(e.Hc(t,this.ll(t)))}catch(t){this.ol=t}this.hl.add(t)},Tl.prototype.delete=function(t){this.write([new Ms(t,this.Be(t))]),this.hl.add(t)},Tl.prototype.commit=function(){return d(this,void 0,void 0,function(){var e,i=this;return y(this,function(t){switch(t.label){case 0:if(this.ul(),this.ol)throw this.ol;return e=this.il,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new ir(tr.$(e));i.mutations.push(new xs(n,i.Be(n)))}),[4,function(r,o){return d(this,void 0,void 0,function(){var e,n,i;return y(this,function(t){switch(t.label){case 0:return n=Go((e=r).serializer)+"/documents",i={writes:o.map(function(t){return zo(e.serializer,t)})},[4,e.Po("Commit",n,i)];case 1:return t.sent(),[2]}})})}(this.xo,this.mutations)];case 1:return t.sent(),this.rl=!0,[2]}})})},Tl.prototype.cl=function(t){var e;if(t instanceof Xs)e=t.version;else{if(!(t instanceof Qs))throw Li();e=Ji.min()}var n=this.il.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Qi(Xi.ABORTED,"Document version changed between two reads.")}else this.il.set(t.key.toString(),e)},Tl.prototype.Be=function(t){var e=this.il.get(t.toString());return!this.hl.has(t)&&e?vs.updateTime(e):vs.je()},Tl.prototype.ll=function(t){var e=this.il.get(t.toString());if(this.hl.has(t)||!e)return vs.exists(!0);if(e.isEqual(Ji.min()))throw new Qi(Xi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vs.updateTime(e)},Tl.prototype.write=function(t){this.ul(),this.mutations=this.mutations.concat(t)},Tl.prototype.ul=function(){},Tl),wl=(Il.prototype.run=function(){this.fl()},Il.prototype.fl=function(){var t=this;this.Os.fs(function(){return d(t,void 0,void 0,function(){var e,n,i=this;return y(this,function(t){return e=new ml(this.xo),(n=this.dl(e))&&n.then(function(t){i.Vs.Cs(function(){return e.commit().then(function(){i.gs.resolve(t)}).catch(function(t){i.wl(t)})})}).catch(function(t){i.wl(t)}),[2]})})})},Il.prototype.dl=function(t){try{var e=this.updateFunction(t);return!fr(e)&&e.catch&&e.then?e:(this.gs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.gs.reject(t),null}},Il.prototype.wl=function(t){var e=this;0<this._l&&this.Tl(t)?(--this._l,this.Vs.Cs(function(){return e.fl(),Promise.resolve()})):this.gs.reject(t)},Il.prototype.Tl=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!_r(e)},Il),bl=(El.prototype.start=function(t,e,n,i){var r=this;this.El(),this.ic=t;var o=new $a,s=!1;return this.credentials.kr(function(t){return s?void r.Vs.Gs(function(){return r.ha.yh(t)}):(s=!0,Si("FirestoreClient","Initializing. user=",t.uid),r.Il(e,n,i,t,o).then(r.ml.resolve,r.ml.reject))}),this.Vs.Cs(function(){return r.ml.promise}),o.promise},El.prototype.enableNetwork=function(){var t=this;return this.El(),this.Vs.enqueue(function(){return t.persistence.Ou(!0),t.ha.enableNetwork()})},El.prototype.Il=function(r,o,s,a,u){return d(this,void 0,void 0,function(){var e,n,i=this;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e={Vs:this.Vs,ic:this.ic,clientId:this.clientId,credentials:this.credentials,Pc:a,ua:100,pc:s},[4,r.initialize(e)];case 1:return t.sent(),[4,o.initialize(r,e)];case 2:return t.sent(),this.persistence=r.persistence,this.aa=r.aa,this.ko=r.ko,this.Ic=r.Ic,this.xo=o.xo,this.ha=o.ha,this.lh=o.lh,this.Rl=o.Sc,this.persistence.Lu(function(){return d(i,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),u.resolve(),[3,4];case 3:if(n=t.sent(),u.reject(n),!this.Al(n))throw n;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),this.Il(new Bh,new zh,{Vc:!1},a,u))];case 4:return[2]}})})},El.prototype.Al=function(t){return"FirebaseError"===t.name?t.code===Xi.FAILED_PRECONDITION||t.code===Xi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},El.prototype.El=function(){if(this.Vs.Ms)throw new Qi(Xi.FAILED_PRECONDITION,"The client has already been terminated.")},El.prototype.disableNetwork=function(){var t=this;return this.El(),this.Vs.enqueue(function(){return t.persistence.Ou(!1),t.ha.disableNetwork()})},El.prototype.terminate=function(){var t=this;return this.Vs.js(function(){return d(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ic&&this.Ic.stop(),[4,this.ha.oh()];case 1:return t.sent(),[4,this.aa.oh()];case 2:return t.sent(),[4,this.persistence.oh()];case 3:return t.sent(),this.credentials.xr(),[2]}})})})},El.prototype.waitForPendingWrites=function(){var t=this;this.El();var e=new $a;return this.Vs.Cs(function(){return t.lh.Fa(e)}),e.promise},El.prototype.listen=function(t,e,n){var i=this;this.El();var r=new Yh(n),o=new Xu(t,r,e);return this.Vs.Cs(function(){return i.Rl.listen(o)}),function(){r.Fc(),i.Vs.Cs(function(){return i.Rl.ah(o)})}},El.prototype.Pl=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.El(),[4,this.ml.promise];case 1:return[2,(t.sent(),function(n,o,s){return d(this,void 0,void 0,function(){var r,e=this;return y(this,function(t){switch(t.label){case 0:return r=new $a,[4,n.enqueue(function(){return d(e,void 0,void 0,function(){var e,n,i;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.ir(s)];case 1:return(e=t.sent())instanceof Xs?r.resolve(e):e instanceof Qs?r.resolve(null):r.reject(new Qi(Xi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),i=fu(n,"Failed to get document '"+s+" from cache"),r.reject(i),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),r.promise)]}})})}(this.Vs,this.ko,e))]}})})},El.prototype.Vl=function(a,u){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.El(),[4,this.ml.promise];case 1:return[2,(t.sent(),e=this.Vs,n=this.Rl,i=a,r=u,o=new $a,s=Al(e,n,ra(i.path),{includeMetadataChanges:!0,Ja:!0},{next:function(t){s();var e=t.docs.has(i);!e&&t.fromCache?o.reject(new Qi(Xi.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?o.reject(new Qi(Xi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)]}var e,n,i,r,o,s})})},El.prototype.pl=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.El(),[4,this.ml.promise];case 1:return[2,(t.sent(),function(n,u,h){return d(this,void 0,void 0,function(){var a,e=this;return y(this,function(t){switch(t.label){case 0:return a=new $a,[4,n.enqueue(function(){return d(e,void 0,void 0,function(){var e,n,i,r,o,s;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.cr(h,!0)];case 1:return e=t.sent(),n=new Ku(h,e._r),i=n.Kh(e.documents),r=n.Jh(i,!1),a.resolve(r.snapshot),[3,3];case 2:return o=t.sent(),s=fu(o,"Failed to execute query '"+h+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})}(this.Vs,this.ko,e))]}})})},El.prototype.yl=function(a,u){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.El(),[4,this.ml.promise];case 1:return[2,(t.sent(),e=this.Vs,n=this.Rl,i=a,r=u,o=new $a,s=Al(e,n,i,{includeMetadataChanges:!0,Ja:!0},{next:function(t){s(),t.fromCache&&r&&"server"===r.source?o.reject(new Qi(Xi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)]}var e,n,i,r,o,s})})},El.prototype.write=function(t){var e=this;this.El();var n=new $a;return this.Vs.Cs(function(){return e.lh.write(t,n)}),n.promise},El.prototype.s=function(){return this.ic.s},El.prototype.Qa=function(t){var e=this;this.El();var n=new Yh(t);return this.Vs.Cs(function(){return d(e,void 0,void 0,function(){return y(this,function(t){return[2,this.Rl.Qa(n)]})})}),function(){n.Fc(),e.Vs.Cs(function(){return d(e,void 0,void 0,function(){return y(this,function(t){return[2,this.Rl.ja(n)]})})})}},Object.defineProperty(El.prototype,"gl",{get:function(){return this.Vs.Ms},enumerable:!1,configurable:!0}),El.prototype.transaction=function(t){var e=this;this.El();var n=new $a;return this.Vs.Cs(function(){return new wl(e.Vs,e.xo,t,n).run(),Promise.resolve()}),n.promise},El);function El(t,e){this.credentials=t,this.Vs=e,this.clientId=Ci.t(),this.ml=new $a}function Il(t,e,n,i){this.Vs=t,this.xo=e,this.updateFunction=n,this.gs=i,this._l=5,this.Os=new Ja(this.Vs,"transaction_retry")}function Tl(t){this.xo=t,this.il=new Map,this.mutations=[],this.rl=!1,this.ol=null,this.hl=new Set}function Al(t,e,n,i,r){var o=new Yh(r),s=new Xu(n,o,i);return t.Cs(function(){return e.listen(s)}),function(){o.Fc(),t.Cs(function(){return e.ah(s)})}}var Nl,_l,Rl=(Hl.prototype.Sl=function(t){switch(po(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Eo(t.integerValue||t.doubleValue);case 3:return this.Cl(t.timestampValue);case 4:return this.Dl(t);case 5:return t.stringValue;case 6:return new wc(Io(t.bytesValue));case 7:return this.Fl(t.referenceValue);case 8:return this.Nl(t.geoPointValue);case 9:return this.$l(t.arrayValue);case 10:return this.kl(t.mapValue);default:throw Li()}},Hl.prototype.kl=function(t){var n=this,i={};return Bi(t.fields||{},function(t,e){i[t]=n.Sl(e)}),i},Hl.prototype.Nl=function(t){return new jc(Eo(t.latitude),Eo(t.longitude))},Hl.prototype.$l=function(t){var e=this;return(t.values||[]).map(function(t){return e.Sl(t)})},Hl.prototype.Dl=function(t){switch(this.vl){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return co(n)?t(n):n}(t);return null==e?null:this.Sl(e);case"estimate":return this.Cl(lo(t));default:return null}},Hl.prototype.Cl=function(t){var e=bo(t),n=new $i(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},Hl.prototype.Fl=function(t){var e=tr.$(t);Vi(Wo(e));var n=new Fi(e.get(1),e.get(3)),i=new ir(e.p(5));return n.isEqual(this.s)||Di("Document "+i+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.bl(i)},Hl),Ol=pu.oi,Sl=(zl.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},zl),Dl=(Object.defineProperty(Bl.prototype,"Gl",{get:function(){return this.zl||(this.zl=new il(this.Gc,this.jl.ignoreUndefinedProperties)),this.zl},enumerable:!1,configurable:!0}),Bl.prototype.settings=function(t){$h("Firestore.settings",arguments,1),tc("Firestore.settings","object",1,t);var e=new Sl(t);if(this.Ul&&!this.jl.isEqual(e))throw new Qi(Xi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.jl=e).credentials&&(this.Ql=function(t){if(!t)return new Vu;switch(t.type){case"gapi":var e=t.Kl;return Vi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mu(e,t.Br||"0");case"provider":return t.Kl;default:throw new Qi(Xi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},Bl.prototype.enableNetwork=function(){return this.Ml(),this.Ul.enableNetwork()},Bl.prototype.disableNetwork=function(){return this.Ml(),this.Ul.disableNetwork()},Bl.prototype.enablePersistence=function(t){var e,n;if(this.Ul)throw new Qi(Xi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var i=!1,r=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Di("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),i=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,r=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,i&&r))throw new Qi(Xi.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Hl(this.xl,this.Ll,{Vc:!0,cacheSizeBytes:this.jl.cacheSizeBytes,synchronizeTabs:i,Yl:r})},Bl.prototype.clearPersistence=function(){return d(this,void 0,void 0,function(){var n,e=this;return y(this,function(t){if(void 0!==this.Ul&&!this.Ul.gl)throw new Qi(Xi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new $a,[2,(this.ql.Us(function(){return d(e,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.xl.clearPersistence(this.Gc,this.Wl)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},Bl.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Bl.prototype,"Xl",{get:function(){return this.Ml(),this.Ul.gl},enumerable:!1,configurable:!0}),Bl.prototype.waitForPendingWrites=function(){return this.Ml(),this.Ul.waitForPendingWrites()},Bl.prototype.onSnapshotsInSync=function(t){if(this.Ml(),Wh(t))return this.Ul.Qa(t);tc("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Ul.Qa(e)},Bl.prototype.Ml=function(){return this.Ul||this.Hl(new Bh,new zh,{Vc:!1}),this.Ul},Bl.prototype.Jl=function(){return new qi(this.Gc,this.Wl,this.jl.host,this.jl.ssl,this.jl.forceLongPolling)},Bl.prototype.Hl=function(t,e,n){var i=this.Jl();return this.Ul=new bl(this.Ql,this.ql),this.Ul.start(i,t,e,n)},Bl.Bl=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Qi(Xi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Qi(Xi.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Fi(n)},Object.defineProperty(Bl.prototype,"app",{get:function(){if(!this.Ol)throw new Qi(Xi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Ol},enumerable:!1,configurable:!0}),Bl.prototype.collection=function(t){return $h("Firestore.collection",arguments,1),tc("Firestore.collection","non-empty string",1,t),this.Ml(),new Zl(tr.$(t),this,null)},Bl.prototype.doc=function(t){return $h("Firestore.doc",arguments,1),tc("Firestore.doc","non-empty string",1,t),this.Ml(),Ll.Zl(tr.$(t),this,null)},Bl.prototype.collectionGroup=function(t){if($h("Firestore.collectionGroup",arguments,1),tc("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Ml(),new $l((e=t,new na(tr.k(),e)),this,null);var e},Bl.prototype.runTransaction=function(e){var n=this;return $h("Firestore.runTransaction",arguments,1),tc("Firestore.runTransaction","function",1,e),this.Ml().transaction(function(t){return e(new kl(n,t))})},Bl.prototype.batch=function(){return this.Ml(),new Pl(this)},Object.defineProperty(Bl,"logLevel",{get:function(){switch(Oi()){case a.DEBUG:return"debug";case a.ERROR:return"error";case a.SILENT:return"silent";case a.WARN:return"warn";case a.INFO:return"info";case a.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),Bl.setLogLevel=function(t){$h("Firestore.setLogLevel",arguments,1),oc("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),Ri.setLogLevel(t)},Bl.prototype.t_=function(){return this.jl.timestampsInSnapshots},Bl),kl=(Gl.prototype.get=function(t){var n=this;$h("Transaction.get",arguments,1);var i=af("Transaction.get",t,this.e_);return this.n_.al([i.zc]).then(function(t){if(!t||1!==t.length)return Li();var e=t[0];if(e instanceof Qs)return new Cl(n.e_,i.zc,null,!1,!1,i.Kc);if(e instanceof Xs)return new Cl(n.e_,i.zc,e,!1,!1,i.Kc);throw Li()})},Gl.prototype.set=function(t,e,n){Zh("Transaction.set",arguments,2,3);var i=af("Transaction.set",t,this.e_);n=rf("Transaction.set",n);var r=uf(i.Kc,e,n),o=sl(this.e_.Gl,"Transaction.set",i.zc,r,null!==i.Kc,n);return this.n_.set(i.zc,o),this},Gl.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return r="string"==typeof e||e instanceof Ec?(Jh("Transaction.update",arguments,3),i=af("Transaction.update",t,this.e_),ul(this.e_.Gl,"Transaction.update",i.zc,e,n,o)):($h("Transaction.update",arguments,2),i=af("Transaction.update",t,this.e_),al(this.e_.Gl,"Transaction.update",i.zc,e)),this.n_.update(i.zc,r),this},Gl.prototype.delete=function(t){$h("Transaction.delete",arguments,1);var e=af("Transaction.delete",t,this.e_);return this.n_.delete(e.zc),this},Gl),Pl=(jl.prototype.set=function(t,e,n){Zh("WriteBatch.set",arguments,2,3),this.r_();var i=af("WriteBatch.set",t,this.e_);n=rf("WriteBatch.set",n);var r=uf(i.Kc,e,n),o=sl(this.e_.Gl,"WriteBatch.set",i.zc,r,null!==i.Kc,n);return this.s_=this.s_.concat(o.Hc(i.zc,vs.je())),this},jl.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.r_(),r="string"==typeof e||e instanceof Ec?(Jh("WriteBatch.update",arguments,3),i=af("WriteBatch.update",t,this.e_),ul(this.e_.Gl,"WriteBatch.update",i.zc,e,n,o)):($h("WriteBatch.update",arguments,2),i=af("WriteBatch.update",t,this.e_),al(this.e_.Gl,"WriteBatch.update",i.zc,e)),this.s_=this.s_.concat(r.Hc(i.zc,vs.exists(!0))),this},jl.prototype.delete=function(t){$h("WriteBatch.delete",arguments,1),this.r_();var e=af("WriteBatch.delete",t,this.e_);return this.s_=this.s_.concat(new Ms(e.zc,vs.je())),this},jl.prototype.commit=function(){return this.r_(),this.i_=!0,0<this.s_.length?this.e_.Ml().write(this.s_):Promise.resolve()},jl.prototype.r_=function(){if(this.i_)throw new Qi(Xi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},jl),Ll=(n(Fl,_l=Bc),Fl.Zl=function(t,e,n){if(t.length%2!=0)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new Fl(new ir(t),e,n)},Object.defineProperty(Fl.prototype,"id",{get:function(){return this.zc.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(Fl.prototype,"parent",{get:function(){return new Zl(this.zc.path.g(),this.firestore,this.Kc)},enumerable:!1,configurable:!0}),Object.defineProperty(Fl.prototype,"path",{get:function(){return this.zc.path.N()},enumerable:!1,configurable:!0}),Fl.prototype.collection=function(t){if($h("DocumentReference.collection",arguments,1),tc("DocumentReference.collection","non-empty string",1,t),!t)throw new Qi(Xi.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=tr.$(t);return new Zl(this.zc.path.child(e),this.firestore,null)},Fl.prototype.isEqual=function(t){if(!(t instanceof Fl))throw lc("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.zc.isEqual(t.zc)&&this.Kc===t.Kc},Fl.prototype.set=function(t,e){Zh("DocumentReference.set",arguments,1,2),e=rf("DocumentReference.set",e);var n=uf(this.Kc,t,e),i=sl(this.firestore.Gl,"DocumentReference.set",this.zc,n,null!==this.Kc,e);return this.Ul.write(i.Hc(this.zc,vs.je()))},Fl.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return n="string"==typeof t||t instanceof Ec?(Jh("DocumentReference.update",arguments,2),ul(this.firestore.Gl,"DocumentReference.update",this.zc,t,e,i)):($h("DocumentReference.update",arguments,1),al(this.firestore.Gl,"DocumentReference.update",this.zc,t)),this.Ul.write(n.Hc(this.zc,vs.exists(!0)))},Fl.prototype.delete=function(){return $h("DocumentReference.delete",arguments,0),this.Ul.write([new Ms(this.zc,vs.je())])},Fl.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Zh("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof r[a]||Wh(r[a])||(cc("DocumentReference.onSnapshot",s=r[a],["includeMetadataChanges"]),ic("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,h={includeMetadataChanges:s.includeMetadataChanges};Wh(r[a])?(u=r[a],r[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),r[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),r[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(tc("DocumentReference.onSnapshot","function",a,r[a]),ec("DocumentReference.onSnapshot","function",a+1,r[a+1]),ec("DocumentReference.onSnapshot","function",a+2,r[a+2]));var c={next:function(t){r[a]&&r[a](i.o_(t))},error:r[a+1],complete:r[a+2]};return this.Ul.listen(ra(this.zc.path),h,c)},Fl.prototype.get=function(t){var e=this;Zh("DocumentReference.get",arguments,0,1),sf("DocumentReference.get",t);var n=this.firestore.Ml();return t&&"cache"===t.source?n.Pl(this.zc).then(function(t){return new Cl(e.firestore,e.zc,t,!0,t instanceof Xs&&t.Ge,e.Kc)}):n.Vl(this.zc,t).then(function(t){return e.o_(t)})},Fl.prototype.withConverter=function(t){return new Fl(this.zc,this.firestore,t)},Fl.prototype.o_=function(t){var e=t.docs.get(this.zc);return new Cl(this.firestore,this.zc,e,t.fromCache,t.hasPendingWrites,this.Kc)},Fl),Vl=(ql.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},ql),Cl=(xl.prototype.data=function(t){var e=this;if(Zh("DocumentSnapshot.data",arguments,0,1),t=of("DocumentSnapshot.data",t),this.h_){if(this.Kc){var n=new Ul(this.e_,this.zc,this.h_,this.a_,this.u_,null);return this.Kc.fromFirestore(n,t)}return new Rl(this.e_.Gc,this.e_.t_(),t.serverTimestamps||"none",function(t){return new Ll(t,e.e_,null)}).Sl(this.h_.Ze())}},xl.prototype.get=function(t,e){var n=this;if(Zh("DocumentSnapshot.get",arguments,1,2),e=of("DocumentSnapshot.get",e),this.h_){var i=this.h_.data().field(dl("DocumentSnapshot.get",t,this.zc));if(null!==i)return new Rl(this.e_.Gc,this.e_.t_(),e.serverTimestamps||"none",function(t){return new Ll(t,n.e_,n.Kc)}).Sl(i)}},Object.defineProperty(xl.prototype,"id",{get:function(){return this.zc.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(xl.prototype,"ref",{get:function(){return new Ll(this.zc,this.e_,this.Kc)},enumerable:!1,configurable:!0}),Object.defineProperty(xl.prototype,"exists",{get:function(){return null!==this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(xl.prototype,"metadata",{get:function(){return new Vl(this.u_,this.a_)},enumerable:!1,configurable:!0}),xl.prototype.isEqual=function(t){if(!(t instanceof xl))throw lc("isEqual","DocumentSnapshot",1,t);return this.e_===t.e_&&this.a_===t.a_&&this.zc.isEqual(t.zc)&&(null===this.h_?null===t.h_:this.h_.isEqual(t.h_))&&this.Kc===t.Kc},xl),Ul=(n(Ml,Nl=Cl),Ml.prototype.data=function(t){return Nl.prototype.data.call(this,t)},Ml);function Ml(){return null!==Nl&&Nl.apply(this,arguments)||this}function xl(t,e,n,i,r,o){this.e_=t,this.zc=e,this.h_=n,this.a_=i,this.u_=r,this.Kc=o}function ql(t,e){this.hasPendingWrites=t,this.fromCache=e}function Fl(t,e,n){var i=this;return(i=_l.call(this,e.Gc,t,n)||this).zc=t,i.firestore=e,i.Kc=n,i.Ul=i.firestore.Ml(),i}function jl(t){this.e_=t,this.s_=[],this.i_=!1}function Gl(t,e){this.e_=t,this.n_=e}function Bl(t,e,n,i){var r=this;if(void 0===n&&(n=new Bh),void 0===i&&(i=new zh),this.xl=n,this.Ll=i,this.Ol=null,this.ql=new hu,this.INTERNAL={delete:function(){return d(r,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ml(),[4,this.Ul.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var o=t;this.Ol=o,this.Gc=Bl.Bl(o),this.Wl=o.name,this.Ql=new Cu(e)}else{var s=t;if(!s.projectId)throw new Qi(Xi.INVALID_ARGUMENT,"Must provide projectId");this.Gc=new Fi(s.projectId,s.database),this.Wl="[DEFAULT]",this.Ql=new Vu}this.jl=new Sl({})}function zl(t){var e,n,i,r;if(void 0===t.host){if(void 0!==t.ssl)throw new Qi(Xi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else nc("settings","non-empty string","host",t.host),this.host=t.host,ic("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(cc("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),ic("settings","object","credentials",t.credentials),this.credentials=t.credentials,ic("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),ic("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Di("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Di("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(i=t.ignoreUndefinedProperties)&&void 0!==i&&i,ic("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=pu.ai;else{if(t.cacheSizeBytes!==Ol&&t.cacheSizeBytes<pu.hi)throw new Qi(Xi.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+pu.hi);this.cacheSizeBytes=t.cacheSizeBytes}ic("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(r=t.experimentalForceLongPolling)&&void 0!==r&&r}function Hl(t,e,n,i){this.s=t,this.timestampsInSnapshots=e,this.vl=n,this.bl=i}function Kl(t,e,n){if("string"==typeof n){if(""===n)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!oa(e)&&-1!==n.indexOf("/"))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(tr.$(n));if(!ir.W(i))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return To(t,new ir(i))}if(n instanceof Bc)return To(t,n.zc);throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+uc(n)+".")}function Wl(t,e){if(!Array.isArray(t)||0===t.length)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}function Yl(t,e,n){if(!n.isEqual(e))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Xl(t){if(t.an()&&0===t.tn.length)throw new Qi(Xi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ql,$l=(nf.prototype.where=function(t,e,n){$h("Query.where",arguments,3),hc("Query.where",3,n);var i,r,o=oc("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),s=dl("Query.where",t),a=function(t,e,n,i,r,o,s){var a;if(r.O()){if("array-contains"===o||"array-contains-any"===o)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o){Wl(s,o);for(var u=[],h=0,c=s;h<c.length;h++){var l=c[h];u.push(Kl(i,t,l))}a={arrayValue:{values:u}}}else a=Kl(i,t,s)}else"in"!==o&&"array-contains-any"!==o||Wl(s,o),a=hl(n,e,s,"in"===o);var f=ga.create(r,o,a);return function(t,e){var n=["array-contains","array-contains-any"],i=["in","array-contains-any"],r=0<=n.indexOf(e.op),o=0<=i.indexOf(e.op);if(e.ln()){var s=t.cn();if(null!==s&&!s.isEqual(e.field))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+s.toString()+"' and '"+e.field.toString()+"'");var a=t.un();null!==a&&Yl(0,e.field,a)}else if(o||r){var u=null;if(o&&(u=t._n(i)),null===u&&r&&(u=t._n(n)),null!==u)throw u===e.op?new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+u.toString()+"' filters.")}}(t,f),f}(this.c_,"Query.where",this.firestore.Gl,this.firestore.Gc,s,o,n);return new nf((i=this.c_,r=i.filters.concat([a]),new na(i.path,i.collectionGroup,i.tn.slice(),r,i.limit,i.en,i.startAt,i.endAt)),this.firestore,this.Kc)},nf.prototype.orderBy=function(t,e){var n;if(Zh("Query.orderBy",arguments,1,2),ec("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Qi(Xi.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var i,r,o=dl("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var i,r,o,s=new xa(e,n);return r=s,null!==(i=t).un()||null!==(o=i.cn())&&Yl(0,o,r.field),s}(this.c_,o,n);return new nf((i=this.c_,r=i.tn.concat([s]),new na(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.en,i.startAt,i.endAt)),this.firestore,this.Kc)},nf.prototype.limit=function(t){return $h("Query.limit",arguments,1),tc("Query.limit","number",1,t),fc("Query.limit",1,t),new nf(ua(this.c_,t,"F"),this.firestore,this.Kc)},nf.prototype.limitToLast=function(t){return $h("Query.limitToLast",arguments,1),tc("Query.limitToLast","number",1,t),fc("Query.limitToLast",1,t),new nf(ua(this.c_,t,"L"),this.firestore,this.Kc)},nf.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Jh("Query.startAt",arguments,1);var i=this.l_("Query.startAt",t,e,!0);return new nf(ha(this.c_,i),this.firestore,this.Kc)},nf.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Jh("Query.startAfter",arguments,1);var i=this.l_("Query.startAfter",t,e,!1);return new nf(ha(this.c_,i),this.firestore,this.Kc)},nf.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Jh("Query.endBefore",arguments,1);var i=this.l_("Query.endBefore",t,e,!0);return new nf(ca(this.c_,i),this.firestore,this.Kc)},nf.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Jh("Query.endAt",arguments,1);var i=this.l_("Query.endAt",t,e,!1);return new nf(ca(this.c_,i),this.firestore,this.Kc)},nf.prototype.isEqual=function(t){if(!(t instanceof nf))throw lc("isEqual","Query",1,t);return this.firestore===t.firestore&&la(this.c_,t.c_)&&this.Kc===t.Kc},nf.prototype.withConverter=function(t){return new nf(this.c_,this.firestore,t)},nf.prototype.l_=function(c,t,e,n){if(hc(c,1,t),t instanceof Cl)return $h(c,r([t],e),1),function(t,e,n,i){if(!n)throw new Qi(Xi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var r=[],o=0,s=sa(t);o<s.length;o++){var a=s[o];if(a.field.O())r.push(To(e,n.key));else{var u=n.field(a.field);if(co(u))throw new Qi(Xi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var h=a.field.N();throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}r.push(u)}}return new Sa(r,i)}(this.c_,this.firestore.Gc,t.h_,n);var i=[t].concat(e);return function(t,e,n,i,r,o){var s=t.tn;if(r.length>s.length)throw new Qi(Xi.INVALID_ARGUMENT,"Too many arguments provided to "+i+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<r.length;u++){var h=r[u];if(s[u].field.O()){if("string"!=typeof h)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+i+"(), but got a "+typeof h);if(!oa(t)&&-1!==h.indexOf("/"))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+i+"() must be a plain document ID, but '"+h+"' contains a slash.");var c=t.path.child(tr.$(h));if(!ir.W(c))throw new Qi(Xi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+i+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var l=new ir(c);a.push(To(e,l))}else{var f=hl(n,i,h);a.push(f)}}return new Sa(a,o)}(this.c_,this.firestore.Gc,this.firestore.Gl,c,i,n)},nf.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Zh("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof r[u]||Wh(r[u])||(cc("Query.onSnapshot",a=r[u],["includeMetadataChanges"]),ic("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),Wh(r[u])?(s=r[u],r[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),r[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),r[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(tc("Query.onSnapshot","function",u,r[u]),ec("Query.onSnapshot","function",u+1,r[u+1]),ec("Query.onSnapshot","function",u+2,r[u+2]));var h={next:function(t){r[u]&&r[u](new Jl(i.firestore,i.c_,t,i.Kc))},error:r[u+1],complete:r[u+2]};return Xl(this.c_),this.firestore.Ml().listen(this.c_,a,h)},nf.prototype.get=function(t){var e=this;Zh("Query.get",arguments,0,1),sf("Query.get",t),Xl(this.c_);var n=this.firestore.Ml();return(t&&"cache"===t.source?n.pl(this.c_):n.yl(this.c_,t)).then(function(t){return new Jl(e.firestore,e.c_,t,e.Kc)})},nf),Jl=(Object.defineProperty(ef.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(ef.prototype,"empty",{get:function(){return this.f_.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(ef.prototype,"size",{get:function(){return this.f_.docs.size},enumerable:!1,configurable:!0}),ef.prototype.forEach=function(e,n){var i=this;Zh("QuerySnapshot.forEach",arguments,1,2),tc("QuerySnapshot.forEach","function",1,e),this.f_.docs.forEach(function(t){e.call(n,i.T_(t,i.metadata.fromCache,i.f_.qt.has(t.key)))})},Object.defineProperty(ef.prototype,"query",{get:function(){return new $l(this.__,this.e_,this.Kc)},enumerable:!1,configurable:!0}),ef.prototype.docChanges=function(t){t&&(cc("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ic("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.f_.Ut)throw new Qi(Xi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.d_&&this.w_===e||(this.d_=function(r,e,o){if(r.Ot._()){var n=0;return r.docChanges.map(function(t){var e=o(t.doc,r.fromCache,r.qt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=r.Ot;return r.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,r.fromCache,r.qt.has(t.doc.key)),n=-1,i=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(i=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Li()}}(t.type),doc:e,oldIndex:n,newIndex:i}})}(this.f_,e,this.T_.bind(this)),this.w_=e),this.d_},ef.prototype.isEqual=function(t){if(!(t instanceof ef))throw lc("isEqual","QuerySnapshot",1,t);return this.e_===t.e_&&la(this.__,t.__)&&this.f_.isEqual(t.f_)&&this.Kc===t.Kc},ef.prototype.T_=function(t,e,n){return new Ul(this.e_,t.key,t,e,n,this.Kc)},ef),Zl=(n(tf,Ql=$l),Object.defineProperty(tf.prototype,"id",{get:function(){return this.c_.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(tf.prototype,"parent",{get:function(){var t=this.c_.path.g();return t._()?null:new Ll(new ir(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(tf.prototype,"path",{get:function(){return this.c_.path.N()},enumerable:!1,configurable:!0}),tf.prototype.doc=function(t){Zh("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ci.t()),tc("CollectionReference.doc","non-empty string",1,t);var e=tr.$(t);return Ll.Zl(this.c_.path.child(e),this.firestore,this.Kc)},tf.prototype.add=function(t){$h("CollectionReference.add",arguments,1),tc("CollectionReference.add","object",1,this.Kc?this.Kc.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},tf.prototype.withConverter=function(t){return new tf(this.m_,this.firestore,t)},tf);function tf(t,e,n){var i=this;if(((i=Ql.call(this,ra(t),e,n)||this).m_=t).length%2!=1)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.N()+" has "+t.length);return i}function ef(t,e,n,i){this.e_=t,this.__=e,this.f_=n,this.Kc=i,this.d_=null,this.w_=null,this.metadata=new Vl(n.hasPendingWrites,n.fromCache)}function nf(t,e,n){this.c_=t,this.firestore=e,this.Kc=n}function rf(t,e){if(void 0===e)return{merge:!1};if(cc(t,e,["merge","mergeFields"]),ic(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,i){if(!(n instanceof Array))throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+uc(n));for(var r=0;r<n.length;++r)if(!i(n[r]))throw new Qi(Xi.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+r+" was: "+uc(n[r]))}(t,"mergeFields",n,function(t){return"string"==typeof t||t instanceof Ec}),void 0!==e.mergeFields&&void 0!==e.merge)throw new Qi(Xi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function of(t,e){return void 0===e?{}:(cc(t,e,["serverTimestamps"]),rc(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function sf(t,e){ec(t,"object",1,e),e&&(cc(t,e,["source"]),rc(t,0,"source",e.source,["default","server","cache"]))}function af(t,e,n){if(e instanceof Bc){if(e.firestore!==n)throw new Qi(Xi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw lc(t,"DocumentReference",1,e)}function uf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var hf,cf={Firestore:Dl,GeoPoint:jc,Timestamp:$i,Blob:wc,Transaction:kl,WriteBatch:Pl,DocumentReference:Ll,DocumentSnapshot:Cl,Query:$l,QueryDocumentSnapshot:Ul,QuerySnapshot:Jl,CollectionReference:Zl,FieldPath:Ec,FieldValue:qc,setLogLevel:Dl.setLogLevel,CACHE_SIZE_UNLIMITED:Ol};(hf=lf).INTERNAL.registerComponent(new Ni("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new Dl(e,n,new Bh,new zh);var e,n},"PUBLIC").setServiceProps(Object.assign({},cf))),hf.registerVersion("@firebase/firestore","1.16.3")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-firestore.memory.js.map
